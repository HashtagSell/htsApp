/*! HashtagSell 21-08-2015 */
var htsApp=angular.module("htsApp",["globalVars","ui.router","ct.ui.router.extras.core","ct.ui.router.extras.dsr","ct.ui.router.extras.sticky","ui.bootstrap","mentio","ui.bootstrap-slider","frapontillo.bootstrap-switch","ngTable","uiGmapgoogle-maps","ivh.treeview","vs-repeat","ui.bootstrap.datetimepicker","ngSanitize","ui-notification","ezfb","slick","braintree-angular","ui.select","angulartics","angulartics.google.analytics"]);htsApp.config(["$httpProvider","$stateProvider","$urlRouterProvider","$tooltipProvider","ivhTreeviewOptionsProvider","$locationProvider","ezfbProvider","ENV",function(a,b,c,d,e,f,g,h){a.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",f.html5Mode({enabled:!0,requireBase:!1}),f.hashPrefix("!"),g.setLocale("en_US"),g.setInitParams({appId:h.fbAppId,version:"v2.1"});var i=d.$get[d.$get.length-1];d.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function(a,b,c,d,e,f){return"ontouchstart"in a?function(){return{compile:function(){}}}:i(a,b,c,d,e,f)}],d.setTriggers({show:"hide"}),e.set({twistieCollapsedTpl:'<span class="glyphicon glyphicon-chevron-right"></span>',twistieExpandedTpl:'<span class="glyphicon glyphicon-chevron-down"></span>',twistieLeafTpl:"",defaultSelectedState:!1});var j=["$q","Session","$state","$timeout","redirect","authModalFactory",function(a,b,c,d,e,f){var g=a.defer();return b.userObj.user_settings.loggedIn?g.resolve():(d(function(){c.go("signup",{redirect:e})}),g.resolve()),g.promise}],k=["socketio","Session","$stateParams","splashFactory",function(a,b,c,d){if(b.userObj.user_settings.loggedIn&&(a.joinPostingRoom(c.id,"toggleSplash"),d.result&&"HSHTG"===d.result.external.source)){var e=d.result.username;a.joinUserRoom(e,b.userObj.user_settings.name)}}],l=["socketio","Session","$stateParams","splashFactory",function(a,b,c,d){if(b.userObj.user_settings.loggedIn&&(a.leavePostingRoom(c.id,"toggleSplash"),d.result&&"HSHTG"===d.result.external.source)){var e=d.result.username;a.leaveUserRoom(e)}}];c.otherwise(function(a,b){var c=a.get("$state");return c.go("404"),b.path()}),b.state("404",{views:{root:{templateUrl:"js/404/partials/404.html"}}}).state("betaAgreement",{url:"/beta-agreement",views:{root:{templateUrl:"js/legal/betaAgreement/partials/betaAgreement.partial.html",controller:"betaAgreementController"}}}).state("checkemail",{url:"/checkemail",params:{redirect:null},views:{modal:{controller:["authModalFactory","$state",function(a,b){a.checkEmailModal(b.params)}]}}}).state("feed",{url:"/feed",templateUrl:"js/feed/partials/feed.partial.html",controller:"feed.controller"}).state("feed.splash",{url:"/:id",controller:"splashController",onEnter:k,onExit:l}).state("forgot",{url:"/forgot?msg",params:{redirect:null,msg:null},views:{modal:{controller:["authModalFactory","$state","$rootScope",function(a,b,c){a.forgotPasswordModal(b.params.redirect?b.params:{redirect:c.previousState})}]}}}).state("myposts",{url:"/myposts",templateUrl:"js/myPosts/partials/myPosts.html",controller:"myPosts.controller"}).state("myposts.questions",{url:"/questions/:postingId",resolve:{loginRequired:j,redirect:function(){return"myposts.questions"}}}).state("myposts.meetings",{url:"/meetings/:postingId",resolve:{loginRequired:j,redirect:function(){return"myposts.meetings"}}}).state("myposts.splash",{url:"/:id",controller:"splashController",resolve:{loginRequired:j,redirect:function(){return"myposts.splash"}}}).state("notifications",{url:"/notifications",templateUrl:"js/notifications/partials/notifications.html",controller:"notifications.controller"}).state("payment",{url:"/payment/:postingId/:offerId",views:{root:{controller:"paymentController",templateUrl:"js/payment/partials/payment.partial.html"}}}).state("postingRules",{url:"/posting-rules",views:{root:{templateUrl:"js/legal/postingRules/partials/postingRules.partial.html",controller:"postingRulesController"}}}).state("privacyPolicy",{url:"/privacy-policy",views:{root:{templateUrl:"js/legal/privacyPolicy/partials/privacyPolicy.partial.html",controller:"privacyPolicyController"}}}).state("profile",{url:"/profile",templateUrl:"js/profile/partials/profile.partial.html",controller:"profile.controller",resolve:{loginRequired:j,redirect:function(){return"profile"}}}).state("reset",{url:"/reset/:token/",views:{modals:{controller:["authModalFactory","$state",function(a,b){a.resetPasswordModal("signin",b.params.token)}]}}}).state("results",{url:"/q/:q",params:{q:null,city:null,locationObj:null,price:null},controller:"results.controller",templateUrl:"js/results/partials/results_partial.html"}).state("results.splash",{url:"/:id",params:{q:null,city:null,locationObj:null,id:null},controller:"splashController",onEnter:k,onExit:l}).state("review",{url:"/review/:postingId/:offerId/:userId",views:{root:{controller:"peerReviewController",templateUrl:"js/peerReview/partials/peerReview.partial.html"}}}).state("root",{url:"/",onEnter:["$state",function(a){a.go("feed",{},{location:!1})}]}).state("settings",{url:"/settings",templateUrl:"js/settings/settings_partial.html"}).state("settings.account",{url:"/account",templateUrl:"js/settings/account/partials/settings.account_partial.html",controller:"settings.account.controller",resolve:{loginRequired:j,redirect:function(){return"settings.account"}}}).state("settings.password",{url:"/password",templateUrl:"js/settings/password/partials/settings.password_partial.html",controller:"settings.password.controller",resolve:{loginRequired:j,redirect:function(){return"settings.password"}}}).state("settings.profile",{url:"/profile",templateUrl:"js/settings/profile/partials/settings.profile_partial.html",controller:"settings.profile.controller",resolve:{loginRequired:j,redirect:function(){return"settings.profile"}}}).state("settings.payment",{url:"/payment",templateUrl:"js/settings/payment/partials/settings.payment_partial.html",controller:"settings.payment.controller",resolve:{loginRequired:j,redirect:function(){return"settings.payment"}}}).state("signin",{url:"/signin?email&tour",params:{redirect:null,email:null,tour:null},views:{modal:{controller:["authModalFactory","$state","$rootScope",function(a,b,c){a.signInModal(b.params.redirect?b.params:{redirect:c.previousState})}]}}}).state("signup",{url:"/signup",views:{modal:{controller:["authModalFactory","$state","$rootScope",function(a,b,c){a.signUpModal(b.params.redirect?b.params:{redirect:c.previousState})}]}},params:{redirect:null}}).state("termsOfService",{url:"/terms-of-service",views:{root:{templateUrl:"js/legal/termsOfService/partials/termsOfService.partial.html",controller:"termsOfServiceController"}}}).state("watchlist",{url:"/watchlist",templateUrl:"js/watchlist/partials/watchlist.html",controller:"watchlistController"}).state("watchlist.questions",{url:"/questions/:postingId",resolve:{loginRequired:j,redirect:function(){return"watchlist.questions"}}}).state("watchlist.meetings",{url:"/meetings/:postingId",resolve:{loginRequired:j,redirect:function(){return"watchlist.meetings"}}}).state("watchlist.splash",{url:"/:id",controller:"splashController",onEnter:k,onExit:l,resolve:{loginRequired:j,redirect:function(){return"watchlist.splash"}}})}]),htsApp.directive("matchinput",function(){return{require:"ngModel",restrict:"A",scope:{matchinput:"="},link:function(a,b,c,d){a.$watch(function(){return d.$pristine&&angular.isUndefined(d.$modelValue)||a.matchinput===d.$modelValue},function(a){d.$setValidity("match",a)})}}}),htsApp.run(function(){FastClick.attach(document.body)}),htsApp.filter("tel",function(){return function(a){if(!a)return"";var b=a.toString().trim().replace(/^\+/,"");if(b.match(/[^0-9]/))return a;var c,d,e;switch(b.length){case 10:c=1,d=b.slice(0,3),e=b.slice(3);break;case 11:c=b[0],d=b.slice(1,4),e=b.slice(4);break;case 12:c=b.slice(0,3),d=b.slice(3,5),e=b.slice(5);break;default:return a}return 1==c&&(c=""),e=e.slice(0,3)+"-"+e.slice(3),(c+" ("+d+") "+e).trim()}}),htsApp.filter("cleanHeading",["$sce",function(a){return function(b){return b.replace(/\w\S*/g,function(b){var c=new RegExp("\\S+([0-9];)");if(c.test(b))return"";var d=b.charAt(0).toUpperCase()+b.substr(1).toLowerCase();return a.trustAsHtml(d)})}}]),htsApp.filter("cleanBody",["$sce",function(a){return function(b){return b=b.replace(/[\r\n]/g,"<br />"),b.replace(/\b([A-Z]{2,})\b/g,function(b){var c=new RegExp("\\S+([0-9];)");if(c.test(b))return"";var d=b.charAt(0).toUpperCase()+b.substr(1).toLowerCase();return a.trustAsHtml(d)})}}]),htsApp.filter("cleanBodyExcerpt",["$sce",function(a){return function(b){return b.replace(/\b([A-Z]{2,})\b/g,function(b){var c=new RegExp("\\S+([0-9];)");if(c.test(b))return"";var d=b.charAt(0).toUpperCase()+b.substr(1).toLowerCase();return a.trustAsHtml(d)})}}]),htsApp.directive("awesomebar",["$sce",function(a){return{restrict:"A",require:"?ngModel",link:function(b,c,d,e){function f(){var a=c.html();d.stripBr&&"<br>"===a&&(a=""),e.$setViewValue(a)}e&&(e.$render=function(){e.$viewValue!==c.html()&&c.html(a.getTrustedHtml(e.$viewValue||""))},c.on("keydown keyup",function(a){if(13===parseInt(a.which)&&"keydown"===a.type){var d=angular.element(document.querySelector("#mentioMenu"));"none"===d[0].style.display?(c.blur(),b.awesomeBarSubmit()):"block"===d[0].style.display,a.preventDefault()}else b.$apply(f)}),f())}}}]),htsApp.directive("sellbox",["$sce","$window","$timeout","newPostFactory","mentioUtil",function(a,b,c,d,e){return{restrict:"A",require:"?ngModel",link:function(c,d,e,f){function g(){var a=d.html();e.stripBr&&"<br>"===a&&(a=""),f.$setViewValue(a)}function h(a){var b=document.createElement("DIV");return b.innerHTML=a,b.textContent||b.innerText||""}if(f){f.$render=function(){f.$viewValue!==d.html()&&d.html(a.getTrustedHtml(f.$viewValue||""))};var i=b.JsDiff,j=!1;c.$watch("jsonObj.body",function(a,b){if(j){j=!1;var d=h(b),e=h(a);if(e){var f=i.diffWords(d,e);if(f.length)for(var g=0;g<f.length;g++){var k=f[g];if(k.removed)if(-1!==k.value.indexOf("#")){var l=k.value.replace("#","");l=l.trim(),c.cleanModel("#",l)}else if(-1!==k.value.indexOf("$")){var m=k.value.replace("$","");m=m.trim(),c.cleanModel("$",m)}else if(-1!==k.value.indexOf("@")){var n=k.value.replace("@","");n=n.trim(),c.cleanModel("@",n)}}}else c.resetAll()}}),d.on("keydown keyup",function(a){var b=parseInt(a.which);8===parseInt(b)&&"keydown"===a.type&&(j=!0),c.$apply(g)}),g()}}}}]),htsApp.directive("dropzone",function(){return{link:function(a,b,c){var d,e;Dropzone.autoDiscover=!1,d=a[c.dropzone],e=new Dropzone(b[0],d.options),angular.forEach(d.eventHandlers,function(a,b){e.on(b,a)}),d.init=function(){e.processQueue()}}}}),htsApp.directive("dropdownMultiselect",["favesFactory",function(a){return{restrict:"E",scope:{selectedlabels:"=",userlabels:"=",selectedfaves:"=",placeholder:"=ngPlaceholder"},link:function(a,b){b.bind("click",function(a){a.stopPropagation()})},template:"<span class='dropdown' dropdown><i class='fa fa-tags dropdown-toggle' dropdown-toggle ng-click='open=!open;openDropdown()'>&nbsp;&nbsp;#Label</i><ul class='dropdown-menu'>   <input ng-model='query' type='text' autofocus class='labels-input' placeholder='Filter or Create New Label'/>   <li ng-repeat='label in userlabels | filter:query' class='label-list'>       <a ng-click='setSelectedItem()'>           <span ng-click='deleteLabel($event)' class='fa fa-minus-circle pull-left delete-label'></span>#{{label.name}}           <span ng-class='isChecked(label.name)'><span/>       </a>   </li>   <li>       <a dropdown-toggle ng-click='createNewLabel(query)' ng-show='ifQueryUnique(query)'>{{query}} (create new)</a>   </li>   <li>       <a dropdown-toggle ng-click='applyChanges()' ng-show='updatesNecessary'>Apply</a>   </li></ul></span>",controller:["$scope","favesFactory","Session",function(a,b,c){a.currentFaves=c.userObj.user_settings.favorites,a.openDropdown=function(){a.selectedlabels=[],a.updatesNecessary=!1;var b=a.currentFaves;angular.forEach(a.selectedfaves,function(c,d){if(c)for(i=0;i<b.length;i++)if(b[i].postingId==d&&b[i].labels)for(j=0;j<b[i].labels.length;j++){var e=b[i].labels[j];_.contains(a.selectedlabels,e)||a.selectedlabels.push(e)}})},a.ifQueryUnique=function(b){var c=!0;return b?_.find(a.userlabels,function(a){a.name==b&&(c=!1)}):c=!1,c},a.createNewLabel=function(c){var d={name:c};b.addFavoriteLabel(d),a.userlabels=b.getUserLabels(),a.setSelectedItem(d.name),a.applyChanges(),a.query=""},a.setSelectedItem=function(b){a.updatesNecessary=!0,b||(b=this.label.name),_.contains(a.selectedlabels,b)?a.selectedlabels=_.without(a.selectedlabels,b):a.selectedlabels.push(b)},a.applyChanges=function(){var b=a.currentFaves;angular.forEach(a.selectedfaves,function(c,d){if(c)for(i=0;i<b.length;i++)b[i].postingId==d&&(b[i].labels=a.selectedlabels)}),c.setSessionValue("favorites",b),a.selectedfaves={},a.updatesNecessary=!1},a.deleteLabel=function(c){c.stopPropagation();var d=this.label.name,e={name:d};b.removeFavoriteLabel(e,a.refreshTable)},a.refreshTable=function(){a.userlabels=b.getUserLabels(),b.refreshTable()},a.isChecked=function(b){return _.contains(a.selectedlabels,b)?"fa fa-check pull-right":!1}}]}}]),htsApp.directive("htsFaveToggle",function(){return{restrict:"E",template:'<span ng-class="{starHighlighted: favorited, star: !favorited}" ng-click="toggleFave(result); $event.stopPropagation();" tooltip="{{tooltipMessage}}" tooltip-placement="bottom" tooltip-trigger="mouseenter"></span>',controller:["$scope","$element","favesFactory","Session","authModalFactory","socketio","sideNavFactory","$timeout",function(a,b,c,d,e,f,g,h){d.userObj.user_settings.loggedIn&&c.checkFave(a.result,function(b){a.favorited=b,a.tooltipMessage="please wait",a.favorited?a.tooltipMessage="Remove from watch list":a.tooltipMessage="Add to watch list"}),a.toggleFave=function(b){d.userObj.user_settings.loggedIn?a.favorited?c.removeFave(b,function(){g.defaultMenu[2].active=!0,h(function(){g.defaultMenu[2].active=!1},250),a.favorited=!1,a.tooltipMessage="Add to watch list",f.leavePostingRoom(b.postingId,"inWatchList")}):c.addFave(b,function(){g.defaultMenu[2].active=!0,h(function(){g.defaultMenu[2].active=!1},250),a.favorited=!0,a.tooltipMessage="Remove from watch list",f.joinPostingRoom(b.postingId,"inWatchList")}):e.signInModal()}}]}}),htsApp.filter("capitalize",function(){return function(a,b){return a?a.replace(/([^\W_]+[^\s-]*) */g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}):""}}),htsApp.directive("subMerchant",function(){return{templateUrl:"js/submerchant/partials/submerchant.partial.html",controller:["$scope","$http","$q","$timeout","$filter","Session","ENV",function(a,b,c,d,e,f,g){a.alerts=[],a.closeAlert=function(b){a.alerts.splice(b,1)},a.$watch("subMerchForm.dob.$viewValue",function(b,c){if(b)if(b.length<=10){var d=b.slice(-1),e=!isNaN(d);e?b&&c&&(1==c.length||4==c.length)&&(2==b.length||5==b.length)&&(a.subMerchantForm.individual.dateOfBirth=a.subMerchForm.dob.$viewValue+"/"):"/"===d?3==b.length||6==b.length||(a.subMerchantForm.individual.dateOfBirth=c):a.subMerchantForm.individual.dateOfBirth=c}else a.subMerchantForm.individual.dateOfBirth=c}),a.$watch("subMerchantForm.destination.disperseType",function(b,c){"bank"===b?a.subMerchant.funding.destination="bank":"venmo"===b&&(a.subMerchant.funding.destination="email")}),a.subMerchantForm={business:{isbusinessAccount:null,businessOptionsDropdown:[{name:"No",value:!1},{name:"Yes",value:!0}],addressLookup:null},individual:{addressLookup:null,dateOfBirth:null},destination:{disperseToBank:null,disperseToVenmo:null},update:null},a.subMerchant={business:{legalName:null,taxId:null,address:{street_address:null,locality:null,region:null,postalCode:null}},individual:{firstName:null,lastName:null,email:null,dateOfBirth:null,address:{streetAddress:null,locality:null,region:null,postalCode:null}},funding:{destination:"email",email:null,mobilePhone:null,accountNumber:null,routingNumber:null},tosAccepted:!0},a.convertIndividualDob=function(a,b){var c="",d="",e="",f="",g="";return"dashes"===b?(c=a.split("/"),d=c[0],e=c[1],f=c[2],g=f+"-"+d+"-"+e):"slashes"===b&&(c=a.split("-"),f=c[0],d=c[1],e=c[2],g=d+"/"+e+"/"+f),g},function(){a.recoveredMerchantAccount=f.getSessionValue("merchantAccount"),a.recoveredMerchantAccount.response.status&&("pending"===a.recoveredMerchantAccount.response.status?a.alerts.push({msg:"This account is currently pending approval.",type:"warning"}):"declined"===a.recoveredMerchantAccount.response.status&&a.alerts.push({msg:"This account is currently declined.",type:"danger"}),a.recoveredMerchantAccount.details.id&&(a.subMerchantForm.individual.dateOfBirth=a.convertIndividualDob(a.recoveredMerchantAccount.details.individual.dateOfBirth,"slashes"),a.subMerchant=a.recoveredMerchantAccount.details))}(),a.submitSubMerchant=function(){a.alerts=[],a.subMerchant.individual.dateOfBirth=a.convertIndividualDob(a.subMerchantForm.individual.dateOfBirth,"dashes"),b.post(g.paymentAPI+"/submerchant",{subMerchant:a.subMerchant,existingSubMerchant:a.recoveredMerchantAccount.response.id}).success(function(b){b.success?("pending"===b.merchantAccount.status?a.alerts.push({msg:"Congrats! Your seller account is pending approval, but don't let this stop you from posting now.",type:"success"}):"active"===b.merchantAccount.status&&a.alerts.push({msg:"Congrats! Your seller account is active.",type:"success"}),f.getUserFromServer().then(function(a){f.create(a)}),a.$dismiss&&a.$dismiss("subMerchantModalSuccess",b)):a.alerts.push({msg:b.message,type:"danger"})}).error(function(b){a.alerts.push({msg:b.message,type:"danger"})})},a.predictAddress=function(b){return a.predictPlace(b).then(function(a){return a.map(function(a){return a})})},a.predictPlace=function(a){var b=new google.maps.LatLngBounds(new google.maps.LatLng(37.79738,-122.52464),new google.maps.LatLng(37.68879,-122.36122)),d={input:a,bounds:b,componentRestrictions:{country:"US"}},e=new google.maps.places.AutocompleteService,f=c.defer();return e.getPlacePredictions(d,function(a,b){f.resolve(a)}),f.promise},a.setAddressComponents=function(b,c){var d=new google.maps.places.PlacesService(new google.maps.Map(document.createElement("map-canvas"))),e={placeId:b.place_id};d.getDetails(e,function(b,d){for(var e="",f="",g=0;g<b.address_components.length;g++)for(var h=b.address_components[g],i=0;i<h.types.length;i++){var j=h.types[i];if("locality"===j){a.subMerchant[c].address.locality=h.long_name;break}if("administrative_area_level_1"===j){a.subMerchant[c].address.region=h.short_name;break}if("route"===j){e=h.long_name;break}if("postal_code"===j){a.subMerchant[c].address.postalCode=h.long_name;break}if("street_number"===j){f=h.long_name;break}}a.subMerchant[c].address.streetAddress=f+" "+e})}}]}}),htsApp.filter("awesomecity",function(){return function(a){var b;return b=a?a.replace(/,[^,]+$/,""):"Nearby"}}),htsApp.directive("onlyDigits",function(){return{require:"ngModel",restrict:"A",link:function(a,b,c,d){function e(a){if(a){var b=a.replace(/\/[^0-9]/g,"");return b!==a&&(d.$setViewValue(b),d.$render()),parseInt(b,10)}return void 0}d.$parsers.push(e)}}}),htsApp.directive("ngEnter",function(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter)}),b.preventDefault())})}}),htsApp.directive("spinner",["sideNavFactory",function(a){return{restrict:"E",scope:{spinnerTextAttribute:"@spinnerAttribute"},template:"<div><div class='spinner'><div class='bounce1' style='background-color: white;'></div><div class='bounce2' style='background-color: white;'></div><div class='bounce3' style='background-color: white;'></div></div><h4>{{spinnerText}}</h4>",link:function(b,c,d){b.sideNav=a.sideNav,d.$observe("spinnerText",function(){b.spinnerText=d.spinnerText,b.spinnerTextAttribute&&(b.spinnerText=b.spinnerText.replace("searchTerm",b.spinnerTextAttribute))}),b.$watch(function(){return b.sideNav.listView},function(a){a?c.addClass("nudge-spinner"):c.removeClass("nudge-spinner")})}}}]),htsApp.directive("bookingSystem",["$timeout",function(a){return{restrict:"E",scope:!1,templateUrl:"js/bookingSystem/partials/bookingSystem.html",link:function(a,b,c){var d=[];a.selectedDay=null,a.daySelected=function(b){a.days[b].selected=!a.days[b].selected,a.days[b].selected?(a.selectedDay=a.days[b],a.selectedHours=a.days[b].hours):(a.selectedDay=null,a.selectedHours=[])},a.getAllProposedTimes=function(){d=[];for(var b=0;b<a.days.length;b++)for(var c=a.days[b],e=0;e<c.hours.length;e++){var f=c.hours[e];f.selected&&d.push(f.value.format())}a.deal.when=d},a.back=function(){a.selectedDay=null},function(){for(var b=[],c=0;5>c;c++){for(var d={name:moment().add(c,"days").format("dddd").trim(),value:moment().add(c,"days"),selected:!1,hours:[]},e=5;25>e;e++){var f;0===c?(d.name="Today",moment().isBefore(moment().startOf("day").hours(e))&&(f={name:moment().startOf("day").hours(e).format("ha z").trim(),value:moment().startOf("day").hours(e),selected:!1},d.hours.push(f))):(f={name:moment().add(c,"days").startOf("day").hours(e).format("ha z").trim(),value:moment().add(c,"days").startOf("day").hours(e),selected:!1},d.hours.push(f))}b.push(d)}a.days=b}()}}}]),angular.module("globalVars",[]).constant("ENV",{name:"production",htsAppUrl:"https://www.hashtagsell.com",postingAPI:"https://production-posting-api.hashtagsell.com/v1/postings/",userAPI:"https://production-posting-api.hashtagsell.com/v1/users/",utilsApi:"https://www.hashtagsell.com/utils/",realtimePostingAPI:"https://production-realtime-svc.hashtagsell.com/postings",realtimeUserAPI:"https://production-realtime-svc.hashtagsell.com/users",groupingsAPI:"https://production-posting-api.hashtagsell.com/v1/groupings/",annotationsAPI:"https://production-posting-api.hashtagsell.com/v1/annotations",feedbackAPI:"https://www.hashtagsell.com/feedback",paymentAPI:"https://www.hashtagsell.com/payments",precacheAPI:"https://www.hashtagsell.com/precache",facebookAuth:"https://www.hashtagsell.com/auth/facebook",twitterAuth:"https://www.hashtagsell.com/auth/twitter",ebayAuth:"https://www.hashtagsell.com/auth/ebay",ebayRuName:"HashtagSell__In-HashtagS-70ae-4-hkrcxmxws",ebaySignIn:"https://signin.ebay.com/ws/eBayISAPI.dll",fbAppId:"367469320085475"}).constant("clientTokenPath","https://www.hashtagsell.com/payments/client_token"),htsApp.factory("authModalFactory",["Session","$modal","$log","$state","$rootScope",function(a,b,c,d,e){var f={};return f.signInModal=function(a){var f=b.open({templateUrl:"js/authModals/modals/signInModal/partials/signIn.html",controller:"signInModalController",size:"sm",backdropClass:"translucent-modal-backdrop",resolve:{params:function(){return a}}});f.result.then(function(a){},function(b){"signUp"===b?d.go("signup",{redirect:a.redirect}):"forgot"===b?d.go("forgot",{redirect:a.redirect}):"signIn"===b?d.go("signin",{redirect:a.redirect}):d.go("successful login"===b&&a.redirect?a.redirect:"successful login"!==b||a.redirect?a.redirect:"feed"),c.info("Modal dismissed at: "+new Date)}),e.$on("$stateChangeStart",function(a,b,c,d,e){f.dismiss("direct")})},f.betaCheckModal=function(a){var f=b.open({templateUrl:"js/authModals/modals/betaCheckModal/partials/betaCheck.html",controller:"betaCheckModalController",size:"lg",backdropClass:"translucent-modal-backdrop"});f.result.then(function(a){},function(b){"signUp"===b?d.go("signup",{redirect:a.redirect}):"subscribe"===b&&d.go("subscribe",{redirect:a.redirect}),c.info("Modal dismissed at: "+new Date)}),e.$on("$stateChangeStart",function(a,b,c,d,e){f.dismiss("direct")})},f.signUpModal=function(a){var f=b.open({templateUrl:"js/authModals/modals/signUpModal/partials/signUp.html",controller:"signupModalController",size:"sm",backdropClass:"translucent-modal-backdrop"});f.result.then(function(a){},function(b){"success"===b?d.go("checkemail"):"forgot"===b?d.go("forgot",{redirect:a.redirect}):"signIn"===b?d.go("signin",{redirect:a.redirect}):"subscribe"===b?d.go("subscribe",{redirect:a.redirect}):d.go(a.redirect,{},{reload:!0}),c.info("Modal dismissed at: "+new Date)}),e.$on("$stateChangeStart",function(a,b,c,d,e){f.dismiss("direct")})},f.subscribeModal=function(a){var f=b.open({templateUrl:"js/authModals/modals/subscribeModal/partials/subscribe.html",controller:"subscribeModalController",size:"sm",backdropClass:"translucent-modal-backdrop"});f.result.then(function(a){},function(b){"success"===b?d.go("checkemail"):"signUp"===b?d.go("signup",{redirect:a.redirect}):"signIn"===b&&d.go("signin",{redirect:a.redirect}),c.info("Modal dismissed at: "+new Date)}),e.$on("$stateChangeStart",function(a,b,c,d,e){f.dismiss("direct")})},f.checkEmailModal=function(){var a=b.open({templateUrl:"js/authModals/modals/checkEmailModal/partials/checkEmail.html",controller:"checkEmailController",size:"sm",backdropClass:"translucent-modal-backdrop"});a.result.then(function(a){},function(a){c.info("Modal dismissed at: "+new Date)}),e.$on("$stateChangeStart",function(b,c,d,e,f){a.dismiss("direct")})},f.forgotPasswordModal=function(a){var f=b.open({templateUrl:"js/authModals/modals/forgotPasswordModal/partials/forgotPassword.html",controller:"forgotPasswordController",size:"sm",backdropClass:"translucent-modal-backdrop",resolve:{params:function(){return a}}});f.result.then(function(a){},function(b){"success"===b?d.go("checkemail"):"signUp"===b?d.go("signup",{redirect:a.redirect}):"signIn"===b?d.go("signin",{redirect:a.redirect}):d.go(a.redirect),c.info("Modal dismissed at: "+new Date)}),e.$on("$stateChangeStart",function(a,b,c,d,e){f.dismiss("direct")})},f.resetPasswordModal=function(a,f){var g=b.open({templateUrl:"js/authModals/modals/resetPasswordModal/partials/resetPassword.html",controller:"resetPasswordModalController",size:"sm",backdropClass:"translucent-modal-backdrop",resolve:{token:function(){return f}}});g.result.then(function(a){},function(a){a.success&&d.go("signin",{redirect:"feed",email:a.email}),c.info("Modal dismissed at: "+new Date)}),e.$on("$stateChangeStart",function(a,b,c,d,e){g.dismiss("direct")})},f}]),htsApp.controller("betaCheckModalController",["$scope","$modalInstance",function(a,b){a.dismiss=function(a){b.dismiss(a)}}]),htsApp.controller("checkEmailController",["$scope","$modalInstance",function(a,b){a.dismiss=function(a){b.dismiss(a)}}]),htsApp.controller("forgotPasswordController",["$scope","$modalInstance","authFactory","params",function(a,b,c,d){d.msg&&(a.message="This activation email link has already been used.  Sign in or reset your password."),a.forgotPassword=function(b){if(b){var d=a.email;c.passwordReset(d).then(function(b){b.error?a.message=b.error:b.success&&a.dismiss("success")},function(){a.message="Please contact support.  Sorry for the trouble"})}},a.dismiss=function(a){b.dismiss(a)}}]),htsApp.controller("resetPasswordModalController",["$scope","$modalInstance","authFactory","token",function(a,b,c,d){a.resetPassword=function(b){if(b){var e=a.newPassword;c.changePassword(e,d).then(function(b){b.error?a.message=b.error:b.success&&a.dismiss(b)},function(){a.message="Please contact support.  Sorry for the trouble"})}},a.dismiss=function(a){b.dismiss(a)}}]),htsApp.controller("signInModalController",["$scope","$modalInstance","$window","authFactory","params",function(a,b,c,d,e){e.email&&(a.email=e.email),a.loginPassport=function(b){if(b){var c=a.email,e=a.password;d.login(c,e).then(function(b){b.error?a.message=b.error:b.success&&a.dismiss("successful login")},function(){a.message="Ooops.. Login error, please contact support."})}},a.dismiss=function(a){b.dismiss(a)}}]),htsApp.controller("signupModalController",["$scope","$modalInstance","authFactory","Notification",function(a,b,c,d){a.signupPassport=function(b){if(b){var e=a.email,f=a.password,g=a.name,h=a.betaAgreement;c.signUp(e,f,g,h).then(function(b){b.error?a.message=b.error:b.success&&a.dismiss("success")},function(){d.error({message:"Appears we're having sign up issues.  Please check back soon.",delay:1e4})})}},a.dismiss=function(a){b.dismiss(a)}}]),htsApp.controller("subscribeModalController",["$scope","$modalInstance","authFactory","Notification",function(a,b,c,d){a.alerts=[],a.closeAlert=function(b){a.alerts.splice(b,1)},a.subscribe=function(b){if(b){var e=a.email;c.subscribe(e).then(function(b){b.success?b.success&&(a.done=!0,a.alerts.push({type:"success",msg:b.message})):a.alerts.push({type:"danger",msg:b.message})},function(){d.error({message:"Whoops.. Can't take new subscribers right meow.. We're working on this.",delay:1e4})})}},a.dismiss=function(a){b.dismiss(a)}}]),htsApp.factory("authFactory",["$http","Session","$q","$window",function(a,b,c){var d={};return d.login=function(d,e){var f=c.defer();return a.post("/login",{email:d,password:e}).then(function(a){a.data.success?(b.create(a.data),f.resolve(a.data)):f.resolve(a.data)},function(a,b,c,d){f.reject()}),f.promise},d.signUp=function(b,d,e,f){var g=c.defer();return a.post("/signup",{email:b,password:d,name:e,secret:f}).then(function(a){a.data&&g.resolve(a.data)},function(a,b,c,d){g.reject()}),g.promise},d.subscribe=function(b){var d=c.defer();return a.post("/subscribe",{email:b}).then(function(a){a.data&&d.resolve(a.data)},function(a,b,c,e){d.reject()}),d.promise},d.passwordReset=function(b){var d=c.defer();return a.post("/forgot",{email:b}).then(function(a){a.data&&d.resolve(a.data)},function(a,b,c,e){d.reject()}),d.promise},d.changePassword=function(b,d){var e=c.defer();return a.post("/reset",{password:b,token:d}).then(function(a){a.data&&e.resolve(a.data)},function(a,b,c,d){e.reject()}),e.promise},d.updatePassword=function(b,d){var e=c.defer();return a.post("/reset",{currentPassword:b,newPassword:d}).then(function(a){a.data&&e.resolve(a.data)},function(a,b,c,d){e.reject()}),e.promise},d}]),htsApp.controller("awesomeBarController",["$window","$scope","$location","awesomeBarFactory","searchFactory","$state",function(a,b,c,d,e,f){function g(a){var b=document.createElement("DIV");return b.innerHTML=a,b.textContent||b.innerText||""}b.queryObj=d.queryObj,b.handlePaste=function(a){a.preventDefault(),b.queryObj.q=a.originalEvent.clipboardData.getData("text/plain")},b.awesomeBarSubmit=function(){if(b.advancedSearch.visible=!1,b.queryObj.q){e.resetResultsView();var a=b.queryObj.q,c=g(b.queryObj.q),d=c.replace("@"+b.queryObj.city,"").trim();b.queryObj.q=d,f.go("results",b.queryObj,{reload:!0}),b.queryObj.q=a}},b.validateQueryObj=function(){b.queryObj.locationObj&&-1===b.queryObj.q.indexOf("@")&&(b.queryObj.city=null,b.queryObj.locationObj=null)},b.map=d.googleMap,b.searchPlaces=function(a){return a?d.predictPlace(a).then(function(a){return b.cities=a,a.map(function(a){return a})}):void 0},b.getCityMetaData=function(a){return d.getCityMetaData(a).then(function(c){b.queryObj.city=a.description,b.queryObj.locationObj=c}),'<span class="mention-highlighter-location" contentEditable="false">@'+a.description+"</span>"},b.advancedSearch={visible:!1}}]),htsApp.factory("awesomeBarFactory",["$q","$http","$stateParams",function(a,b,c){var d={};return d.queryObj={q:c.q||"I'm looking for...",city:null,locationObj:null,price:{min:null,max:null}},d.googleMap=new google.maps.Map(document.createElement("map-canvas")),d.predictPlace=function(b){var c={input:b,types:["(cities)"],componentRestrictions:{country:"us"}},d=new google.maps.places.AutocompleteService,e=a.defer();return d.getPlacePredictions(c,function(a,b){e.resolve(a)}),e.promise},d.getCityMetaData=function(b){var c=new google.maps.places.PlacesService(d.googleMap),e={placeId:b.place_id},f=a.defer();return c.getDetails(e,function(a,b){f.resolve(a)}),f.promise},d}]),htsApp.controller("categorySelectorBar",["$scope","$rootScope","$state","Session","ivhTreeviewMgr","feedFactory",function(a,b,c,d,e,f){b.$on("$stateChangeSuccess",function(b,c,d,e,f){"feed"===c.name||"feed.splash"===c.name?a.showCategorySelectorBar=!0:a.showCategorySelectorBar=!1}),a.feedCategoryObj={},a.feedCategoryObj.nestedCategories=d.userObj.user_settings.feed_categories,a.categoryOnChange=function(a,b,c){var e=JSON.parse(angular.toJson(c));d.setSessionValue("feed_categories",e,function(a){200!==a.status&&alert("could not remove category from user feed.  please notify support.")}),f.filterFeed(e);

},a.expandTree=function(){e.expandRecursive(a.feedCategoryObj.nestedCategories)},a.$watch("filterCategories",function(b,c){""===b&&e.collapseRecursive(a.feedCategoryObj.nestedCategories)})}]),htsApp.controller("feed.controller",["$scope","feedFactory","splashFactory","$state","$interval","socketio","geoFactory","Session",function(a,b,c,d,e,f,g,h){a.spinner=b.spinner,a.feed=b.feed,a.status={error:null},a.currentDate=b.currentDate;var i=function(){b.spinner.show=!0;var c=h.userObj.user_settings.feed_categories;g.userLocation?b.feed.unfiltered.length?b.spinner.show=!1:b.latest(g.userLocation,c).then(function(a){b.spinner.show=!1,f.joinLocationRoom("USA-"+g.userLocation.freeGeoIp.region_code,function(){})},function(c){b.spinner.show=!1,a.status.error=c}):g.geolocateUser().then(function(a){g.userLocation=a,i()},function(c){b.spinner.show=!1,a.status.error=c})};i(),a.getScrollPosition=function(a,b){},a.openSplash=function(a){c.result=a.result,d.go("feed.splash",{id:a.result.postingId})}}]),htsApp.filter("secondsToTimeString",function(){return function(a){var b=Math.floor(a/86400),c=Math.floor(a%86400/3600),d=Math.floor(a%86400%3600/60),e="";return b>0&&(e+=b>1?b+" days ":b+" day "),c>0&&(e+=c>1?c+" hours ":c+" hour "),d>=0&&(e+=d>1?d+" minutes ":d+" minute "),e}}),htsApp.factory("feedFactory",["$http","$stateParams","$location","$q","$rootScope","$timeout","Session","utilsFactory","ENV",function(a,b,c,d,e,f,g,h,i){var j={};j.spinner={show:!0},j.feed={unfiltered:[],filtered:[],categories:null,newUnreadItems:0},j.currentDate={timestamp:Math.floor(Date.now()/1e3)},j.defaultParams={start:0,count:50,filters:{mandatory:{exact:{}},optional:{exact:{}}}},j.latest=function(b,c){var e=d.defer();j.defaultParams.filters.mandatory.exact={"location.state":"USA-"+b.freeGeoIp.region_code};var f=h.bracketNotationURL(j.defaultParams);return a({method:"GET",url:i.postingAPI+f}).then(function(a){if(a.data.results.length){for(var d=0;d<a.data.results.length;d++)a.data.results[d]=k(a.data.results[d]);j.feed.unfiltered=a.data.results,j.filterFeed(c),e.resolve()}else{var f={message:"Whoops.. We can't find any results in "+b.freeGeoIp.city,error:a};e.reject(f)}},function(a){var b={message:"We seem to be having issues.  Hang tight we're working to resolve this.",error:a};e.reject(b)}),e.promise};var k=function(a){return 0===a.images.length?a.feedItemHeight=179:1===a.images.length?a.feedItemHeight=261:a.feedItemHeight=420,a};j.updateFeed=function(a){a.posting=k(a.posting);var b=j.feed.unfiltered;if(b.unshift(a.posting),j.feed.unfiltered=b.slice(0,350),j.mustMatchCategoryCode(a.posting)){var c=jQuery(".inner-container.feed").scrollTop();e.$apply(function(){j.currentDate.timestamp=Math.floor(Date.now()/1e3);var b=j.feed.filtered;b.unshift(a.posting),j.feed.filtered=b.slice(0,350)}),jQuery(".inner-container.feed").scrollTop(c+a.posting.feedItemHeight)}j.feed.newUnreadItems++},j.mustMatchCategoryCode=function(a,b){var c=j.feed.categories.indexOf(a.categoryCode)>-1;return c},j.filterFeed=function(a){j.feed.categories=l(a);var b=j.feed.unfiltered.filter(j.mustMatchCategoryCode);j.generateFeed(b)},j.generateFeed=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];0===d.images.length?d.feedItemHeight=179:1===d.images.length?d.feedItemHeight=261:d.feedItemHeight=420,b.push(d)}j.feed.filtered=b,f(function(){e.$broadcast("vsRepeatTrigger")},10)};var l=function(a){for(var b=[],c=0;c<a.length;c++)for(var d=a[c],e=0;e<d.categories.length;e++){var f=d.categories[e];f.selected&&b.push(f.code)}return b};return j}]),htsApp.controller("feedbackController",["$scope","$state","$rootScope","feedbackFactory","$http","ENV","Notification","Session",function(a,b,c,d,e,f,g,h){a.feedback=d.feedback,a.userObj=h.userObj,a.showFeedbackForm=function(){a.userObj.user_settings.loggedIn?a.feedback.form.visible=!0:b.go("signup",{redirect:c.currentState})},a.hideFeedbackForm=function(){a.userObj.user_settings.loggedIn?a.feedback.form.visible=!1:b.go("signup",{redirect:c.currentState})},a.submitFeedback=function(){a.feedback.form.user=a.userObj.user_settings.name,e.post(f.feedbackAPI,a.feedback).success(function(b){b.success?(a.feedback.form.visible=!1,a.feedback.form.generalFeedback=null,g.primary({title:"Feedback Sent!",message:"You'll receive an email shortly.",delay:6e3})):b.error&&g.error({title:"Could not submit your feedback",message:b.error,delay:1e4})}).error(function(a){g.error({title:"Could not submit your feedback",message:"Sorry! Something is big time wrong. Email us at feedback@hashtagsell.com.",delay:1e4})})}}]),htsApp.factory("feedbackFactory",function(){var a={};return a.feedback={form:{user:null,generalFeedback:null,visible:!1}},a}),htsApp.controller("filterBar",["$scope","$rootScope","searchFactory","$timeout","sideNavFactory",function(a,b,c,d,e){b.$on("$stateChangeSuccess",function(b,c,d,e,f){"results"===c.name||"results.splash"===c.name?a.showFilterBar=!0:a.showFilterBar=!1}),a.filterToggles=c.filter,a.$watchGroup(["filterToggles.mustHaveImage","filterToggles.mustHavePrice"],function(b,d,e){c.filterArray(a.views,"filter")}),a.views=c.views,a.$watchGroup(["views.gridView","views.showMap"],function(){"results"===b.currentState&&d(function(){c.filterArray(a.views,"resize"),a.views.gridView?e.sideNav.listView=!1:!a.views.gridView&&a.views.showMap?e.sideNav.listView=!1:a.views.gridView||a.views.showMap||(e.sideNav.listView=!0)},1)}),a.rangeSlider=c.priceSlider,a.slideDelegate=function(b){c.priceSlider.userSetValue=!0,c.filterArray(a.views,"filter")},a.myFormatter=function(a){return"$"+a}}]),htsApp.controller("betaAgreementController",["$scope","ENV",function(a,b){}]),htsApp.controller("postingRulesController",["$scope","ENV",function(a,b){}]),htsApp.controller("privacyPolicyController",["$scope","ENV",function(a,b){a.legalUrl={privacyPolicy:b.htsAppUrl+"/privacy-policy",postingRules:b.htsAppUrl+"/posting-rules",betaAgreement:b.htsAppUrl+"/beta-agreement",termsOfServiceUrl:b.htsAppUrl+"/terms-of-service"}}]),htsApp.controller("termsOfServiceController",["$scope","ENV",function(a,b){a.legalUrl={privacyPolicy:b.htsAppUrl+"/privacy-policy",postingRules:b.htsAppUrl+"/posting-rules",betaAgreement:b.htsAppUrl+"/beta-agreement",termsOfServiceUrl:b.htsAppUrl+"/terms-of-service"}}]),htsApp.controller("mainController",["$scope","$rootScope","sideNavFactory","$timeout","Session","socketio","myPostsFactory","favesFactory","metaFactory","$window",function(a,b,c,d,e,f,g,h,i,j){if(a.userObj=e.userObj,a.sideNav=c.sideNav,a.toggleOffCanvasSideNav=function(){a.sideNav.hidden=!a.sideNav.hidden},b.$on("$stateChangeStart",function(e,f,g,h,k){b.previousState=h.name||"feed",b.currentState=f.name,b.toParams=g,b.fromParams=k,b.event=e,d(function(){i.metatags.facebook.url=j.location.href},50),c.updateSideNav(f),c.settingsMenu[0].link=b.previousState,"feed.splash"!==b.currentState&&"results.splash"!==b.currentState&&"signup"!==b.currentState&&"signin"!==b.currentState&&"forgot"!==b.currentState&&"checkemail"!==b.currentState&&("feed"===b.currentState?a.sideNav.listView=!0:a.sideNav.listView=!1),a.sideNav.hidden=!0}),a.userObj.user_settings.loggedIn){try{ga("set","&uid","bdavis")}catch(k){}e.getUserFromServer().then(function(a){e.create(a)})}a.$watch("userObj.user_settings.loggedIn",function(a,b){if(a){f.init(e.userObj.user_settings.name),g.getAllUserPosts(e.userObj.user_settings.name).then(function(a){for(var b=0;b<g.userPosts.data.length;b++){var c=g.userPosts.data[b];f.joinPostingRoom(c.postingId,"postingOwner")}}),_.each(h.currentFavorites,function(a){f.joinPostingRoom(a.postingId,"inWatchList")});try{ga("set","&uid","bdavis")}catch(c){}}else if(f.cachedUsername){if(f.closeAllConnections(),g.userPosts.data.length)for(var d=0;d<g.userPosts.data.length;d++){var i=g.userPosts.data[d];f.leavePostingRoom(i.postingId,"postingOwner")}_.each(h.currentFavorites,function(a){f.leavePostingRoom(a.postingId,"inWatchList")})}},!0)}]),htsApp.controller("metaController",["$scope","metaFactory",function(a,b){a.metatags=b.metatags}]),htsApp.factory("metaFactory",function(){var a={};return a.metatags={page:{title:"HashtagSell | Reinventing Online Classifieds",description:"HashtagSell is drastically improving how people sell items online. Share your item to eBay, Amazon, Craigslist and more with one click!",faviconUrl:"https://static.hashtagsell.com/htsApp/favicon/favicon.ico"},facebook:{title:"HashtagSell | Reinventing Online Classifieds",image:"https://static.hashtagsell.com/logos/hts/hi_res/Logo+(Complete).png",site_name:"HashtagSell.com",description:"HashtagSell is drastically improving how people sell items online. Share your item to eBay, Amazon, Craigslist and more with one click!",url:null},twitter:{card:"summary_large_image",site:"@hashtagsell",description:"HashtagSell is drastically improving how people sell items online. Share your item to eBay, Amazon, Craigslist and more with one click!",title:"HashtagSell.com | Reinventing Online Classifieds",creator:"@hashtagsell",image:"https://static.hashtagsell.com/logos/hts/hi_res/Logo+(Complete).png"}},a}),htsApp.service("modalConfirmationService",["$modal",function(a){var b={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"js/modalConfirmation/partials/modalConfirmation.html"},c={closeButtonText:"Close",actionButtonText:"OK",headerText:"Proceed?",bodyText:"Perform this action?"};this.showModal=function(a,b){return a||(a={}),a.backdrop="static",this.show(a,b)},this.show=function(d,e){var f={},g={};return angular.extend(f,b,d),angular.extend(g,c,e),f.controller||(f.controller=["$scope","$modalInstance",function(a,b){a.modalOptions=g,a.modalOptions.ok=function(a){b.close(a)},a.modalOptions.close=function(a){b.dismiss("cancel")}}]),a.open(f).result}}]),htsApp.controller("myPosts.controller",["$scope","$rootScope","$filter","$modal","$window","myPostsFactory","Session","socketio","ngTableParams","newPostFactory","Notification","splashFactory","$state","modalConfirmationService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){a.userPosts=f.userPosts,a.userObj=g.userObj,f.tableParams=new i({page:1,count:2e3,filter:{},sorting:{}},{counts:[],total:a.userPosts.data.length,getData:function(b,d){var e=c("filter")(a.userPosts.data,f.filterString),g=d.sorting()?c("orderBy")(e,d.orderBy()):e;d.total(g.length),b.resolve(g.slice((d.page()-1)*d.count(),d.page()*d.count()))}}),a.tableParams=f.tableParams,a.tableParams.settings().$scope=a,a.filters={$:""},a.$watch("filters.$",function(b){f.filterString=b,a.tableParams.reload()}),a.$on("$stateChangeSuccess",function(b,c,d,e,f){a.currentState=c.name,a.expandedPostingId=d.postingId}),a.newPost=function(){var b=d.open({templateUrl:"js/newPost/modals/newPost/partials/newPost.html",controller:"newPostModal",size:"lg",keyboard:!1,backdrop:"static",resolve:{mentionsFactory:function(){return j}}});b.result.then(function(a){},function(b){"stageOneSuccess"===b.reason&&a.pushtoExternalService(b.post)})},a.expandCollapseQuestions=function(a,c){a.stopPropagation(),"myposts.questions"!==b.currentState?(c.currentlyViewing={questions:!0,meetings:!1},m.go("myposts.questions",{postingId:c.postingId})):(c.currentlyViewing={questions:!1,meetings:!1},m.go("^"))},a.expandCollapseMeetingRequests=function(a,c){a.stopPropagation(),"myposts.meetings"!==b.currentState?(c.currentlyViewing={questions:!1,meetings:!0},m.go("myposts.meetings",{postingId:c.postingId})):(c.currentlyViewing={questions:!1,meetings:!1},m.go("^"))},a.countUnreadQuestions=function(a){for(var b=0,c=0;c<a.questions.results.length;c++){var d=a.questions.results[c];d.answers.length||b++}return b},a.countUnreadOffers=function(a){for(var b=0,c=0;c<a.offers.results.length;c++){var d=a.offers.results[c];d.proposals[d.proposals.length-1].isOwnerReply||d.proposals[d.proposals.length-1].acceptedAt||b++}return b},a.deletePost=function(a){var b={closeButtonText:"Cancel",actionButtonText:"Delete Post",headerText:"Delete Your Post?",bodyText:"Are you sure you want to delete this post?"};n.showModal({},b).then(function(b){f.deletePost(a).then(function(b){204===b.status?(h.leavePostingRoom(a.postingId,"postingOwner"),f.getAllUserPosts(g.userObj.user_settings.name).then(function(a){200===a.status||(k.error({title:"Whoops",message:"Please notify support.  We coulnd't refresh your myPosts list after deleting an item.",delay:1e4}),alert("could not refresh myPost list after deleting item.  contact support."))})):k.error({title:"Whoops",message:"Please notify support.  We coulnd't delete your item for some reason.",delay:1e4})})})},a.editPost=function(a){k.error({title:"Coming soon",message:"Please delete and recreate the ad for now.  We're rolling out edit functionality soon! :)",delay:1e4})},a.openSplash=function(a){l.result=a,m.go("myposts.splash",{id:a.postingId})},a.showFacebookPost=function(a){e.open("http://facebook.com")},a.removeFacebookPost=function(a){},a.showTwitterPost=function(a){e.open("http://twitter.com")},a.removeTwitterPost=function(a){},a.showEbayPost=function(a){e.open(a.ebay.url)},a.removeEbayPost=function(a){}}]),htsApp.factory("myPostsFactory",["$http","ENV","$q","utilsFactory","sideNavFactory","profileFactory",function(a,b,c,d,e,f){var g={};return g.userPosts={data:[],updateMyPostsBadgeCount:function(){var a=0;if(this.data.length)for(var b=0;b<this.data.length;b++){var c=this.data[b];if(c.questions.results.length)for(var d=0;d<c.questions.results.length;d++){var f=c.questions.results[d];f.answers.length||a++}if(c.offers.results.length)for(var g=0;g<c.offers.results.length;g++){var h=c.offers.results[g];h.proposals[h.proposals.length-1].isOwnerReply||h.proposals[h.proposals.length-1].acceptedAt||a++}}return e.items[1].alerts=a,a}},g.getAllUserPosts=function(f){var h=c.defer(),i={filters:{mandatory:{exact:{username:f}}}};return a({method:"GET",url:b.postingAPI+d.bracketNotationURL(i)}).then(function(a){var b=a.data.results;if(b.length){g.userPosts.data.length&&(g.userPosts.data=[]);for(var c=0;c<b.length;c++){var d=b[c];g.getPostingIdQuestionsAndOffers(d.postingId).then(function(a){var c=a.data;g.userPosts.data.push(c),g.userPosts.updateMyPostsBadgeCount(),g.userPosts.data.length===b.length&&(g.tableParams&&g.tableParams.reload(),h.resolve(a))})}}else g.userPosts.data=[],e.items[1].alerts=0},function(a){h.reject(a)}),h.promise},g.getPostingIdQuestionsAndOffers=function(e){var g=c.defer(),h={postingId:e,questions:!0,offers:!0,count:100};return a({method:"GET",url:b.postingAPI+e+d.bracketNotationURL(h)}).then(function(a,b,c,d){if(200===a.status){if(a.data.questions.results.length)for(var e=0,h=0;h<a.data.questions.results.length;h++)f.getUserProfile(a.data.questions.results[h].username).then(function(b){e++,200===b.status&&(a.data.questions.results[e-1].userProfile=b.data.user),e===a.data.questions.results.length&&(a.data.offers.results.length||g.resolve(a))});if(a.data.offers.results.length)for(var i=0,j=0;j<a.data.offers.results.length;j++)f.getUserProfile(a.data.offers.results[j].username).then(function(b){i++,200===b.status&&(a.data.offers.results[i-1].userProfile=b.data.user),i===a.data.offers.results.length&&g.resolve(a)});else g.resolve(a)}else g.reject(a)},function(a,b,c,d){g.reject(a)}),g.promise},g.deletePost=function(d){var e=c.defer();return a({method:"DELETE",url:b.postingAPI+d.postingId}).then(function(a,b,c,d){e.resolve(a)},function(a,b,c,d){e.reject(a)}),e.promise},g}]),htsApp.controller("myPosts.meetings.controller",["$scope","meetingsFactory","myPostsFactory","socketio","$state","Session","Notification","transactionFactory",function(a,b,c,d,e,f,g,h){function i(a){return!a||/^\s*$/.test(a)}a.userObj=f.userObj,a.cachedOffers=angular.copy(a.post.offers.results),a.acceptedTime={model:void 0},a.errors={message:null},a.counterOffer=function(b,c){var d=b;h.proposeDeal(a.post,d)},a.acceptDeal=function(d,e){if(a.acceptedTime.model){var h={acceptedAt:moment().format(),price:e.price,when:a.acceptedTime.model,where:e.where,isOwnerReply:!0},i=a.post.offers.results[d];b.acceptOffer(a.post,i,h).then(function(a){201===a.status?(c.getAllUserPosts(f.userObj.user_settings.name),g.primary({title:"Sent Offer Acceptance!",message:"We've notified @"+i.username+".  Expect an email shortly.",delay:7e3})):g.error({title:a.name,message:a.message,delay:2e4})},function(a){g.error({title:a.data.name,message:a.data.message,delay:2e4})})}else a.errors.message="Please select a proposed time from above."},a.deleteOffer=function(a,e){b.deleteOffer(a,e).then(function(b){if(204===b.status){var e=a.username;i(a.message)?d.sendMessage(e,a.response):d.sendMessage(e,a.message),c.getAllUserPosts(f.userObj.user_settings.name)}else g.error({title:b.name,message:b.message,delay:2e4})},function(a){g.error({title:"Contact Support",message:"Failed to decline the offer.  Error:"+a,delay:2e4})})}}]),htsApp.directive("constructMyPostsOverlayMessage",function(){return{scope:{offer:"=",post:"="},restrict:"EA",link:function(a,b,c){a.offer.proposals[a.offer.proposals.length-1].acceptedAt?c.$set("message","Awesome!  We'll send you a reminder email with details."):c.$set("message","Offer sent to @"+a.offer.username)}}}),htsApp.directive("ownerMeetingsMoreInfo",function(){return{restrict:"E",scope:{post:"="},templateUrl:"js/myPosts/meetings/partials/myPosts.meetings.html",controller:"myPosts.meetings.controller"}}),htsApp.factory("meetingsFactory",["$http","$rootScope","$q","ENV","Session","utilsFactory",function(a,b,c,d,e,f){var g={};return g.newOfferNotification=function(a){},g.sendOffer=function(b,e){var f=c.defer();return a({method:"POST",url:d.postingAPI+b.postingId+"/offers",data:e}).then(function(c,e,g,h){var i={post:b,offer:c.data};a.post(d.htsAppUrl+"/email/meeting-proposed/instant-reminder",{proposedMeeting:i}).success(function(a){}).error(function(a){}),f.resolve(c)},function(a,b,c,d){f.reject(a)}),f.promise},g.acceptOffer=function(b,e,f){var g=c.defer(),h={post:b,offer:e,acceptedProposal:f};return a({method:"POST",url:d.postingAPI+b.postingId+"/offers/"+e.offerId+"/accept",data:f}).then(function(b,c,e,f){a.post(d.htsAppUrl+"/email/meeting-accepted/instant-reminder",{acceptedMeeting:h}).success(function(a){}).error(function(a){}),g.resolve(b)},function(a,b,c,d){g.reject(a)}),g.promise},g.deleteOffer=function(b,e){var f=c.defer();return a({method:"DELETE",url:d.postingAPI+e.postingId+"/offers/"+b.offerId}).then(function(a,b,c,d){f.resolve(a)},function(a,b,c,d){f.reject(a)}),f.promise},g.getOffers=function(b){var e=c.defer(),g={postingId:b.postingId,questions:!1,offers:!0,count:100};return a({method:"GET",url:d.postingAPI+b.postingId+f.bracketNotationURL(g)}).then(function(a,b,c,d){e.resolve(a)},function(a,b,c,d){e.reject(a)}),e.promise},g.updateOffer=function(b,e){var f=c.defer();return a({method:"PUT",url:d.postingAPI+b.postingId+"/offers/"+e.offerId,data:e}).then(function(c,e,g,h){var i,j;c.data.proposals[c.data.proposals.length-1].isOwnerReply?(i=c.data.username,j=!1):(i=b.username,j=!0);var k={post:b,offer:c.data,user:{notifySeller:j,email:i}};a.post(d.htsAppUrl+"/email/meeting-updated/instant-reminder",{updatedMeeting:k}).success(function(a){}).error(function(a){}),f.resolve(c)},function(a,b,c,d){f.reject(a)}),f.promise},g}]),htsApp.controller("myPosts.questions.controller",["$scope","qaFactory","$state","Notification","myPostsFactory","Session",function(a,b,c,d,e,f){a.userObj=f.userObj,a.toggled=function(a){},a.submitAnswer=function(c,f){var g={username:c.username,value:c.givenAnswer};b.submitAnswer(c.postingId,c.questionId,g).then(function(b){201===b.status?e.getAllUserPosts(a.userObj.user_settings.name).then(function(a){}):d.error({title:b.name,message:b.message})},function(a){})},a.deleteQuestion=function(e,f,g){b.deleteQuestion(e,f).then(function(b){204===b.status?a.post.questions.results.length||c.go("^"):d.error({title:b.name,message:b.message})},function(a){})},a.updateAnswer=function(b){a.deleteAnswer(b),a.submitAnswer()},a.deleteAnswer=function(c){var d=a.question.postingId,e=a.question.questionId;b.deleteAnswer(d,e,c).then(function(a){},function(a){})}}]),htsApp.directive("ownerQuestionsMoreInfo",function(){return{restrict:"E",scope:{post:"="},templateUrl:"js/myPosts/questions/partials/myPosts.questions.html",controller:"myPosts.questions.controller"}}),htsApp.factory("qaFactory",["$http","$rootScope","ENV","$q","utilsFactory",function(a,b,c,d,e){var f={};return f.questions={store:[]},f.getPostingIdQuestions=function(b){var g=d.defer(),h={postingId:b,questions:!0,count:100};return a({method:"GET",url:c.postingAPI+b+e.bracketNotationURL(h)}).then(function(a,b,c,d){200===a.status?(f.questions.store=a.data.questions.results,g.resolve(a)):g.reject(a)},function(a,b,c,d){g.reject(a)}),g.promise},f.submitQuestion=function(b,e,g){var h=d.defer(),i=e.postingId,j={username:g,value:b};return a({method:"POST",url:c.postingAPI+i+"/questions",data:j}).then(function(b,d,g,i){if(201===b.status){f.questions.store.unshift(b.data);var j={question:b.data,post:e};a.post(c.htsAppUrl+"/email/question-asked/instant-reminder",{questionAsked:j}).success(function(a){}).error(function(a){}),h.resolve(b)}else h.reject(b)},function(a,b,c,d){h.reject(a)}),h.promise},f.submitAnswer=function(b,e,f){var g=d.defer();return a({method:"POST",url:c.postingAPI+b+"/questions/"+e+"/answers",data:f}).then(function(a,b,c,d){g.resolve(a)},function(a,b,c,d){g.reject(a)}),g.promise},f.deleteQuestion=function(b,e){var f=d.defer();return a({method:"DELETE",url:c.postingAPI+b+"/questions/"+e}).then(function(a,b,c,d){f.resolve(a)},function(a,b,c,d){f.reject(a)}),f.promise},f.deleteAnswer=function(b,e,g){var h=d.defer();return a({method:"DELETE",url:c.postingAPI+b+"/questions/"+e+"/answers/ "+g}).then(function(a,c,d,e){f.getPostingIdQuestions(b).then(function(a){h.resolve(a)},function(a){h.reject(a)})},function(a,b,c,d){h.reject(a)}),h.promise},f}]),htsApp.controller("newPostController",["$scope","$modal","$state","newPostFactory","Session","authModalFactory","myPostsFactory",function(a,b,c,d,e,f,g){a.userObj=e.userObj,a.newPost=function(){var c=b.open({templateUrl:"js/newPost/modals/newPost/partials/newPost.html",controller:"newPostModal",size:"lg",keyboard:!1,backdrop:"static",resolve:{mentionsFactory:function(){return d}}});c.result.then(function(a){},function(b){"stageOneSuccess"===b.reason&&a.pushtoExternalService(b.post)})},a.pushtoExternalService=function(a){var d=b.open({templateUrl:"js/newPost/modals/pushToExternalSources/partials/newPost.pushToExternalSources.html",controller:"pushNewPostToExternalSources",keyboard:!1,backdrop:"static",resolve:{newPost:function(){return a}}});d.result.then(function(a){},function(a){"stageTwoSuccess"===a.reason&&g.getAllUserPosts(e.userObj.user_settings.name).then(function(a){c.go("myposts")})})}}]),htsApp.controller("newPostCongrats",["$scope","$modal","$modalInstance","newPost","myPostsFactory","Session","socketio",function(a,b,c,d,e,f,g){a.newPost=d,e.getAllUserPosts(f.userObj.user_settings.name).then(function(){for(var a=0;a<e.userPosts.data.length;a++){var b=e.userPosts.data[a];g.joinPostingRoom(b.postingId,"postingOwner")}}),a.dismiss=function(a){c.dismiss(a)}}]),htsApp.controller("newPostModal",["$scope","$http","$q","$modalInstance","$timeout","$state","$modal","$filter","mentionsFactory","$templateCache","ENV","Session","Notification","modalConfirmationService","socketio",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){a.showDemo=!1,a.hideDemo=function(){a.showDemo=!a.showDemo,a.showDemo?(a.img="//static.hashtagsell.com/tutorialRelated/sell_box_animation_short.gif",e(function(){a.showDemo=!1},22720)):a.img="//static.hashtagsell.com/tutorialRelated/sell_box_static.png"},a.clearPlaceholder=function(){a.placeholderCleared||(document.getElementById("htsPost").innerHTML="",a.resetAll(),a.placeholderCleared=!0)},a.toggleExampleVisibility=!0,a.clearExampleReminder=function(){a.toggleExampleVisibility=!1},a.manualCategorySelect=i.manualCategorySelect,a.resetAll=function(){a.jsonObj=i.setJsonTemplate(),i.alerts={banners:[]}},a.resetAll(),a.allCategories=[{code:"AAAA",name:"animals",categories:[{code:"APET",name:"pets"},{code:"ASUP",name:"supplies"},{code:"AOTH",name:"other"}]},{code:"CCCC",name:"community",categories:[{code:"CCNW",name:"classes and workshops"},{code:"COMM",name:"events"},{code:"CGRP",name:"groups"},{code:"CLNF",name:"lost and found"},{code:"CRID",name:"rideshares"},{code:"CVOL",name:"volunteers"},{code:"COTH",name:"other"}]},{code:"SSSS",name:"for sale",categories:[{code:"SANT",name:"antiques"},{code:"SAPP",name:"apparel"},{code:"SAPL",name:"appliances"},{code:"SANC",name:"art and crafts"},{code:"SKID",name:"babies and kids"},{code:"SBAR",name:"barters"},{code:"SBIK",name:"bicycles"},{code:"SBIZ",name:"businesses"},{code:"SCOL",name:"collections"},{code:"SEDU",name:"educational"},{code:"SELE",name:"electronics and photo"},{code:"SFNB",name:"food and beverage"},{code:"SFUR",name:"furniture"},{code:"SGAR",name:"garage sales"},{code:"SGFT",name:"gift cards"},{code:"SHNB",name:"health and beauty"},{code:"SHNG",name:"home and garden"},{code:"SIND",name:"industrial"},{code:"SJWL",name:"jewelry"},{code:"SLIT",name:"literature"},{code:"SMNM",name:"movies and music"},{code:"SMUS",name:"musical instruments"},{code:"SRES",name:"restaurants"},{code:"SSNF",name:"sports and fitness"},{code:"STIX",name:"tickets"},{code:"STOO",name:"tools"},{code:"STOY",name:"toys and hobbies"},{code:"STVL",name:"travel"},{code:"SWNT",name:"wanted"},{code:"SOTH",name:"other"}]},{code:"RRRR",name:"real estate",categories:[{code:"RCRE",name:"commercial real estate"},{code:"RHFR",name:"housing for rent"},{code:"RHFS",name:"housing for sale"},{code:"RSUB",name:"housing sublets"},{code:"RSWP",name:"housing swaps"},{code:"RLOT",name:"lots and land"},{code:"RPNS",name:"parking and storage"},{code:"RSHR",name:"room shares"},{code:"RVAC",name:"vacation properties"},{code:"RWNT",name:"want housing"},{code:"ROTH",name:"other"}]},{code:"SVCS",name:"services",categories:[{code:"SVCC",name:"creative"},{code:"SVCE",name:"education"},{code:"SVCF",name:"financial"},{code:"SVCM",name:"health"},{code:"SVCH",name:"household"},{code:"SVCP",name:"professional"},{code:"SVCO",name:"other"}]},{code:"ZZZZ",name:"uncategorized",categories:[{code:"ZOTH",name:"other"}]},{code:"VVVV",name:"vehicles",categories:[{code:"VAUT",name:"autos"},{code:"VMOT",name:"motorcycles"},{code:"VMPT",name:"motorcycle parts"},{code:"VPAR",name:"parts"},{code:"VOTH",name:"other"}]},{code:"JJJJ",name:"jobs",categories:[{code:"JACC",name:"accounting"},{code:"JADM",name:"administrative"},{code:"JAER",name:"aerospace and defense"},{code:"JANL",name:"analyst"},{code:"JANA",name:"animals and agriculture"},{code:"JARC",name:"architecture"},{code:"JART",name:"art"},{code:"JAUT",name:"automobile"},{code:"JBEA",name:"beauty"},{code:"JBIZ",name:"business development"},{code:"JWEB",name:"computer and web"},{code:"JCST",name:"construction and facilities"},{code:"JCON",name:"consulting"},{code:"JCUS",name:"customer service"},{code:"JDES",name:"design"},{code:"JEDU",name:"education"},{code:"JENE",name:"energy"},{code:"JENG",name:"engineering"},{code:"JENT",name:"entertainment and media"},{code:"JEVE",name:"events"},{code:"JFIN",name:"finance"},{code:"JFNB",name:"food and beverage"},{code:"JGIG",name:"gigs"},{code:"JGOV",name:"government"},{code:"JHEA",name:"healthcare"},{code:"JHOS",name:"hospitality and travel"},{code:"JHUM",name:"human resources"},{code:"JMNT",name:"installation, maintenance and repair"},{code:"JINS",name:"insurance"},{code:"JINT",name:"international"},{code:"JLAW",name:"law enforcement"},{code:"JLEG",name:"legal"},{code:"JMAN",name:"management and directorship"},{code:"JMFT",name:"manufacturing and mechanical"},{code:"JMAR",name:"marketing, advertising and public relations"},{code:"JNON",name:"non-profit"},{code:"JOPS",name:"operations and logistics"},{code:"JPHA",name:"pharmaceutical"},{code:"JPRO",name:"product, project and program management"},{code:"JPUR",name:"purchasing"},{code:"JQUA",name:"quality assurance"},{code:"JREA",name:"real estate"},{code:"JREC",name:"recreation"},{code:"JRES",name:"resumes"},{code:"JRNW",name:"retail and wholesale"},{code:"JSAL",name:"sales"},{code:"JSCI",name:"science"},{code:"JSEC",name:"security"},{code:"JSKL",name:"skilled trade and general labor"},{code:"JTEL",name:"telecommunications"},{code:"JTRA",name:"transportation"},{code:"JVOL",name:"volunteer"},{code:"JWNP",name:"writing and publishing"},{code:"JOTH",name:"other"}]}],a.handlePaste=function(b){b.preventDefault(),a.jsonObj.body=b.originalEvent.clipboardData.getData("text/plain")},a.macros={obo:"*Or Best Offer*"},a.isEmpty=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},a.dismiss=function(b){var c={closeButtonText:"No",actionButtonText:"Yes",headerText:"Cancel New Post?",bodyText:"Your new post has not been saved.  Are you sure you want to cancel your new post?"};n.showModal({},c).then(function(){a.resetAll(),d.dismiss(b)})},d.opened.then(function(){a.dropzoneConfig={options:{paramName:"file",maxFilesize:15,maxFiles:10,thumbnailWidth:48,thumbnailHeight:48,previewTemplate:j.get("dropzone-thumbnail.html"),acceptedFiles:".jpeg,.jpg,.png,.gif",url:"/upload",autoProcessQueue:!1,uploadMultiple:!0,parallelUploads:10,clickable:"#imageUpload",previewsContainer:"#imgPreviewsContainer",dictDefaultMessage:""},eventHandlers:{sendingmultiple:function(a,b,c){},successmultiple:function(b,c){var d=a.jsonObj;d.images=c.images,a.publishPost()},addedfile:function(){a.numImages?(a.numImages=a.numImages+1,a.$apply(a.numImages)):(a.numImages=1,a.$apply(a.numImages))},removedfile:function(){a.numImages=a.numImages-1,a.$apply(a.numImages)},uploadprogress:function(a){},totaluploadprogress:function(b){b&&(a.uploadProgress=b,a.$apply(a.uploadProgress),100>b?(a.uploadMessage=Math.round(b)+"%",a.$apply(a.uploadProgress)):100===b&&(a.uploadMessage="Preparing photos.. please wait.",a.$apply(a.uploadProgress)))}},init:{}}}),a.closeAlert=function(b){a.alerts.banners.splice(b,1)},a.alerts=i.alerts,a.validatePost=function(){a.alerts.banners=[];var b=a.jsonObj;b.hashtags.length?b.category?a.isEmpty(b.location)?a.alerts.banners.push({type:"danger",msg:"Use the @ symbol in your post to specify where the buyer should pickup the item."}):a.processPost():(a.alerts.banners.push({type:"danger",msg:"Add more #'s to describe your item for sale, or manually specify a category."}),a.jsonObj.category_name="other",a.jsonObj.category="ZOTH"):a.alerts.banners.push({type:"danger",msg:"Use the # symbol in your post to describe the item you're selling.  Hint: You can add more than one hashtag if you want."})},a.processPost=function(){l.userObj.user_settings.loggedIn?a.numImages?a.dropzoneConfig.init():a.publishPost():f.go("signup")},a.cleanModel=function(a,b){i.cleanModel(a,b)},a.publishPost=function(){var c=a.jsonObj;c.username=l.userObj.user_settings.name,c.heading="";for(var e=0;e<c.hashtags.length;e++)e!==c.hashtags.length-1?c.heading+=c.hashtags[e]+" ":c.heading+=c.hashtags[e],c.hashtags[e]=c.hashtags[e];b.post(k.postingAPI,c).success(function(c){d.dismiss({reason:"stageOneSuccess",post:c}),b.post(k.precacheAPI,{posting:c}).success(function(a){}).error(function(a){}),o.joinPostingRoom(c.postingId,"postingOwner"),a.resetAll()}).error(function(a,b,c,d){m.error({title:a.name,message:a.message,delay:1e4})})},a.searchProducts=function(b){b?i.predictProduct(b).then(function(b){a.products=b}):a.products=[{value:"Describe your item for sale",demoText:!0}]},a.getProductTextRaw=function(a){return a.demoText?void 0:i.getProductMetaData(a)?'<span class="mention-highlighter" contentEditable="false">#'+a.value+"</span>":'<span class="mention-highlighter" contentEditable="false">#'+a.value+"</span>"},a.map=i.googleMap,a.searchPlaces=function(b){b?a.isEmpty(a.jsonObj.location)&&i.predictPlace(b).then(function(b){a.places=b}):a.places=[{description:"Specify a landmark OR address to pick up item",demoText:!0}]},a.getPlacesTextRaw=function(b){if(!b.demoText){if(i.getPlaceMetaData(b))return'<span class="mention-highlighter-location" contentEditable="false">@'+b.description+"</span>";a.alerts.banners.push({
type:"danger",msg:"Please only use one @ symbol in your post"})}},a.searchPrice=function(b){b?a.isEmpty(a.jsonObj.price)&&(a.prices=i.predictPrice(b)):a.prices=[{suggestion:"Type your asking price",demoText:!0}]},a.getPricesTextRaw=function(a){return!a.demoText&&i.getPriceMetaData(a)?'<span class="mention-highlighter-price" contentEditable="false">'+a.suggestion+"</span>":void 0}}]),htsApp.factory("newPostFactory",["$q","$http","$timeout","$filter","ENV","utilsFactory","Notification",function(a,b,c,d,e,f,g){var h={},i=document.createElement("DIV");return h.alerts={banners:[]},h.defaultJson={annotations:[],category:null,category_name:null,category_group:null,category_group_name:null,body:null,images:[],location:{},hashtags:[],price:null,price_avg:null,price_type:null,source:"HSHTG"},h.setJsonTemplate=function(){return h.jsonTemplate=angular.copy(h.defaultJson),h.jsonTemplate},h.annotationsDictionary=new Hashtable,h.annotationsDictionary.put("year","Year"),h.annotationsDictionary.put("condition","Condition"),h.annotationsDictionary.put("make","Make"),h.annotationsDictionary.put("title_status","Title"),h.annotationsDictionary.put("model","Model"),h.annotationsDictionary.put("mileage","Mileage"),h.annotationsDictionary.put("transmission","Transmission"),h.annotationsDictionary.put("drive","Drive"),h.annotationsDictionary.put("paint_color","Paint"),h.annotationsDictionary.put("type","Type"),h.annotationsDictionary.put("fuel","Fuel"),h.annotationsDictionary.put("size","Size"),h.annotationsDictionary.put("bathrooms","Bath"),h.annotationsDictionary.put("no_smoking","Smoking"),h.annotationsDictionary.put("bedrooms","Rooms"),h.annotationsDictionary.put("dogs","Dogs"),h.annotationsDictionary.put("cats","Cats"),h.annotationsDictionary.put("attached_garage","Garage"),h.annotationsDictionary.put("laundry_on_site","Laundry"),h.annotationsDictionary.put("sqft","Sq Ft"),h.annotationsDictionary.put("size_dimensions","Dimensions"),h.annotationsDictionary.put("body_type","Body Type"),h.annotationsDictionary.put("drive_type","Drive Type"),h.annotationsDictionary.put("engine","Engine"),h.annotationsDictionary.put("exterior_color","Exterior Color"),h.annotationsDictionary.put("for_sale_by","Seller Type"),h.annotationsDictionary.put("interior_color","Interior Color"),h.annotationsDictionary.put("fuel_type","Fuel Type"),h.annotationsDictionary.put("listing_type","Listing Type"),h.annotationsDictionary.put("number_of_cylinders","Cylinders"),h.annotationsDictionary.put("options","Options"),h.annotationsDictionary.put("power_options","Power Options"),h.annotationsDictionary.put("safety_features","Safety"),h.annotationsDictionary.put("ship_to_location","Ship To"),h.annotationsDictionary.put("trim","Trim"),h.annotationsDictionary.put("vehicle_title","Title"),h.annotationsDictionary.put("vin","Vin"),h.annotationsDictionary.put("warranty","Warranty"),h.annotationsDictionary.put("bodyStyle","Body Type"),h.annotationsDictionary.put("drivetrain","Drive Train"),h.annotationsDictionary.put("exteriorColor","Exterior Color"),h.annotationsDictionary.put("interiorColor","Interior Color"),h.annotationsDictionary.put("Color","Color"),h.annotationsDictionary.put("Brand","Brand"),h.annotationsDictionary.put("Material Type","Material Type"),h.annotationsDictionary.put("Model","Model"),h.annotationsDictionary.put("Warranty","Warranty"),h.annotationsDictionary.put("CPU Speed","Processor Speed"),h.annotationsDictionary.put("CPU Type","Processor Type"),h.annotationsDictionary.put("Display Size","Screen Size"),h.annotationsDictionary.put("Operating System","OS Version"),h.annotationsDictionary.put("System Memory Size","Memory"),h.annotationsDictionary.put("Department","Department"),h.manualCategorySelect={code:null,show:!1,tooltip:"message",init:function(){this.code=h.jsonTemplate.category,h.getProductMetaData()}},h.predictProduct=function(c){var d=[],e={value:c},f=a.defer();return b.jsonp("//suggestqueries.google.com/complete/search?callback=?",{params:{client:"products-cc",hl:"en",jsonp:"JSON_CALLBACK",gs_rn:53,gs_ri:"products-cc",ds:"sh",cp:1,gs_id:9,q:c,xhr:"t"}}).success(function(a,b){a[1].length>0?(angular.forEach(a[1],function(a,b){i.innerHTML=a[0];var c=i.textContent||i.innerText||"";d.push({value:c})}),d[0].value!==e.value&&d.splice(0,0,e),d.length>7&&(d.length=7)):d.push(e),f.resolve(d)}),f.promise},h.getProductMetaData=function(b){var d=a.defer();if(b){if(-1!==_.indexOf(this.jsonTemplate.hashtags,b.value))return!1;this.jsonTemplate.hashtags.push(b.value)}if(this.jsonTemplate.hashtags.length){var e=this.jsonTemplate.hashtags.join(" ");h.getPopularCategory(e).then(function(a){h.jsonTemplate.category=a,h.getCategoryMetadata(a).then(function(a){h.manualCategorySelect.code=null,h.manualCategorySelect.show=!1,h.jsonTemplate.category_name=a.categories[0].name,h.jsonTemplate.category_group=a.code,h.jsonTemplate.category_group_name=a.name,h.getInternalAnnotations(e).then(function(a){h.getAmazonAnnotations(e,a).then(function(a){a.length&&(h.jsonTemplate.annotations=a),d.resolve(h.jsonTemplate)},function(a){h.alerts.banners.push({type:"danger",msg:"Couldn't fetch Amazon data.  We're working on this.  Please continue with your post."}),d.reject(a)})},function(a){h.alerts.banners.push({type:"danger",msg:"Couldn't lookup internal production annotations.  We're working on this.  Please continue with your post."})})},function(a){h.alerts.banners.push({type:"danger",msg:"We appear to be having issues with out categories API.  Please try again later."})})},function(){h.manualCategorySelect.tooltip="Add more hashtags to your post, or manually select the category",h.manualCategorySelect.show=!0,h.jsonTemplate.category="ZOTH",c(function(){$(".category-select").triggerHandler("show"),c(function(){$(".category-select").triggerHandler("hide")},4e3)},50),d.reject()})}else h.manualCategorySelect.show=!1,this.jsonTemplate.annotations=[],this.jsonTemplate.category=null,this.jsonTemplate.category_name=null,this.jsonTemplate.category_group=null,this.jsonTemplate.category_group_name=null,d.resolve(h.jsonTemplate);return d.promise},h.getPopularCategory=function(c){var d=a.defer();return h.manualCategorySelect.code?d.resolve(h.manualCategorySelect.code):b.get(e.groupingsAPI+"suggested",{params:{query:c}}).success(function(a,b){var c=a;c.length?d.resolve(c[0].code):d.reject()}),d.promise},h.getCategoryMetadata=function(c){var d=a.defer();return b.get(e.groupingsAPI+c).success(function(a,b){d.resolve(a)}).error(function(a){d.reject(a)}),d.promise},h.getInternalAnnotations=function(c){var d=a.defer(),g=new Hashtable,i=0,j=0,k=0,l={start:0,count:500,filters:{mandatory:{contains:{heading:c}},optional:{exact:{categoryCode:[h.jsonTemplate.category,""]}}},geo:{coords:["-122.431297","37.773972"],min:0,max:5e7}},m=f.bracketNotationURL(l);return b({method:"GET",url:e.postingAPI+m}).success(function(a){var b=[];if(a.results.length){for(var c=0;c<a.results.length;c++){var e=a.results[c];if(e.annotations){var f=e.annotations;for(var l in f)if(h.annotationsDictionary.containsKey(l))if(i++,g.containsKey(l)){var m=g.get(l),n=m+1;g.put(l,n)}else g.put(l,1)}e.askingPrice&&void 0!==e.askingPrice.value&&(j++,k=parseInt(k)+parseInt(e.askingPrice.value))}if(k>0&&(h.jsonTemplate.price_avg=k/j),g.size()>0){var o=Math.abs(i/g.size());g.each(function(a){var c=Math.abs(g.get(a));c>=o&&b.push({key:h.annotationsDictionary.get(a),value:null})}),d.resolve(b)}else d.resolve(b)}else d.resolve(b)}),d.promise},h.getAmazonAnnotations=function(c,d){var f=a.defer();return b.get(e.annotationsAPI,{params:{query:c}}).success(function(a){if(a.length){for(var b=0;b<a.length;b++){var c=a[b],e=c.name;h.annotationsDictionary.containsKey(e)&&d.push({key:h.annotationsDictionary.get(e),value:null})}f.resolve(d)}}).error(function(a){f.reject()}),f.promise},h.cleanModel=function(a,b){"#"===a?b&&(this.jsonTemplate.hashtags=_.without(this.jsonTemplate.hashtags,b),h.getProductMetaData()):"$"===a?b&&(this.jsonTemplate.price=null,this.jsonTemplate.price_avg=null,this.jsonTemplate.price_type=null):"@"===a&&b&&(this.jsonTemplate.location={})},h.googleMap=new google.maps.Map(document.createElement("map-canvas")),h.predictPlace=function(b){var c=new google.maps.LatLngBounds(new google.maps.LatLng(37.79738,-122.52464),new google.maps.LatLng(37.68879,-122.36122)),d={input:b,bounds:c,componentRestrictions:{country:"US"}},e=new google.maps.places.AutocompleteService,f=a.defer();return e.getPlacePredictions(d,function(a,b){f.resolve(a)}),f.promise},h.getPlaceMetaData=function(c){var d=new google.maps.places.PlacesService(h.googleMap),e={placeId:c.place_id},f=a.defer(),g=null,i=null,k=null,l=null;return d.getDetails(e,function(a,d){if(d===google.maps.places.PlacesServiceStatus.OK){a.description=c.description;var e={},m={};if(m.location={},a.formatted_address&&(e.formatted_address=a.formatted_address),a.geometry.location.lat()){e.lat=a.geometry.location.lat(),e["long"]=a.geometry.location.lng();var n=a.geometry.location.lat(),o=a.geometry.location.lng();m.coords=[o,n]}if(a.address_components){for(var p=0;p<a.address_components.length;++p)"administrative_area_level_1"==a.address_components[p].types[0]&&(i=a.address_components[p].short_name,e.state=i,m.location.state=i),"locality"==a.address_components[p].types[0]&&(g=a.address_components[p].long_name,e.short_name=g,m.location.city=g),"country"==a.address_components[p].types[0]&&(k=a.address_components[p].short_name,e.country=k,m.location.country=k),"postal_code"==a.address_components[p].types[0]&&(l=a.address_components[p].short_name,e.zipcode=l,m.location.postalCode=l);m.location.postalCode||(e.formatted_address=a.description,b.get("/utils/reversegeocode",{params:{lat:a.geometry.location.lat(),"long":a.geometry.location.lng()}}).success(function(a,b){for(j=0;j<a.results[0].address_components.length;j++){var c=a.results[0].address_components[j];if("postal_code"===c.types[0]){m.location.postalCode=c.long_name;break}}}))}h.jsonTemplate.location=e,h.jsonTemplate.geo=m,f.resolve(h.jsonTemplate)}}),f.promise},h.predictPrice=function(a){var b=[];a=a.replace(/\D/g,"");var c=d("currency")(a,"$",0);return b.push({suggestion:c,rate:"flat_rate",value:a}),b.push({suggestion:c+"/hr",rate:"hourly",value:a}),b.push({suggestion:c+"/day",rate:"daily",value:a}),b.push({suggestion:c+"/week",rate:"weekly",value:a}),b.push({suggestion:c+"/month",rate:"monthly",value:a}),b.push({suggestion:c+"/year",rate:"yearly",value:a}),b.push({suggestion:c+"/each",rate:"yearly",value:a}),b},h.getPriceMetaData=function(a){return null===this.jsonTemplate.price?(this.jsonTemplate.price=a.value,this.jsonTemplate.price_type=a.rate,!0):!1},h}]),htsApp.controller("pushNewPostToExternalSources",["$scope","$modal","$modalInstance","$q","$http","newPost","Notification","facebookFactory","ebayFactory","twitterFactory","subMerchantFactory","ENV",function(a,b,c,d,e,f,g,h,i,j,k,l){a.currentlyPublishing={publishing:!1,facebook:!1,twitter:!1,amazon:!1,ebay:!1,craigslist:!1,onlinePayment:!1},a.dismiss=function(b){a.currentlyPublishing.publishing=!0,a.publishToFacebook().then(function(){a.currentlyPublishing.facebook=!1,a.publishToTwitter().then(function(){a.currentlyPublishing.twitter=!1,a.publishToEbay().then(function(){a.currentlyPublishing.ebay=!1,a.publishToAmazon().then(function(){a.currentlyPublishing.amazon=!1,a.publishToCraigslist().then(function(){a.currentlyPublishing.craigslist=!1,a.setupOnlinePayment().then(function(){a.currentlyPublishing.onlinePayment=!1,c.dismiss({reason:b,post:f})})})})})})})},a.shareToggles={facebook:!1,twitter:!1,ebay:!1,amazon:!1,craigslist:!1},a.onlinePayment={allow:!0},a.checkIfFacebookTokenValid=function(){a.shareToggles.facebook&&h.checkIfTokenValid().then(function(){},function(b){a.shareToggles.facebook=!1,g.error(b)})},a.publishToFacebook=function(){var b=d.defer();return a.shareToggles.facebook?(a.currentlyPublishing.facebook=!0,h.publishToWall(f).then(function(a){f=a,b.resolve()},function(a){g.error({title:"Facebook publishing error",message:a.error.message,delay:1e4}),b.resolve()})):b.resolve(),b.promise},a.checkIfTwitterTokenValid=function(){a.shareToggles.twitter&&j.checkIfTokenValid().then(function(){},function(b){a.shareToggles.twitter=!1,g.error(b)})},a.publishToTwitter=function(){var b=d.defer();return a.shareToggles.twitter?(a.currentlyPublishing.twitter=!0,j.publishToTwitter(f).then(function(a){f=a,b.resolve()},function(a){g.error({title:"Twitter publishing error",message:a.error.message,delay:1e4}),b.resolve()})):b.resolve(),b.promise},a.publishToAmazon=function(){var b=d.defer();return a.shareToggles.amazon?(a.currentlyPublishing.amazon=!0,g.primary({title:"Amazon coming soon",message:"Publish to Amazon is almost there!",delay:15e3}),b.resolve()):b.resolve(),b.promise},a.checkIfEbayTokenValid=function(){a.shareToggles.ebay&&i.checkIfTokenValid().then(function(){},function(b){a.shareToggles.ebay=!1,g.error(b)})},a.publishToEbay=function(){var b=d.defer();return a.shareToggles.ebay?(a.currentlyPublishing.ebay=!0,i.publishToEbay(f).then(function(a){f=a,b.resolve()},function(a){try{g.error({title:"eBay "+a.name,message:a.sourceError.details[0].LongMessage[0],delay:1e4})}catch(c){g.error({title:"eBay "+a.name,message:a.message||"Please contact support",delay:1e4})}b.resolve()})):b.resolve(),b.promise},a.publishToCraigslist=function(){var b=d.defer();return a.shareToggles.craigslist?(a.currentlyPublishing.craigslist=!0,g.error({title:"Craigslist publishing error",message:"push to craiglist coming soon!",delay:1e4}),b.resolve()):b.resolve(),b.promise},a.setupOnlinePayment=function(){var b=d.defer();return a.onlinePayment.allow?(a.currentlyPublishing.onlinePayment=!0,k.validateSubMerchant(f).then(function(a){b.resolve(a)},function(a){b.resolve()})):b.resolve(),b.promise}}]),htsApp.controller("notifications.controller",["$scope",function(a){function b(a){for(var b=[],c=0;a>c;c++)b.push({text:c,size:~~(100*Math.random()+50)});return b}a.items={collection:b(1e3)}}]),htsApp.controller("paymentController",["$scope","$http","$stateParams","ENV",function(a,b,c,d){!function(){var e=c.postingId,f=c.offerId;b.get(d.postingAPI+e,{params:{offers:!0}}).success(function(c){a.posting=c,b.get(d.htsAppUrl+"/getProfile",{params:{username:c.username}}).success(function(b){a.sellerProfile=b}).error(function(a){alert("could not lookup sellers profile.  please inform support")});for(var e,g=0;g<c.offers.results.length;g++){var h=c.offers.results[g];if(h.offerId===f){e=c.offers.results[g];break}}b.get(d.htsAppUrl+"/getProfile",{params:{username:e.username}}).success(function(b){a.buyerProfile=b}).error(function(a){alert("could not lookup buyers profile.  please inform support")})}).error(function(a){alert("We could not find your transaction. Please note the url you have been directed to and contact support.  Sorry for inconvenience.")})}(),a.dropinOptions={paymentMethodNonceReceived:function(e,f){e.preventDefault(),b.post(d.htsAppUrl+"/payments/purchase",{postingId:c.postingId,offerId:c.offerId,payment_method_nonce:f}).success(function(b){if(b.success)if(b.result.success)a.alerts.push({type:"success",msg:"Your payment has been sent!  Thanks for using HashtagSell!"});else{var d="/payment/"+c.postingId+"/"+c.offerId;a.alerts.push({type:"danger",msg:b.result.message+". <a href="+d+" target='_self'>Try Again?</a>"})}}).error(function(b){a.alerts.push({type:"danger",msg:b.message})})}},a.alerts=[]}]),htsApp.controller("peerReviewController",["$scope","$http","$stateParams","ENV",function(a,b,c,d){!function(){var e=(c.postingId,c.offerId,c.userId);a.reviewForm={rating:0,comment:null},b.get(d.htsAppUrl+"/getProfile",{params:{userId:e}}).success(function(b){a.reviewee=b}).error(function(a){alert("could not lookup reviewees profile.  please inform support")})}(),a.alerts=[]}]),htsApp.controller("profile.controller",["$scope","profileFactory",function(a,b){a.nav=b.nav}]),htsApp.factory("profileFactory",["$http","$location","$q","ENV",function(a,b,c,d){var e={};return e.messages={"private":{sent:[],received:[]}},e.nav=[{title:"Messages",link:"profile.messages",data:e.messages},{title:"Reviews",link:"profile.reviews",data:[]}],e.getUserProfile=function(d){var e=c.defer(),f=b.protocol()+"://"+b.host()+":"+b.port()+"/getprofile?username="+d;return a({method:"GET",url:f}).then(function(a,b,c,d){e.resolve(a)},function(a,b,c,d){e.reject(a)}),e.promise},e}]),htsApp.controller("results.controller",["$scope","$state","$stateParams","searchFactory","splashFactory","uiGmapGoogleMapApi","uiGmapIsReady",function(a,b,c,d,e,f,g){a.status=d.status,a.views=d.views,a.queryObj=c,a.openSplash=function(a){e.result=a.result,b.go("results.splash",{id:a.result.postingId})};var h=function(b){d.paginate(b).then(function(c){200!==c.status?(d.status.pleaseWait=!1,d.status.loading=!1,d.status.error.message=":( Oops.. Something went wrong.",d.status.error.trace=c.data.error):200===c.status&&(c.data.results.length?(a.results?d.filterArray(a.views,"pagination"):(d.filterArray(a.views,"pagination"),a.infiniteScroll=function(c,e){!d.status.loading&&e>=a.results.gridRows.length-3&&(d.status.loadingMessage="Fetching more awesome...",d.status.loading=!0,b+=1,h(b))}),a.results=d.results,d.status.pleaseWait=!1,d.status.loading=!1):c.data.results.length||0!==b?!c.data.results.length&&b>0&&(d.status.pleaseWait=!1,d.status.loadingMessage="No more results.  Sell your next item with us to increase our inventory."):(d.status.pleaseWait=!1,d.status.loading=!1,d.status.error.message="\\_()_/  Nothing found.  Keep your searches simple."))},function(a){d.status.pleaseWait=!1,d.status.loading=!1,d.status.error.message="(_) Oops.. Something went wrong.",d.status.error.trace=a.data.error})};h(0),f.then(function(b){a.map=d.map})}]),htsApp.directive("onVsIndexChange",["$parse",function(a){return function(b,c,d){var e=a(d.onVsIndexChange),f=function(){e(b)};b.$watch("startIndex",f),b.$watch("endIndex",f)}}]),htsApp.directive("resizeGrid",["$rootScope","$window","searchFactory",function(a,b,c){return{restrict:"A",link:function(a,d){c.getInnerContainerDimensions=function(){return{w:d.width(),h:d.height()}},angular.element(b).bind("resize",function(){a.views.gridView&&c.filterArray(a.views,"resize"),a.$apply()})}}}]),htsApp.factory("searchFactory",["$http","$stateParams","$location","$q","$log","$timeout","utilsFactory","ENV",function(a,b,c,d,e,f,g,h){var j={};j.results={gridRows:[],unfiltered:[]},j.filter={mustHaveImage:!1,mustHavePrice:!1},j.sort={distance:!0,price:!1,datePosted:!1},j.priceSlider={min:0,max:0,step:1,rangeValue:[0,0],userSetValue:!1},j.views={gridView:!0,showMap:!1},j.status={pleaseWait:!0,error:{}},j.getInnerContainerDimensions=function(){return"function re-defined via resizeGrid directive"},j.paginate=function(a){var c=d.defer();return 0===a?j.getPopularCategories().then(function(a){if(200===a.status&&a.data.length){for(var b=[],c=0,d=0;d<a.data.length;d++){var e=a.data[d];c+=e.count}for(var f=(c/a.data.length,0);f<a.data.length;f++){var g=a.data[f],h=g.count/c*100;h>=10&&b.push(g.code)}b.length>1?j.defaultParams.filters.optional={exact:{categoryCode:b.join(",")}}:1===b.length?j.defaultParams.filters.optional={exact:{categoryCode:[b[0],""]}}:!b.length&&a.data.length&&(j.defaultParams.filters.optional={exact:{categoryCode:[a.data[0].code,""]}})}}).then(function(){if(j.defaultParams.filters.mandatory.contains.heading=b.q,b.locationObj&&b.locationObj.geometry){j.defaultParams.geo.lookup=!1;var d=b.locationObj.geometry.location.lat(),e=b.locationObj.geometry.location.lng();j.defaultParams.geo.coords=[e,d]}b.price&&(b.price.min&&(j.priceSlider.userSetValue=!0,j.priceSlider.rangeValue[0]=parseInt(b.price.min)),b.price.max&&(j.priceSlider.userSetValue=!0,j.priceSlider.rangeValue[1]=parseInt(b.price.max))),j.query(a).then(function(a){c.resolve(a)})}):j.query(a).then(function(a){c.resolve(a)}),c.promise},j.getPopularCategories=function(){var c=d.defer();return a({method:"GET",url:h.groupingsAPI+"popular",params:{query:b.q}}).then(function(a){c.resolve(a)},function(a){c.reject(a)}),c.promise},j.query=function(b){var c=d.defer(),e=g.bracketNotationURL(j.defaultParams);return a({method:"GET",url:h.postingAPI+e}).then(function(a){a.data.results.length&&(j.defaultParams={start:(b+1)*a.data.options.count,count:a.data.options.count,filters:a.data.options.filters,geo:{coords:a.data.options.geo.coords,min:a.data.options.geo.min,max:a.data.options.geo.max},sort:{}},j.results.unfiltered=j.results.unfiltered.concat(a.data.results)),c.resolve(a)},function(a){c.reject(a)}),c.promise},j.defaultParams={start:0,count:35,filters:{mandatory:{contains:{heading:null}}},geo:{lookup:!0,min:0,max:5e7}},j.map={bounds:{},center:{latitude:0,longitude:0},zoom:8,markers:[],options:{zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.RIGHT_TOP},panControl:!1,mapTypeControl:!1,maxZoom:22,minZoom:0,streetViewControlOptions:{position:google.maps.ControlPosition.TOP_RIGHT}},clusterOptions:{gridSize:35,maxZoom:22,minZoom:0,zoomOnClick:!0,averageCenter:!0,minimumClusterSize:1,styles:[{textColor:"white",fontFamily:"Open Sans, Helvetica, Arial, sans-serif",url:"https://static.hashtagsell.com/htsApp/map-elements/cluster1.png",height:35,width:35},{textColor:"white",fontFamily:"Open Sans, Helvetica, Arial, sans-serif",url:"https://static.hashtagsell.com/htsApp/map-elements/cluster2.png",height:35,width:35},{textColor:"white",fontFamily:"Open Sans, Helvetica, Arial, sans-serif",url:"https://static.hashtagsell.com/htsApp/map-elements/cluster2.png",height:35,width:35}]},refresh:!1},j.cachedColumnCalculation=null,j.generateRows=function(a,b,c){var d;if(c.gridView){var e=j.getInnerContainerDimensions(),f=290;d=Math.floor(e.w/f),j.results.gridPercentageWidth=100/d}else d=1;if(d!==j.cachedColumnCalculation||"filter"===b||"pagination"===b){j.cachedColumnCalculation=d,j.results.gridRows=[];for(var g=0;g<a.length;g++){var h;if(h=c.gridView?390:0===a[g].images.length?179:1===a[g].images.length?261:420,g%d===0){for(var i={rowHeight:h,rowContents:[]},k=0;d>k;k++)g+k<a.length&&i.rowContents.push(a[g+k]);j.results.gridRows.push(i),g=g+k-1}}var l=j.priceSlider.max;100>l?j.priceSlider.step=1:l>100&&500>l?j.priceSlider.step=5:l>500&&2e3>l?j.priceSlider.step=10:l>2e3&&1e4>l?j.priceSlider.step=50:l>1e4&&(j.priceSlider.step=50)}},j.updatePriceSlider=function(a){parseInt(a)>parseInt(j.priceSlider.max)&&(j.priceSlider.max=parseInt(a),j.priceSlider.userSetValue||(j.priceSlider.rangeValue[1]=parseInt(a)))},j.markerMaker=function(a,b,c){var d={id:a.postingId,coords:{latitude:a.geo.coordinates[1],longitude:a.geo.coordinates[0]},title:a.heading,options:{visible:c}};j.views.showMap&&(j.map.markers[b]?j.map.markers[b].options.visible=c:j.map.markers[b]=d)},j.mustHaveImage=function(a,b){var c=Boolean(a.images.length);return j.updatePriceSlider(a.askingPrice.value),j.markerMaker(a,b,c),c},j.mustHavePrice=function(a,b){var c=Boolean(a.askingPrice.value);return j.updatePriceSlider(a.askingPrice.value),j.markerMaker(a,b,c),c},j.mustFitPriceRange=function(a,b){var c=Boolean(!a.askingPrice.value||a.askingPrice.value>=j.priceSlider.rangeValue[0]&&a.askingPrice.value<=j.priceSlider.rangeValue[1]);return j.updatePriceSlider(a.askingPrice.value),j.markerMaker(a,b,c),c},j.mustHaveImageAndPrice=function(a,b){var c=Boolean(a.images.length&&a.askingPrice.value);return j.updatePriceSlider(a.askingPrice.value),j.markerMaker(a,b,c),c},j.mustHaveImageAndMustFitPriceRange=function(a,b){var c=Boolean(a.images.length&&a.askingPrice.value>=j.priceSlider.rangeValue[0]&&a.askingPrice.value<=j.priceSlider.rangeValue[1]);return j.updatePriceSlider(a.askingPrice.value),j.markerMaker(a,b,c),c},j.mustHavePriceAndMustFitPriceRange=function(a,b){var c=Boolean(a.askingPrice.value&&a.askingPrice.value>=j.priceSlider.rangeValue[0]&&a.askingPrice.value<=j.priceSlider.rangeValue[1]);return j.updatePriceSlider(a.askingPrice.value),j.markerMaker(a,b,c),c},j.mustHavePriceAndMustHaveImageAndMustFitPriceRange=function(a,b){var c=Boolean(a.images.length&&a.askingPrice.value&&a.askingPrice.value>=j.priceSlider.rangeValue[0]&&a.askingPrice.value<=j.priceSlider.rangeValue[1]);return j.updatePriceSlider(a.askingPrice.value),j.markerMaker(a,b,c),c},j.filterArray=function(a,b){var c,d=j.filter,e=j.priceSlider;if(d.mustHavePrice&&d.mustHaveImage&&e.userSetValue)c=j.results.unfiltered.filter(j.mustHavePriceAndMustHaveImageAndMustFitPriceRange),j.generateRows(c,b,a);else if(d.mustHaveImage&&e.userSetValue)c=j.results.unfiltered.filter(j.mustHaveImageAndMustFitPriceRange),j.generateRows(c,b,a);else if(d.mustHavePrice&&e.userSetValue)c=j.results.unfiltered.filter(j.mustHavePriceAndMustFitPriceRange),j.generateRows(c,b,a);else if(d.mustHaveImage&&d.mustHavePrice)c=j.results.unfiltered.filter(j.mustHaveImageAndPrice),j.generateRows(c,b,a);else if(d.mustHaveImage)c=j.results.unfiltered.filter(j.mustHaveImage),j.generateRows(c,b,a);else if(d.mustHavePrice)c=j.results.unfiltered.filter(j.mustHavePrice),j.generateRows(c,b,a);else if(e.userSetValue)c=j.results.unfiltered.filter(j.mustFitPriceRange),j.generateRows(c,b,a);else{for(i=0;i<j.results.unfiltered.length;i++)j.updatePriceSlider(j.results.unfiltered[i].askingPrice.value),j.markerMaker(j.results.unfiltered[i],i,!0);j.generateRows(j.results.unfiltered,b,a)}j.views.showMap&&k()};var k=function(){j.map.refresh=!0,f(function(){j.map.refresh=!1},100)};return j.resetResultsView=function(){j.results.gridRows=[],j.results.unfiltered=[],j.priceSlider.min=0,j.priceSlider.max=0,j.priceSlider.step=1,j.priceSlider.rangeValue=[0,0],j.priceSlider.userSetValue=!1,j.filter.mustHaveImage=!1,j.filter.mustHavePrice=!1,j.views.gridView=!0,j.views.showMap=!1,j.map.markers=[],j.status.pleaseWait=!0,j.status.error={},j.defaultParams={start:0,count:35,filters:{mandatory:{contains:{heading:null}}},geo:{lookup:!0,min:0,max:5e7}}},j}]),htsApp.service("Session",["$window","$http","$q","$state",function(a,b,c,d){return this.defaultUserObj={loggedIn:!1,profile_photo:"//static.hashtagsell.com/htsApp/placeholders/user-placeholder.png",banner_photo:"//static.hashtagsell.com/htsApp/placeholders/header-placeholder.png",safe_search:!0,linkedAccounts:[],email_provider:[{name:"Always Ask",value:"ask"}],favorites:[],feed_categories:[{code:"SSSS",name:"For Sale",categories:[{code:"SANT",name:"Antiques",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"SAPP",name:"Apparel",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"SAPL",name:"Appliances",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"SANC",name:"Art And Crafts",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"SKID",name:"Babies And Kids",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"SBAR",name:"Barters",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"SBIK",name:"Bicycles",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"SBIZ",name:"Businesses",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"SCOL",name:"Collections",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"SEDU",name:"Educational",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"SELE",name:"Electronics And Photo",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"SFNB",name:"Food And Beverage",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"SFUR",name:"Furniture",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"SGAR",name:"Garage Sales",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"SGFT",name:"Gift Cards",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"SHNB",name:"Health And Beauty",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"SHNG",name:"Home And Garden",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"SIND",name:"Industrial",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"SJWL",name:"Jewelry",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"SLIT",name:"Literature",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"SMNM",name:"Movies And Music",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"SMUS",name:"Musical Instruments",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"SRES",name:"Restaurants",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"SSNF",name:"Sports And Fitness",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"STIX",name:"Tickets",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"STOO",name:"Tools",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"STOY",name:"Toys And Hobbies",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"STVL",name:"Travel",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"SWNT",name:"Wanted",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"SOTH",name:"Other",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1}],selected:!0,__ivhTreeviewIndeterminate:!1,__ivhTreeviewExpanded:!0},{code:"RRRR",name:"Real Estate",categories:[{code:"RCRE",name:"Commercial Real Estate",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"RHFR",name:"Housing For Rent",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"RHFS",name:"Housing For Sale",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"RSUB",name:"Housing Sublets",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"RSWP",name:"Housing Swaps",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"RLOT",name:"Lots And Land",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"RPNS",name:"Parking And Storage",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"RSHR",name:"Room Shares",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"RVAC",name:"Vacation Properties",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"RWNT",name:"Want Housing",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"ROTH",name:"Other",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1}],selected:!0,__ivhTreeviewIndeterminate:!1,__ivhTreeviewExpanded:!0},{code:"VVVV",name:"Vehicles",categories:[{code:"VAUT",name:"Autos",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"VMOT",name:"Motorcycles",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"VMPT",name:"Motorcycle Parts",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"VPAR",name:"Parts",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1},{code:"VOTH",name:"Other",selected:!0,__ivhTreeviewExpanded:!1,__ivhTreeviewIndeterminate:!1}],selected:!0,__ivhTreeviewIndeterminate:!1,__ivhTreeviewExpanded:!0}]},this.userObj={user_settings:JSON.parse(a.localStorage.getItem("hts_storage"))||this.defaultUserObj},this.updateServer=function(a){var d=c.defer();return b.post("/updateUserSettings",{userSettings:this.userObj.user_settings}).then(function(b){b.data.success&&(a&&a(b),d.resolve())},function(a,b,c,e){d.reject()}),d.promise},this.create=function(b){b.user_settings.loggedIn=!0,this.userObj.user_settings=b.user_settings,a.localStorage.hts_storage=angular.toJson(this.userObj.user_settings)},this.destroy=function(){this.userObj.user_settings=this.defaultUserObj,a.localStorage.removeItem("hts_storage"),d.go("feed")},this.getSessionValue=function(a){return this.userObj.user_settings[a]?this.userObj.user_settings[a]:this.userObj.user_settings.linkedAccounts[a]?this.userObj.user_settings.linkedAccounts[a]:!1},this.setSessionValue=function(a,b,c){
this.userObj.user_settings[a]?this.userObj.user_settings[a]=b:this.userObj.user_settings.linkedAccounts[a]&&(this.userObj.user_settings.linkedAccounts[a]=b),this.create(this.userObj),this.updateServer(c)},this.getUserFromServer=function(){var a=c.defer();return b.get("/getUserSettings").then(function(b){var c={};c.user_settings=b.data,a.resolve(c)},function(b,c,d,e){a.reject()}),a.promise},this.deleteAccount=function(){var a=c.defer();return b({url:"/user",method:"DELETE"}).then(function(b){a.resolve(b)},function(b,c,d,e){a.reject(b)}),a.promise},this}]),htsApp.controller("settings.account.controller",["$scope","$timeout","$window","Session","ebayFactory","facebookFactory","twitterFactory","Notification","modalConfirmationService",function(a,b,c,d,e,f,g,h,i){a.getEbaySessionID=function(){a.ebay={},e.getEbaySessionID().then(function(a){d.setSessionValue("ebay",a.data.ebay,function(){})},function(b){a.ebay.sessionId=b.data.sessionId,a.ebay.err=b.data.ebay.Errors.LongMessage,h.error({title:"Ebay auth failed",message:"Please try again.",delay:1e4})})},a.disconnectFacebook=function(){f.disconnectFacebook()},a.disconnectTwitter=function(){g.disconnectTwitter()},a.disconnectEbay=function(){e.disconnectEbay()},a.disconnectAmazon=function(){d.setSessionValue("amazon",{},function(){})},a.deleteAccount=function(){var a={closeButtonText:"No",actionButtonText:"Yes",headerText:"Delete Account?",bodyText:"Are you sure you want to delete your HashtagSell account?  This action is permanent."};i.showModal({},a).then(function(a){d.deleteAccount().then(function(a){d.destroy()},function(a){})})}}]),htsApp.controller("settings.password.controller",["$scope","authFactory",function(a,b){a.alerts=[],a.closeAlert=function(b){a.alerts.splice(b,1)},a.updatePassword=function(c){if(c){var d=a.currentPassword,e=a.newPassword;b.updatePassword(d,e).then(function(b){b.error?a.alerts.push({type:"danger",msg:b.error}):b.success&&a.alerts.push({type:"success",msg:"Success! Password updated."})},function(){a.alerts.push({type:"danger",msg:"Whoops.. Try again or contact support."})})}a.currentPassword=null,a.newPassword=null,a.verifyNewPassword=null}}]),htsApp.controller("settings.payment.controller",["$scope",function(a){}]),htsApp.controller("settings.profile.controller",["$scope","Session","$templateCache",function(a,b,c){a.userObj=b.userObj,a.bindingObj={currentlyUploadingProfilePhoto:!1,currentlyUploadingBannerPhoto:!1,requireUpdate:!0},a.profileDropzoneConfig={options:{paramName:"profilePhoto",maxFilesize:10,acceptedFiles:".jpeg,.jpg,.png,.gif",url:"/upload",autoProcessQueue:!0,uploadMultiple:!1,addRemoveLinks:!1,thumbnailWidth:90,thumbnailHeight:90,previewsContainer:"#profilePreview",previewTemplate:c.get("profileUploadTemplate.tpl"),clickable:".triggerProfileImageUpload",dictDefaultMessage:""},eventHandlers:{addedfile:function(){a.$apply(function(){a.bindingObj.currentlyUploadingProfilePhoto=!0})},success:function(c){var d=JSON.parse(c.xhr.response);b.setSessionValue("profile_photo",d.url,a.$apply(function(){a.bindingObj.currentlyUploadingProfilePhoto=!1}))},complete:function(){}}},a.bannerDropzoneConfig={options:{paramName:"bannerPhoto",maxFilesize:10,acceptedFiles:".jpeg,.jpg,.png,.gif",url:"/upload",autoProcessQueue:!0,uploadMultiple:!1,addRemoveLinks:!1,thumbnailWidth:180,thumbnailHeight:120,previewsContainer:"#bannerPreview",previewTemplate:c.get("bannerUploadTemplate.tpl"),clickable:".triggerBannerImageUpload",dictDefaultMessage:""},eventHandlers:{addedfile:function(){a.$apply(function(){a.bindingObj.currentlyUploadingBannerPhoto=!0})},success:function(c){var d=JSON.parse(c.xhr.response);b.setSessionValue("banner_photo",d.url,a.$apply(function(){a.bindingObj.currentlyUploadingBannerPhoto=!1}))},complete:function(){}}},a.requireUpdate=function(){a.bindingObj.requireUpdate=!1},a.submitUpdatedProfile=function(){b.setSessionValue("biography",a.userObj.user_settings.biography,function(){a.bindingObj.requireUpdate=!0})}}]),htsApp.controller("sideNav.controller",["$scope","sideNavFactory","splashFactory",function(a,b,c){a.sideNav=b,a.result=c.result}]),htsApp.factory("sideNavFactory",function(){var a={};return a.defaultMenu=[{name:"Feed",alerts:null,link:"feed",active:!1},{name:"My Posts",alerts:null,link:"myposts",active:!1},{name:"Watch List",alerts:null,link:"watchlist",active:!1},{name:"Notify Me",alerts:null,link:"notifications",active:!1}],a.items=a.defaultMenu,a.settingsMenu=[{name:"Back",alerts:null,link:null,active:!1},{name:"Account",alerts:null,link:"settings.account",active:!1},{name:"Password",alerts:null,link:"settings.password",active:!1},{name:"Profile",alerts:null,link:"settings.profile",active:!1},{name:"Payment & Shipping",alerts:null,link:"settings.payment",active:!1}],a.updateSideNav=function(b){switch(b.name){case"settings":a.settingsMenu[0].active=!1,a.settingsMenu[1].active=!1,a.settingsMenu[2].active=!1,a.settingsMenu[3].active=!1,a.settingsMenu[4].active=!1,a.items=a.settingsMenu;break;case"settings.account":a.settingsMenu[0].active=!1,a.settingsMenu[1].active=!0,a.settingsMenu[2].active=!1,a.settingsMenu[3].active=!1,a.settingsMenu[4].active=!1,a.items=a.settingsMenu;break;case"settings.password":a.settingsMenu[0].active=!1,a.settingsMenu[1].active=!1,a.settingsMenu[2].active=!0,a.settingsMenu[3].active=!1,a.settingsMenu[4].active=!1,a.items=a.settingsMenu;break;case"settings.profile":a.settingsMenu[0].active=!1,a.settingsMenu[1].active=!1,a.settingsMenu[2].active=!1,a.settingsMenu[3].active=!0,a.settingsMenu[4].active=!1,a.items=a.settingsMenu;break;case"settings.payment":a.settingsMenu[0].active=!1,a.settingsMenu[1].active=!1,a.settingsMenu[2].active=!1,a.settingsMenu[3].active=!1,a.settingsMenu[4].active=!0,a.items=a.settingsMenu;break;case"feed":a.defaultMenu[0].active=!0,a.defaultMenu[1].active=!1,a.defaultMenu[2].active=!1,a.defaultMenu[3].active=!1,a.items=a.defaultMenu;break;case"myposts":a.defaultMenu[0].active=!1,a.defaultMenu[1].active=!0,a.defaultMenu[2].active=!1,a.defaultMenu[3].active=!1,a.items=a.defaultMenu;break;case"watchlist":a.defaultMenu[0].active=!1,a.defaultMenu[1].active=!1,a.defaultMenu[2].active=!0,a.defaultMenu[3].active=!1,a.items=a.defaultMenu;break;case"notifications":a.defaultMenu[0].active=!1,a.defaultMenu[1].active=!1,a.defaultMenu[2].active=!1,a.defaultMenu[3].active=!0,a.items=a.defaultMenu;break;case"results":a.defaultMenu[0].active=!1,a.defaultMenu[1].active=!1,a.defaultMenu[2].active=!1,a.defaultMenu[3].active=!1,a.items=a.defaultMenu;break;case"profile":a.defaultMenu[0].active=!1,a.defaultMenu[1].active=!1,a.defaultMenu[2].active=!1,a.defaultMenu[3].active=!1,a.items=a.defaultMenu}},a.sideNav={hidden:!0,listView:!0},a}),htsApp.controller("sideProfile",["$scope","Session","$templateCache",function(a,b,c){a.userObj=b.userObj,a.checkDefaultBanner=function(){return"/images/userMenu/header-placeholder.png"===a.userObj.user_settings.banner_photo},a.checkDefaultProfilePhoto=function(){return"/images/userMenu/user-placeholder.png"===a.userObj.user_settings.profile_photo},a.profileDropzoneConfig={options:{paramName:"profilePhoto",maxFilesize:10,acceptedFiles:".jpeg,.jpg,.png,.gif",url:"/upload",autoProcessQueue:!0,uploadMultiple:!1,previewTemplate:'<div style="display:none"></div>',clickable:".sideNavTriggerProfileImageUpload",dictDefaultMessage:""},eventHandlers:{success:function(a){var c=JSON.parse(a.xhr.response);b.setSessionValue("profile_photo",c.url,function(){})},complete:function(){}}},a.bannerDropzoneConfig={options:{paramName:"bannerPhoto",maxFilesize:10,acceptedFiles:".jpeg,.jpg,.png,.gif",url:"/upload",autoProcessQueue:!0,uploadMultiple:!1,previewTemplate:'<div style="display:none"></div>',clickable:".sideNavTriggerBannerImageUpload",dictDefaultMessage:""},eventHandlers:{success:function(c){var d=JSON.parse(c.xhr.response);b.setSessionValue("banner_photo",d.url,a.$apply(function(){}))},complete:function(){}}}}]),htsApp.factory("socketio",["ENV","myPostsFactory","Notification","favesFactory","feedFactory",function(a,b,c,d,e){var f={postingSocket:io(a.realtimePostingAPI),userSocket:io(a.realtimeUserAPI),postings:[],usersViewing:[]};return f.joinPostingRoom=function(a,b,c){var d=0;"toggleSplash"===b?d=1:"inWatchList"===b?d=2:"postingOwner"===b&&(d=3);var e=!1;if(f.postings.length)for(var g=0;g<f.postings.length;g++){var h=f.postings[g];if(h.postingId===a){if(h.permissionLevel<d){f.postings.splice(g,1),e=!0,b=f.cachedUsername+" is joining posting room: "+a+" because requested permission level "+d+" is greater than "+h.permissionLevel;break}}else g===f.postings.length-1&&(e=!0,b=f.cachedUsername+" is joining posting room: "+a+" for first time with permission level "+d)}else e=!0,b=f.cachedUsername+" is joining posting room: "+a+" with permission level "+d+" as their first room ";e?(f.postings.push({postingId:a,permissionLevel:d}),f.postingSocket.emit("join-room",{username:f.cachedUsername,roomId:a})):b=f.cachedUsername+" already joined posting room: "+a+" with higher permission level than "+d,c&&c()},f.joinUserRoom=function(a,b,c){f.usersViewing.push(b),f.userSocket.emit("join-room",{username:b,roomId:a}),c&&c()},f.joinLocationRoom=function(a,b){f.postingSocket.emit("join-room",{username:f.cachedUsername,roomId:a}),b&&b()},f.closeAllConnections=function(a){f.leaveUserRoom(f.cachedUsername),f.cachedUsername=null,a&&a()},f.leavePostingRoom=function(a,b,c){var d=0;"toggleSplash"===b?d=1:"inWatchList"===b?d=2:"postingOwner"===b&&(d=3);var e=!1;if(f.postings.length)for(var g=0;g<f.postings.length;g++){var h=f.postings[g];if(h.postingId===a){if(h.permissionLevel<=d){f.postings.splice(g,1),e=!0,b=f.cachedUsername+" is leaving posting room: "+a+" because requested permission level "+d+" is greater than or equal to "+h.permissionLevel;break}b=f.cachedUsername+" is NOT leaving posting room: "+a+" because requested permission level "+d+" is less than "+h.permissionLevel}else g===f.postings.length-1&&(b=f.cachedUsername+" is requesting to leave posting room: "+a+" which they have not joined?")}else b=f.cachedUsername+" is requesting to leave posting room: "+a+" when they havent joined any rooms?";e&&f.postingSocket.emit("leave-room",a),c&&c()},f.leaveUserRoom=function(a,b){f.usersViewing.splice(f.usersViewing.indexOf(a),1),f.userSocket.emit("leave-room",a),b&&b()},f.leaveLocationRoom=function(a,b){f.userSocket.emit("leave-room",a),b&&b()},f.sendMessage=function(a,b){f.userSocket.emit("private-message",{message:b,recipient:a,username:f.cachedUsername})},f.userSocket.on("private-message",function(a){c.primary({title:"New message from @"+a.username,message:a.message,delay:1e4})}),f.postingSocket.on("make-offer",function(a){a.username===f.cachedUsername?d.checkFave(a.posting,function(b){b?d.updateFavorite(a,function(){var b='"/watchlist/meetings/'+a.posting.postingId+'"';c.primary({title:"<a href="+b+">Offer Sent!</a>",message:"<a href="+b+">This watchlist item has been updated. You'll be notified when the seller responds.</a>",delay:1e4})}):d.addFave(a.posting,function(){var b='"/watchlist/meetings/'+a.posting.postingId+'"';c.primary({title:"<a href="+b+">Offer Sent!</a>",message:"<a href="+b+">This item has been added to your watchlist. You'll be notified when the seller responds.</a>",delay:1e4})})}):a.posting.username===f.cachedUsername?b.getAllUserPosts(f.cachedUsername).then(function(b){var d='"/myposts/meetings/'+a.posting.postingId+'"';c.primary({title:"<a href="+d+">New Offer</a>",message:"<a href="+d+">@"+a.username+" has placed an offer on your item!</a>",delay:1e4})}):d.updateFavorite(a,function(){var b='"/wishlist/meetings/'+a.posting.postingId+'"';c.primary({title:"<a href="+b+">"+a.posting.heading+" may go fast!</a>",message:"<a href="+b+">Just letting you know other people are interested in an item you're watching. *wink *wink</a>",delay:1e4})})}),f.postingSocket.on("update-offer",function(a){a.offer.proposals[a.offer.proposals.length-1].acceptedAt||(a.username===f.cachedUsername?d.checkFave(a.posting,function(b){b?a.offer.proposals[a.offer.proposals.length-1].isOwnerReply?d.updateFavorite(a,function(){var b='"/watchlist/meetings/'+a.posting.postingId+'"';c.primary({title:"<a href="+b+">Counter Offer Received</a>",message:"<a href="+b+">The seller has responded with a counter offer</a>",delay:1e4})}):d.updateFavorite(a,function(){var b='"/watchlist/meetings/'+a.posting.postingId+'"';c.primary({title:"<a href="+b+">Counter Offer Sent!</a>",message:"<a href="+b+">This watchlist item has been updated. You'll be notified when the seller responds.</a>",delay:1e4})}):d.addFave(a.posting,function(){var b='"/watchlist/meetings/'+a.posting.postingId+'"';c.primary({title:"<a href="+b+">Counter Offer Sent!</a>",message:"<a href="+b+">This item has been added to your watchlist. You'll be notified when the seller responds.</a>",delay:1e4})})}):a.posting.username===f.cachedUsername&&b.getAllUserPosts(f.cachedUsername).then(a.offer.proposals[a.offer.proposals.length-1].isOwnerReply?function(b){var d='"/myposts/meetings/'+a.posting.postingId+'"';c.primary({title:"<a href="+d+">Counter Offer Sent</a>",message:"<a href="+d+">You'll be notified when the buyer responds.</a>",delay:1e4})}:function(b){var d='"/myposts/meetings/'+a.posting.postingId+'"';c.primary({title:"<a href="+d+">Counter Offer Received</a>",message:"<a href="+d+">@"+a.username+" has updated their offer.</a>",delay:1e4})}))}),f.postingSocket.on("question",function(a){a.username===f.cachedUsername?d.checkFave(a.posting,function(b){b?d.updateFavorite(a,function(){var b='"/watchlist/questions/'+a.posting.postingId+'"';c.primary({title:"<a href="+b+">Question Sent!</a>",message:"<a href="+b+">This watchlist item has been updated. You'll be notified when the seller responds.</a>",delay:1e4})}):d.addFave(a.posting,function(){var b='"/watchlist/questions/'+a.posting.postingId+'"';c.primary({title:"<a href="+b+">Question Sent!</a>",message:"<a href="+b+">This item has been added to your watchlist. You'll be notified when the seller responds.</a>",delay:1e4})})}):a.posting.username===f.cachedUsername?b.getAllUserPosts(f.cachedUsername).then(function(b){var d='"/myposts/questions/'+a.question.postingId+'"';c.primary({title:"<a href="+d+">New Question</a>",message:"<a href="+d+">"+a.question.value+"</a>",delay:1e4})}):d.updateFavorite(a,function(){})}),f.postingSocket.on("answer",function(a){a.username===f.cachedUsername?d.updateFavorite(a,function(){var b='"/watchlist/questions/'+a.posting.postingId+'"';c.primary({title:"<a href="+b+">Question has been answered</a>",message:"<a href="+b+">"+a.answer.value+"</a>",delay:1e4})}):a.username!==a.posting.username&&d.updateFavorite(a,function(){})}),f.postingSocket.on("accept-offer",function(a){if(a.offer.proposals[a.offer.proposals.length-1].isOwnerReply)if(a.username===f.cachedUsername){d.updateFavorite(a,function(){});var e='"/watchlist/meetings/'+a.posting.postingId+'"';c.primary({title:"<a href="+e+">@"+a.posting.username+" accepted your offer.</a>",message:"<a href="+e+">Congrats! The seller has accepted your offer.  We'll send you a reminder email your way.</a>",delay:1e4})}else a.username!==a.posting.username&&b.getAllUserPosts(f.cachedUsername).then(function(a){});else a.username===f.cachedUsername?d.updateFavorite(a,function(){}):a.username!==a.posting.username&&b.getAllUserPosts(f.cachedUsername).then(function(b){var d='"/myposts/meetings/'+a.posting.postingId+'"';c.primary({title:"<a href="+d+">@"+a.username+" accepted your offer.</a>",message:"<a href="+d+">Congrats! The buyer has accepted your offer.  We'll send you a reminder email your way.</a>",delay:1e4})})}),f.postingSocket.on("decline-offer",function(a){a.username===f.cachedUsername?d.checkFave(a.posting,function(b){b&&d.updateFavorite(a,function(){var b='"/watchlist/meetings/'+a.posting.postingId+'"';c.primary({title:"<a href="+b+">Offer Cancelled!</a>",message:"<a href="+b+">The seller has been notified</a>",delay:1e4})})}):a.posting.username===f.cachedUsername?b.getAllUserPosts(f.cachedUsername).then(function(b){var d='"/myposts/meetings/'+a.posting.postingId+'"';c.primary({title:"<a href="+d+">Offer Cancelled</a>",message:"<a href="+d+">@"+a.username+" Had tocancel their offer.</a>",delay:1e4})}):d.updateFavorite(a,function(){})}),f.postingSocket.on("delete-question",function(a){a.username===f.cachedUsername?d.checkFave(a.posting,function(b){b&&d.updateFavorite(a,function(){})}):a.posting.username===f.cachedUsername?b.getAllUserPosts(f.cachedUsername).then(function(a){}):d.updateFavorite(a,function(){})}),f.postingSocket.on("posting",function(a){e.updateFeed(a)}),f.userSocket.on("reconnect",f.init),f.postingSocket.on("reconnect",f.init),f.init=function(a){if(a){f.cachedUsername=a;var b=a,c=a;f.joinUserRoom(b,c)}},f}]),htsApp.controller("splashController",["$scope","$rootScope","$modal","$state","splashFactory","metaFactory",function(a,b,c,d,e,f){var g=angular.copy(f.metatags),h=["$scope","$filter","sideNavFactory","uiGmapGoogleMapApi","favesFactory","qaFactory","transactionFactory","Session","socketio","authModalFactory",function(a,c,g,h,i,j,k,l,m,n){function o(a){var b=document.createElement("DIV");return b.innerHTML=a,b.textContent||b.innerText||""}if(a.userObj=l.userObj,a.result=e.result,a.result.heading&&(f.metatags.page.title=a.result.heading,f.metatags.facebook.title=a.result.heading,f.metatags.twitter.title=a.result.heading),a.result.body){var p=o(a.result.body);f.metatags.page.description=p,f.metatags.facebook.description=p,f.metatags.twitter.description=p}a.result.images.length&&(f.metatags.facebook.image=a.result.images[0].full||a.result.images[0].thumb||a.result.images[0].images,f.metatags.twitter.image=a.result.images[0].full||a.result.images[0].thumb||a.result.images[0].images),a.toggles={showCarousel:!0},h.then(function(b){a.map={settings:{center:{latitude:a.result.geo.coordinates[1],longitude:a.result.geo.coordinates[0]},options:{zoomControl:!1,panControl:!1,mapTypeControl:!1},zoom:14},marker:{id:0,coords:{latitude:a.result.geo.coordinates[1],longitude:a.result.geo.coordinates[0]}}}}),a.windowOptions={content:"please wait",disableAutoPan:!1},a.infoWindow={show:!1},a.onClick=function(){a.$apply(function(){a.infoWindow.show=!a.infoWindow.show})},a.closeClick=function(){a.infoWindow.show=!1},a.userObj.user_settings.loggedIn&&i.checkFave(a.result,function(b){a.favorited=b}),a.toggleFave=function(c){a.userObj.user_settings.loggedIn?a.favorited?i.removeFave(c,function(){a.favorited=!1,m.leavePostingRoom(c.postingId,"inWatchList")}):i.addFave(c,function(){a.favorited=!0,m.joinPostingRoom(c.postingId,"inWatchList")}):d.go("signup",{redirect:b.currentState})},a.result.external.threeTaps.location.formatted?a.windowOptions.content=a.result.external.threeTaps.location.formatted:!function(){var b=new google.maps.Geocoder,c=new google.maps.LatLng(a.result.geo.coordinates[0],a.result.geo.coordinates[1]);b.geocode({latLng:c},function(b,c){c===google.maps.GeocoderStatus.OK?b[1]&&(a.windowOptions.content=b[1].formatted_address):a.windowOptions.content="no address discovered"})}(),a.result.annotations&&(a.result.sanitized_annotations=e.sanitizeAnnotations(a.result.annotations)),a.sideNav=g.sideNav,a.toggleOffCanvasSideNav=function(){a.sideNav.hidden=!a.sideNav.hidden},a.questions=j.questions,a.getPostingIdQuestions=function(){j.getPostingIdQuestions(a.result.postingId).then(function(a){},function(a){})},a.qamodule={question:""},a.submitQuestion=function(c){var e=a.userObj.user_settings.loggedIn;if(e){var f=a.result,g=a.userObj.user_settings.name;m.joinPostingRoom(f.postingId,"inWatchList",function(){j.submitQuestion(c,f,g).then(function(b){a.qamodule.question=""},function(a){})})}else d.go("signup",{redirect:b.currentState})},a.emailSeller=function(a){k.quickCompose(a)},a.displayPhone=function(a){k.displayPhone(a)},a.placeOffer=function(a){k.placeOffer(a)},a.buyOnline=function(a){k.proposeDeal(a)},a.placeBid=function(a){k.placeBid(a)},a.showOriginal=function(a){k.showOriginal(a)}}],i=function(){var b=c.open({backdrop:!1,templateUrl:"js/splash/partials/splash_content.html",windowTemplateUrl:"js/splash/partials/splash_window.html",controller:h});b.result.then(function(a){},function(a){a||d.go("^")}),a.$on("$stateChangeStart",function(a,c,d,e,h){f.metatags.page=g.page,f.metatags.facebook=g.facebook,f.metatags.twitter=g.twitter,b.dismiss("direct")})};if(e.result)i();else{var j=d.params.id;e.lookupItemDetails(j).then(function(a){e.result=a.data,i()},function(a){})}}]),htsApp.directive("splashSideProfile",["splashFactory",function(a){return{restrict:"E",controller:["$scope","$element",function(b,c){if("HSHTG"===b.result.external.source.code){var d=b.result.username;a.getUserProfile(d).then(function(a){if(200!==a.status){a.data.error}else if(200===a.status){var d=a.data.user;b.result.user=d;var e=angular.element(c[0].querySelector(".profile"));e.css({"background-image":"url("+d.banner_photo+")","background-size":"cover"});var f=angular.element(c[0].querySelector(".bs-profile-image"));f.css({"background-image":"url("+d.profile_photo+")","background-size":"cover"});var g=angular.element(c[0].querySelector(".splash-bs-username"));g.html("@"+d.name)}},function(a){})}else{var e=angular.element(c[0].querySelector(".profile"));if(b.result.images.length){var f=b.result.images.length-1,g=b.result.images[f].thumb||b.result.images[f].images||b.result.images[f].full;e.css({"background-image":"url("+g+")","background-size":"cover"})}else e.css({"background-image":"url(https://static.hashtagsell.com/htsApp/placeholders/header-placeholder.png)","background-size":"cover"});var h=angular.element(c[0].querySelector(".splash-bs-username")),i=angular.element(c[0].querySelector(".bs-profile-image"));"APSTD"===b.result.external.source.code?(i.css({"background-image":"url(https://static.hashtagsell.com/logos/marketplaces/apartments_com_splash.png)","background-size":"cover"}),h.html("@apartments.com")):"AUTOD"===b.result.external.source.code?(i.css({"background-image":"url(https://static.hashtagsell.com/logos/marketplaces/autotrader_splash.png)","background-size":"cover"}),h.html("@autotrader.com")):"BKPGE"===b.result.external.source.code?(i.css({"background-image":"url(https://static.hashtagsell.com/logos/marketplaces/backpage_splash.png)","background-size":"cover"}),h.html("@backpage.com")):"CRAIG"===b.result.external.source.code?(i.css({"background-image":"url(https://static.hashtagsell.com/logos/marketplaces/craigslist_splash_v2.png)","background-size":"cover"}),h.html("@craigslist.com")):"EBAYM"===b.result.external.source.code?(i.css({"background-image":"url(https://static.hashtagsell.com/logos/marketplaces/ebay_motors_splash.png)","background-size":"cover"}),h.html("@ebaymotors.com")):"E_BAY"===b.result.external.source.code&&(i.css({"background-image":"url(https://static.hashtagsell.com/logos/marketplaces/ebay_splash.png)","background-size":"cover"}),h.html("@ebay.com"))}}]}}]),htsApp.factory("splashFactory",["$http","$location","$q","ENV",function(a,b,c,d){var e=new Hashtable;e.put("source_neighborhood","Neighborhood"),e.put("year","Year"),e.put("condition","Condition"),e.put("make","Make"),e.put("title_status","Title"),e.put("model","Model"),e.put("mileage","Mileage"),e.put("transmission","Transmission"),e.put("drive","Drive"),e.put("paint_color","Paint"),e.put("type","Type"),e.put("fuel","Fuel"),e.put("size","Size"),e.put("bathrooms","Bath"),e.put("available","Available"),e.put("no_smoking","Smoking"),e.put("bedrooms","Rooms"),e.put("dogs","Dogs"),e.put("cats","Cats"),e.put("attached_garage","Garage"),e.put("laundry_on_site","Laundry"),e.put("sqft","Sq Ft"),e.put("size_dimensions","Dimensions"),e.put("body_type","Body Type"),e.put("drive_type","Drive Type"),e.put("engine","Engine"),e.put("exterior_color","Exterior Color"),e.put("for_sale_by","Seller Type"),e.put("interior_color","Interior Color"),e.put("fuel_type","Fuel Type"),e.put("listing_type","Listing Type"),e.put("number_of_cylinders","Cylinders"),e.put("options","Options"),e.put("power_options","Power Options"),e.put("safety_features","Safety"),e.put("ship_to_location","Ship To"),e.put("trim","Trim"),e.put("vehicle_title","Title"),e.put("vin","Vin"),e.put("warranty","Warranty"),e.put("bodyStyle","Body Type"),e.put("drivetrain","Drive Train"),e.put("exteriorColor","Exterior Color"),e.put("interiorColor","Interior Color"),e.put("seller","Seller Type"),e.put("Year","Year"),e.put("Color","Color"),e.put("Brand","Brand"),e.put("Material Type","Material Type"),e.put("Model","Model"),e.put("Warranty","Warranty"),e.put("CPU Speed","Processor Speed"),e.put("CPU Type","Processor Type"),e.put("Display Size","Screen Size"),e.put("Operating System","OS Version"),e.put("System Memory Size","Memory"),e.put("Department","Department");var f={};return f.sanitizeAnnotations=function(a){var b={};return angular.forEach(a,function(a,c){if("string"==typeof c){var d=e.get(c);d&&(b[d]=a)}else{var f=a;if(f.value){var g=e.get(f.key);g&&(b[g]=f.value)}}}),b},f.getUserProfile=function(d){var e=c.defer(),f=b.protocol()+"://"+b.host()+":"+b.port()+"/getprofile?username="+d;return a({method:"GET",url:f}).then(function(a,b,c,d){e.resolve(a)},function(a,b,c,d){e.reject(a)}),e.promise},f.lookupItemDetails=function(b){var e=c.defer();return a({method:"GET",url:d.postingAPI+b}).then(function(a,b,c,d){e.resolve(a)},function(a,b,c,d){e.reject(a)}),e.promise},f}]),htsApp.factory("subMerchantFactory",["$q","$http","$modal","$log","ENV","Session",function(a,b,c,d,e,f){var g={};return g.validateSubMerchant=function(b){var e=a.defer(),g=f.getSessionValue("merchantAccount");if("active"===g.response.status||"pending"===g.response.status)e.resolve(g);else{var h=c.open({templateUrl:"js/submerchant/modals/partials/submerchant.modal.partial.html",controller:["$scope","$modalInstance","modalConfirmationService",function(a,b,c){a.close=function(){var a={closeButtonText:"Connect my Venmo",actionButtonText:"I only accept cash",headerText:"Accept Cash Only?",bodyText:"HashtagSell uses Venmo for free online transactions. To accept Venmo payments you need to set up an account."};c.showModal({},a).then(function(a){b.dismiss("abortSubMerchantModal")})}}]});h.result.then(function(a,b){},function(a,b){"subMerchantModalSuccess"===a?e.resolve(b):"abortSubMerchantModal"===a&&e.reject(),d.info("Modal dismissed at: "+new Date)})}return e.promise},g.registerPostForOnlinePayment=function(b){var c=a.defer();return c.promise},g}]),htsApp.directive("transactionButtons",function(){return{restrict:"E",scope:{result:"="},templateUrl:"js/transactionButtons/partials/transactionButtons.partial.html",controller:["$scope","transactionFactory",function(a,b){a.quickCompose=function(){b.quickCompose(a.result)},a.displayPhone=function(){b.displayPhone(a.result)},a.openSplash=function(){b.openSplash(a.result)},a.placeBid=function(){b.placeBid(a.result)},a.placeOffer=function(){b.placeOffer(a.result)}}]}}),htsApp.factory("transactionFactory",["Session","$modal","$rootScope","$log","$state","authModalFactory","quickComposeFactory","splashFactory","$window","$state",function(a,b,c,d,e,f,g,h,i,e){var j={};return j.quickCompose=function(h){if(a.userObj.user_settings.loggedIn)if("ask"===a.userObj.user_settings.email_provider[0].value){var i=b.open({templateUrl:"js/transactionButtons/modals/email/partials/transactionButtons.modal.email.partial.html",controller:"quickComposeController",resolve:{result:function(){return h}}});i.result.then(function(a){},function(a){"signUp"===a&&f.signUpModal(),d.info("Modal dismissed at: "+new Date)})}else g.generateMailTo(a.userObj.user_settings.email_provider[0].value,h);else e.go("signup",{redirect:c.currentState})},j.displayPhone=function(g){if(a.userObj.user_settings.loggedIn){var h=b.open({templateUrl:"js/transactionButtons/modals/phone/partials/transactionButtons.modal.phone.partial.html",controller:"phoneModalController",resolve:{result:function(){return g}}});h.result.then(function(a){},function(a){"signUp"===a&&f.signUpModal(),d.info("Modal dismissed at: "+new Date)})}else e.go("signup",{redirect:c.currentState})},j.openSplash=function(a){h.result=a,e.go("results.splash",{id:a.external.source.url})},j.placeBid=function(b){a.userObj.user_settings.loggedIn?i.open(b.external.source.url):e.go("signup",{redirect:c.currentState})},j.showOriginal=function(b){a.userObj.user_settings.loggedIn?i.open(b.external.source.url):e.go("signup",{redirect:c.currentState})},j.placeOffer=function(g){if(a.userObj.user_settings.loggedIn){var h=b.open({templateUrl:"js/transactionButtons/modals/placeOffer/partials/transactionButtons.modal.placeOffer.partial.html",controller:"placeOfferController",resolve:{result:function(){return g}}});h.result.then(function(a){},function(a){"signUp"===a&&f.signUpModal(),d.info("Modal dismissed at: "+new Date)})}else e.go("signup",{redirect:c.currentState})},j.proposeDeal=function(g,h){if(a.userObj.user_settings.loggedIn){var i=b.open({templateUrl:"js/transactionButtons/modals/proposeDeal/partials/transactionButtons.modal.proposeDeal.partial.html",controller:"proposeDealController",resolve:{result:function(){return g},offerIndex:function(){return h}}});i.result.then(function(a){},function(a){"signUp"===a&&f.signUpModal(),d.info("Modal dismissed at: "+new Date)})}else e.go("signup",{redirect:c.currentState})},j.buyNow=function(f){if(a.userObj.user_settings.loggedIn){var g=b.open({templateUrl:"js/transactionButtons/modals/buyNow/partials/transactionButtons.modal.buyNow.partial.html",controller:"buyNowModalController",resolve:{result:function(){return f}}});g.result.then(function(a){},function(a){if("venmo"===a){var b="https://venmo.com/?txn=pay&recipients="+f.user.merchantAccount.details.funding.email+"&amount="+f.askingPrice.value+"&note="+f.heading+"&audience=private";i.open(b)}else"meetingRequest"===a&&j.proposeDeal(f);d.info("Modal dismissed at: "+new Date)})}else e.go("signup",{redirect:c.currentState})},j}]),htsApp.controller("buyNowModalController",["$scope","$modalInstance","result",function(a,b,c){a.result=c,a.yes=function(){b.dismiss("venmo")},a.no=function(){b.dismiss("meetingRequest")},a.dismiss=function(a){b.dismiss(a)}}]),htsApp.controller("quickComposeController",["$scope","$modalInstance","quickComposeFactory","Session","$window","result",function(a,b,c,d,e,f){a.userObj=d.userObj,a.emailOptionsObject=[{name:"Use Default Mail Client",value:"mailto"},{name:"Gmail",value:"gmail"},{name:"Yahoo",value:"yahoo"},{name:"Hotmail",value:"hotmail"},{name:"AOL",value:"aol"}],a.selected="mailto",a.qcEmail=function(){a.setDefaultEmailProvider&&c.setDefaultEmailProvider(a.selected),c.generateMailTo(a.selected,f),b.dismiss("auto-compose complete")},a.dismiss=function(a){b.dismiss(a)}}]),htsApp.factory("quickComposeFactory",["Session","$window",function(a,b){var c={};return c.generateMailTo=function(a,c){var d="";if(c.length){var e="";for(i=0;i<c.length;i++)c[i].annotations.source_account&&(e+=c[i].annotations.source_account+",");switch(a){case"gmail":d="https://mail.google.com/mail/?view=cm&fs=1&bcc="+e+"&su=I'd like to buy your item...&body=HashtagSell.com - Re-thinking Online Classifieds",b.open(d);break;case"yahoo":d="http://compose.mail.yahoo.com/?bcc="+e+"&subject=I'd like to buy your item...&body=HashtagSell.com - Re-thinking Online Classifieds",b.open(d);break;case"hotmail":d="https://mail.live.com/default.aspx?rru=compose&bcc="+e+"&subject=I'd like to buy your item...&body=HashtagSell.com - Re-thinking Online Classifieds",b.open(d);break;case"aol":d="http://mail.aol.com/mail/compose-message.aspx?bcc="+e+"&subject=I'd like to buy your item...&body=HashtagSell.com - Re-thinking Online Classifieds",b.open(d);break;case"mailto":d="mailto:?bcc="+e+"&subject=I'd like to buy your item...&body=HashtagSell.com - Re-thinking Online Classifieds",b.open(d)}}else switch(a){case"gmail":d="https://mail.google.com/mail/?view=cm&fs=1&to="+c.annotations.source_account+"&su="+c.heading+"&body="+c.external.source.url,b.open(d);break;case"yahoo":d="http://compose.mail.yahoo.com/?to="+c.annotations.source_account+"&subject="+c.heading+"&body="+c.external.source.url,
b.open(d);break;case"hotmail":d="https://mail.live.com/default.aspx?rru=compose&to="+c.annotations.source_account+"&subject="+c.heading+"&body="+c.external.source.url,b.open(d);break;case"aol":d="http://mail.aol.com/mail/compose-message.aspx?to="+c.annotations.source_account+"&subject="+c.heading+"&body="+c.external.source.url,b.open(d);break;case"mailto":d="mailto:"+c.annotations.source_account+"?Subject="+c.heading+"&body="+c.external.source.url,b.open(d)}},c.setDefaultEmailProvider=function(b){var c;switch(b){case"ask":c=[{name:"Always Ask",value:"ask"}];break;case"gmail":c=[{name:"Gmail",value:"gmail"}];break;case"yahoo":c=[{name:"Yahoo",value:"yahoo"}];break;case"hotmail":c=[{name:"Hotmail",value:"hotmail"}];break;case"aol":c=[{name:"AOL",value:"aol"}];break;case"mailto":c=[{name:"Use Default Mail Client",value:"mailto"}]}a.setSessionValue("email_provider",c,function(){})},c}]),htsApp.controller("phoneModalController",["$scope","$modalInstance","Session","result",function(a,b,c,d){a.userObj=c.userObj,a.result=d,a.dismiss=function(a){b.dismiss(a)}}]),htsApp.controller("placeOfferController",["$scope","$modalInstance","Session","result","ENV","$filter","meetingsFactory","favesFactory","socketio",function(a,b,c,d,e,f,g,h,i){a.userObj=c.userObj,a.result=d,a.disableSubmission=!0,a.offer={proposedTimes:[],username:a.userObj.user_settings.name},a.onTimeSet=function(b,c){a.dropDownStatus.isOpen=!1,b=f("date")(b,"yyyy-MM-ddTHH:mm:ssZ"),a.addProposedTime(b),a.data.dateDropDownInput=null},a.dropDownStatus={isOpen:!1},a.dismiss=function(a){b.dismiss(a)},a.addProposedTime=function(b){a.offer.proposedTimes.push({when:b,where:d.external.threeTaps.location.formatted}),a.disableSubmission=a.validateProposal()},a.removeProposedTime=function(b){a.offer.proposedTimes.splice(b,1),a.disableSubmission=a.validateProposal()},a.validateProposal=function(){return a.offer.proposedTimes.length<1},a.sendOffer=function(){i.joinPostingRoom(a.result.postingId,"inWatchList",function(){g.sendOffer(a.result,a.offer).then(function(b){a.dismiss("offer sent")},function(b){a.dismiss("error"),alert(b)})})}}]),htsApp.controller("proposeDealController",["$scope","$modalInstance","$q","Session","result","offerIndex","ENV","$filter","meetingsFactory","favesFactory","socketio","Notification",function(a,b,c,d,e,f,g,h,i,j,k,l){a.userObj=d.userObj,a.result=e,a.deal={item:null,price:null,location:null,comment:null,when:null,declinedTimes:[]},a.offers={proposals:[],username:null},a.slots=[{start:300,stop:420,day:1},{start:60,stop:120,day:1}],a.error={price:null,when:null,where:null},a.button={text:"Send offer"};var m=!1;i.getOffers(a.result).then(function(b){if(void 0===f){for(var c=0;c<b.data.offers.results.length;c++){var d=b.data.offers.results[c];if(d.username===a.userObj.user_settings.name){a.button.text="Send counter offer",a.offers=d,m=!0,a.deal.item=a.result.heading,a.deal.price=a.offers.proposals[a.offers.proposals.length-1].price.value,a.deal.location=a.offers.proposals[a.offers.proposals.length-1].where,a.deal.comment=a.offers.proposals[a.offers.proposals.length-1].comment||"",a.deal.when=a.offers.proposals[a.offers.proposals.length-1].when;break}}m||(a.deal.item=a.result.heading,a.deal.price=a.result.askingPrice.value,a.deal.location=a.result.external.threeTaps.location.formatted,a.deal.when=null)}else a.button.text="Send counter offer",a.offers=b.data.offers.results[f],m=!0,a.deal.item=a.result.heading,a.deal.price=a.offers.proposals[a.offers.proposals.length-1].price.value,a.deal.location=a.offers.proposals[a.offers.proposals.length-1].where,a.deal.when=a.offers.proposals[a.offers.proposals.length-1].when},function(a){l.error({title:"Failed to lookup offers on this post",message:a.message,delay:1e4})}),a.dismiss=function(a){b.dismiss(a)},a.counterOffer=function(){a.deal.price?a.deal.when?a.deal.location?void 0===f?k.joinPostingRoom(a.result.postingId,"inWatchList",function(){a.offers.proposals.push({comment:a.deal.comment,price:{currency:a.result.askingPrice.currency,value:a.deal.price},when:a.deal.when,where:a.deal.location}),a.offers.username=a.userObj.user_settings.name,m?i.updateOffer(a.result,a.offers).then(function(b){a.dismiss("offer sent")},function(b){a.dismiss("error"),alert(b)}):i.sendOffer(a.result,a.offers).then(function(b){a.dismiss("offer sent")},function(b){a.dismiss("error"),alert(b)})}):(a.offers.proposals.push(a.result.username===a.userObj.user_settings.name?{comment:a.deal.comment,isOwnerReply:!0,price:{currency:a.result.askingPrice.currency,value:a.deal.price},when:a.deal.when,where:a.deal.location}:{comment:a.deal.comment,isOwnerReply:!1,price:{currency:a.result.askingPrice.currency,value:a.deal.price},when:a.deal.when,where:a.deal.location}),i.updateOffer(a.result,a.offers).then(function(b){a.dismiss("offer sent")},function(b){a.dismiss("error"),alert(b)})):a.error.where="Please propose a meeting location":a.error.when="Please propose a day and time":a.error.price="Please propose a price"},a.predictAddress=function(b){return a.predictPlace(b).then(function(a){return a.map(function(a){return a})})},a.predictPlace=function(a){var b=new google.maps.LatLngBounds(new google.maps.LatLng(37.79738,-122.52464),new google.maps.LatLng(37.68879,-122.36122)),d={input:a,bounds:b,componentRestrictions:{country:"US"}},e=new google.maps.places.AutocompleteService,f=c.defer();return e.getPlacePredictions(d,function(a,b){f.resolve(a)}),f.promise},a.setAddressComponents=function(b){a.deal.location=b.description}}]),htsApp.controller("userMenu",["$scope","Session","authModalFactory","$modal","newPostFactory",function(a,b,c,d,e){a.userObj=b.userObj,a.logout=function(){b.destroy()},a.newPost=function(){var b=d.open({templateUrl:"/js/newPost/modals/newPost/partials/newpost.html",controller:"newPostModal",size:"lg",resolve:{mentionsFactory:function(){return e}}});b.result.then(function(b){a.modalContent.selected=b},function(){})}}]),htsApp.factory("utilsFactory",["ENV",function(a){var b={};return b.bracketNotationURL=function(a,c,d){d=d||[];var e=0;for(var f in a)if(e++,a.hasOwnProperty(f))if(c||d.length?e>1&&d.length&&-1===c.indexOf("[")?c="&"+f:e>1&&d.length&&-1!==c.indexOf("[")?c=c.replace(/\[(.+?)\]/g,"["+f+"]"):c+="["+f+"]":c="?"+f,"object"==typeof a[f]&&null!==a[f]&&a[f].constructor!==Array)b.bracketNotationURL(a[f],c,d);else{var g=c;g+=a[f].constructor===Array?"="+a[f].join():"="+a[f],d.push(g)}return d.join("")},b}]),htsApp.factory("categoryFactory",["$http","$q","ENV",function(a,b,c){var d={};return d.lookupCategories=function(){var d=b.defer();return a({method:"GET",url:c.groupingsAPI}).then(function(a,b,c,e){d.resolve(a)},function(a,b,c,e){d.reject(a)}),d.promise},d}]),htsApp.factory("ebayFactory",["$q","$http","$window","$rootScope","$timeout","$interval","ENV","Session","Notification",function(a,b,c,d,e,f,g,h,i){var j={};j.publishToEbay=function(c){var d=a.defer(),e=h.getSessionValue("ebay"),f={ebay:{token:e.eBayAuthToken}};return c.facebook&&(f.facebook=c.facebook),c.twitter&&(f.twitter=c.twitter),c.amazon&&(f.amazon=c.amazon),c.craigslist&&(f.craigslist=c.craigslist),c.payment&&(f.payment=c.payment),b.post(g.postingAPI+c.postingId+"/publish",f).success(function(a){d.resolve(a)}).error(function(a){d.reject(a)}),d.promise},j.getEbaySessionID=function(){var d=a.defer(),e=c.open(g.htsAppUrl+"/ebayauth","","width=1020, height=500");return b({method:"GET",url:g.ebayAuth+"/sessionId"}).then(function(a){var c=a.data.GetSessionIDResponse.SessionID,h=g.ebaySignIn+"?SignIn&RUName="+g.ebayRuName+"&SessID="+c;e.location=h;var i=0,j=f(function(){e.closed?(f.cancel(j),d.reject({message:"Looks like you closed the Ebay login window.  Please try again.",delay:1e4})):b({method:"GET",url:g.ebayAuth+"/fetchToken",params:{sessionId:c}}).then(function(a){a.data.success?(e.close(),f.cancel(j),d.resolve(a)):30===i?(f.cancel(j),e.close(),a.data.sessionId=c,d.reject({message:"Ebay login timed out.  Please try again.",delay:1e4})):i++})},2e3)},function(a){d.reject(a)}),d.promise},j.disconnectEbay=function(){h.setSessionValue("ebay",{},function(){})},j.checkIfTokenValid=function(){var b=a.defer(),c=h.getSessionValue("ebay");return j.isEmpty(c)?j.getEbaySessionID().then(function(a){h.setSessionValue("ebay",a.data.ebay,function(){})},function(a){b.reject(a)}):b.resolve(),b.promise};var k=Object.prototype.hasOwnProperty;return j.isEmpty=function(a){if(null===a)return!0;if(a.length>0)return!1;if(0===a.length)return!0;for(var b in a)if(k.call(a,b))return!1;return!0},j}]),htsApp.factory("facebookFactory",["$q","ENV","$http","Session","ezfb",function(a,b,c,d,e){var f={};f.publishToWall=function(f){function g(a){var b=document.createElement("DIV");return b.innerHTML=a,b.textContent||b.innerText||""}var h=a.defer(),i=d.getSessionValue("facebook"),j=$("<div>"+f.body+"</div>");$(j.find(".mention-highlighter")).each(function(a){var b=$(this).text();b=b.replace(/ /g,""),$(this).text(b)}),$(j.find(".mention-highlighter-location")).each(function(a){var b=$(this).text();b=b.replace("@","at "),$(this).text(b)}),f.plainTextBody=g(j.html());var k=null;return k=f.images.length?{message:f.plainTextBody+b.htsAppUrl+"/feed/"+f.postingId,picture:f.images[0].full||f.images[0].thumbnail,access_token:i.token}:{message:f.plainTextBody+b.htsAppUrl+"/feed/"+f.postingId,link:b.htsAppUrl+"/feed/"+f.postingId,access_token:i.token},e.api("/me/feed","post",k,function(a){if(a.error)h.reject(a);else{var d={facebook:a};f.twitter&&(d.twitter=f.twitter),f.amazon&&(d.amazon=f.amazon),f.ebay&&(d.ebay=f.ebay),f.craigslist&&(d.craigslist=f.craigslist),f.payment&&(d.payment=f.payment),c.post(b.postingAPI+f.postingId+"/publish",d).success(function(a){h.resolve(a)}).error(function(a){h.reject(a)})}}),h.promise},f.disconnectFacebook=function(){d.setSessionValue("facebook",{},function(){})},f.checkIfTokenValid=function(){var b=a.defer(),c=d.getSessionValue("facebook"),g=new Date;return!f.isEmpty(c)&&c.tokenExpiration>g||!f.isEmpty(c)&&!c.tokenExpiration||e.login(function(a){if(a.authResponse)if("email,contact_email,publish_actions,public_profile"===a.authResponse.grantedScopes){var c=new Date;c.setSeconds(a.authResponse.expiresIn);var f={id:a.authResponse.userID,token:a.authResponse.accessToken,tokenExpiration:c};e.api("/me",function(a){!a||a.error?b.reject({message:"Facebook failed to hand back user credentials",delay:1e4}):(f.email=a.email,f.name=a.first_name+" "+a.last_name,d.setSessionValue("facebook",f,function(){b.resolve()}))})}else b.reject({message:"Need correct Facebook permissions to publish",delay:1e4});else b.reject({message:"Could not complete Facebook login.",delay:1e4})},{scope:"email, publish_actions",return_scopes:!0}),b.promise};var g=Object.prototype.hasOwnProperty;return f.isEmpty=function(a){if(null===a)return!0;if(a.length>0)return!1;if(0===a.length)return!0;for(var b in a)if(g.call(a,b))return!1;return!0},f}]),htsApp.factory("geoFactory",["$q","$http","ENV",function(a,b,c){var d={};return d.geolocateUser=function(){var d=a.defer();return b.get(c.utilsApi+"geolocate").success(function(a){d.resolve(a)}).error(function(a){var b={message:"Whoops.. We can't find any results in "+userLocationObject.freeGeoIp.city,error:a};d.reject(b)}),d.promise},d}]),htsApp.factory("twitterFactory",["$q","$http","$window","$interval","ENV","Session",function(a,b,c,d,e,f){var g={};g.publishToTwitter=function(c){function d(a){var b=document.createElement("DIV");return b.innerHTML=a,b.textContent||b.innerText||""}var g=a.defer(),h=f.getSessionValue("twitter"),i=$("<div>"+c.body+"</div>");return $(i.find(".mention-highlighter")).each(function(a){var b=$(this).text();b=b.replace(/ /g,""),$(this).text(b)}),$(i.find(".mention-highlighter-location")).each(function(a){var b=$(this).text();b=b.replace("@","at "),$(this).text(b)}),c.plainTextBody=d(i.html()),b({method:"POST",url:e.htsAppUrl+"/publishTweet",data:{posting:c,token:h.token,tokenSecret:h.tokenSecret}}).then(function(a){var d={twitter:{id:a.data.id}};c.facebook&&(d.facebook=c.facebook),c.amazon&&(d.amazon=c.amazon),c.ebay&&(d.ebay=c.ebay),c.craigslist&&(d.craigslist=c.craigslist),c.payment&&(d.payment=c.payment),b.post(e.postingAPI+c.postingId+"/publish",d).success(function(a){g.resolve(a)}).error(function(a){g.reject(a)})},function(a){g.reject(a)}),g.promise},g.disconnectTwitter=function(){f.setSessionValue("twitter",{},function(){})},g.checkIfTokenValid=function(){var b=a.defer(),h=f.getSessionValue("twitter");if(g.isEmpty(h))var i=c.open(e.htsAppUrl+"/auth/twitter","","width=1020, height=500"),j=0,k=d(function(){i.closed?(d.cancel(k),b.reject({message:"Looks like you closed the Twitter login window.  Please try again.",delay:1e4})):f.getUserFromServer().then(function(a){a.user_settings.linkedAccounts.twitter.token?(d.cancel(k),i.close(),f.create(a)):30===j?(d.cancel(k),i.close(),b.reject({message:"Twitter login timed out.  Please try again.",delay:1e4})):j++})},2e3);else b.resolve();return b.promise};var h=Object.prototype.hasOwnProperty;return g.isEmpty=function(a){if(null===a)return!0;if(a.length>0)return!1;if(0===a.length)return!0;for(var b in a)if(h.call(a,b))return!1;return!0},g}]),htsApp.controller("watchlistController",["$scope","$rootScope","favesFactory","splashFactory","$state","ngTableParams","$filter","Session","quickComposeFactory","$modal","$log","modalConfirmationService",function(a,b,c,d,e,f,g,h,j,k,l,m){a.currentFaves=h.userObj.user_settings.favorites,c.tableParams=new f({page:1,count:2e3,filter:{},sorting:{}},{counts:[],total:a.currentFaves.length,getData:function(b,d){var e=g("filter")(a.currentFaves,c.filterString),f=d.sorting()?g("orderBy")(e,d.orderBy()):e;d.total(f.length),b.resolve(f.slice((d.page()-1)*d.count(),d.page()*d.count()))}}),a.tableParams=c.tableParams,a.tableParams.settings().$scope=a,a.$on("$stateChangeSuccess",function(b,c,d,e,f){a.currentState=c.name,a.expandedPostingId=d.postingId}),a.removeFave=function(a){var b={closeButtonText:"Cancel",actionButtonText:"Remove",headerText:"Remove from Watch List?",bodyText:"You will no longer receive notifications relating to this item."};m.showModal({},b).then(function(b){c.removeFave(a,function(){c.refreshTable()})})},a.checkboxes={checked:!1,items:{}},a.$watch("checkboxes.items",function(b){if(a.currentFaves){var c=0,d=0;totalFaves=a.currentFaves.length,angular.forEach(a.currentFaves,function(b){c+=a.checkboxes.items[b.postingId]||0,d+=!a.checkboxes.items[b.postingId]||0}),(0===d&&0!==totalFaves||0===c&&0!==totalFaves)&&(a.checkboxes.masterCheck=c==totalFaves),0===c||0===totalFaves?a.checkboxes.checked=!1:a.checkboxes.checked=!0,angular.element(document.getElementById("select_all")).prop("indeterminate",0!==c&&0!==d)}},!0),a.$watch("checkboxes.masterCheck",function(b){angular.forEach(a.currentFaves,function(c){angular.isDefined(c.postingId)&&(a.checkboxes.items[c.postingId]=b)})}),a.filters={$:""},a.$watch("filters.$",function(b){c.filterString=b,a.tableParams.reload()}),a.batchRemoveFaves=function(b){c.batchRemoveFaves(b),a.checkboxes={checked:!1,items:{}}},a.batchEmail=function(b){var c=a.currentFaves,d=[];if(angular.forEach(b.items,function(a,b){if(a)for(i=0;i<c.length;i++)c[i].postingId==b&&d.push(c[i])}),"ask"===h.userObj.user_settings.email_provider[0].value){var e=k.open({templateUrl:"/js/transactionButtons/modals/email/partials/transactionButtons.modal.email.partial.html",controller:"quickComposeController",resolve:{result:function(){return d}}});e.result.then(function(a){},function(a){"signUp"===a&&authModalFactory.signUpModal(),l.info("Modal dismissed at: "+new Date)})}else j.generateMailTo(h.userObj.user_settings.email_provider[0].value,d)},a.UserLabels=c.getUserLabels(),a.selected_labels=[],a.preselected={name:[]},a.openSplash=function(a){d.result=a,e.go("watchlist.splash",{id:a.postingId})},a.expandCollapseQuestions=function(a,c){a.stopPropagation(),"watchlist.questions"!==b.currentState?(c.currentlyViewing={questions:!0,meetings:!1},e.go("watchlist.questions",{postingId:c.postingId})):(c.currentlyViewing={questions:!1,meetings:!1},e.go("^"))},a.expandCollapseMeetingRequests=function(a,c){a.stopPropagation(),"watchlist.meetings"!==b.currentState?(c.currentlyViewing={questions:!1,meetings:!0},e.go("watchlist.meetings",{postingId:c.postingId})):(c.currentlyViewing={questions:!1,meetings:!1},e.go("^"))}}]),htsApp.factory("favesFactory",["Session","myPostsFactory",function(a,b){var c={};return c.currentFavorites=a.userObj.user_settings.favorites,c.addFave=function(c,d){var e=_.some(a.userObj.user_settings.favorites,function(a){return a.postingId===c.postingId});e||("HSHTG"===c.external.source.code?b.getPostingIdQuestionsAndOffers(c.postingId).then(function(b){var c=b.data;a.userObj.user_settings.favorites.push(c),a.setSessionValue("favorites",a.userObj.user_settings.favorites,d)}):(a.userObj.user_settings.favorites.push(c),a.setSessionValue("favorites",a.userObj.user_settings.favorites,d)))},c.removeFave=function(b,c){var d=a.userObj.user_settings.favorites,e=[];_.some(d,function(a){a.postingId==b.postingId&&e.push(d.indexOf(a))}),e.length>0&&(d.splice(e[0],1),a.setSessionValue("favorites",d,c))},c.updateFavorite=function(d,e){for(var f,g=a.userObj.user_settings.favorites,h=0;h<g.length;h++){var i=g[h];if(i.postingId===d.posting.postingId){f=h;break}}f>=0&&b.getPostingIdQuestionsAndOffers(d.posting.postingId).then(function(b){var d=b.data;a.userObj.user_settings.favorites[f]=d;try{c.refreshTable()}catch(g){}finally{a.setSessionValue("favorites",a.userObj.user_settings.favorites,e)}})},c.checkFave=function(b,c){var d=a.userObj.user_settings.favorites,e=[];_.some(d,function(a){a.postingId==b.postingId&&e.push(d.indexOf(a))}),c(e.length>0?!0:!1)},c.refreshTable=function(){c.tableParams.reload()},c.filterString="",c.batchRemoveFaves=function(a){angular.forEach(a.items,function(a,b){if(a){var d={};d.postingId=b,c.removeFave(d,function(){c.refreshTable()})}})},c.addFavoriteLabel=function(b){var c=a.userObj;c.user_settings.user_labels||(c.user_settings.user_labels=[]),c.user_settings.user_labels.push(b),a.setSessionValue("user_labels",c.user_settings.user_labels)},c.removeFavoriteLabel=function(b,c){var d=a.userObj;d.user_settings.user_labels=_.without(d.user_settings.user_labels,_.findWhere(d.user_settings.user_labels,b)),a.setSessionValue("user_labels",d.user_settings.user_labels);var e=[];_.each(d.user_settings.favorites,function(a){a.labels=_.without(a.labels,_.findWhere(a.labels,b.name)),e.push(a)}),d.user_settings.favorites=e,a.setSessionValue("favorites",d.user_settings.favorites,c)},c.getUserLabels=function(){return a.getSessionValue("user_labels")},c}]),htsApp.controller("watchlist.meetings.controller",["$scope","$element","Session","meetingsFactory","Notification","favesFactory","transactionFactory",function(a,b,c,d,e,f,g){a.userObj=c.userObj,a.toggled=function(a){},"HSHTG"===a.post.external.source.code&&(a.cachedOffers=angular.copy(a.post.offers.results)),a.acceptedTime={model:void 0},a.errors={message:null},a.counterOffer=function(b,c){var d=b;g.proposeDeal(a.post,d)},a.acceptDeal=function(b,c){if(a.acceptedTime.model){var f={acceptedAt:moment().format(),price:c.price,when:a.acceptedTime.model,where:c.where,isOwnerReply:!1},g=a.post.offers.results[b];d.acceptOffer(a.post,g,f).then(function(a){201===a.status?e.primary({title:"Sent Offer Acceptanace!",message:"We've notified @"+g.username+".  Expect an email shortly.",delay:7e3}):e.error({title:a.name,message:a.message,delay:2e4})},function(a){e.error({title:a.data.name,message:a.data.message,delay:2e4})})}else a.errors.message="Please select a proposed time from above."},a.cancelOffer=function(a,b){d.deleteOffer(a,b).then(function(a){204===a.status||e.error({title:a.name,message:a.message,delay:2e4})},function(a){e.error({title:a.data.name,message:a.data.message,delay:2e4})})}}]),htsApp.directive("constructWishListOverlayMessage",function(){return{scope:{offer:"=",post:"="},restrict:"EA",link:function(a,b,c){a.offer.proposals[a.offer.proposals.length-1].acceptedAt?c.$set("message","Awesome!  We'll send you a reminder email with details."):c.$set("message","Offer sent to @"+a.post.username)}}}),htsApp.directive("senderMeetingsMoreInfo",function(){return{restrict:"E",scope:{post:"="},templateUrl:"js/watchlist/meetings/partials/watchlist.meetings.html",controller:"watchlist.meetings.controller"}}),htsApp.controller("watchlist.questions.controller",["$scope","qaFactory","$state","Notification","myPostsFactory","Session",function(a,b,c,d,e,f){a.userObj=f.userObj,a.showAnswered=!1,a.toggled=function(a){},a.deleteQuestion=function(a,c){b.deleteQuestion(a,c).then(function(a){204===a.status||d.error({title:a.name,message:a.message})},function(a){})}}]),htsApp.directive("senderQuestionsMoreInfo",function(){return{restrict:"E",scope:{post:"="},templateUrl:"js/watchlist/questions/partials/watchlist.questions.html",controller:"watchlist.questions.controller"}}),htsApp.factory("watchlistQuestionsFactory",["$http","$rootScope","ENV","$q","utilsFactory",function(a,b,c,d,e){var f={};return f.questions={store:[]},f.getPostingIdQuestions=function(b){var g=d.defer(),h={postingId:b,questions:!0,count:100};return a({method:"GET",url:c.postingAPI+b+e.bracketNotationURL(h)}).then(function(a,b,c,d){200===a.status?(f.questions.store=a.data.questions.results,g.resolve(a)):g.reject(a)},function(a,b,c,d){g.reject(a)}),g.promise},f.submitQuestion=function(b,e,g){var h=d.defer(),i=e.postingId,j={username:g,value:b};return a({method:"POST",url:c.postingAPI+i+"/questions",data:j}).then(function(a,b,c,d){f.getPostingIdQuestions(i).then(function(a){h.resolve(a)},function(a){h.reject(a)})},function(a,b,c,d){h.reject(a)}),h.promise},f.deleteQuestion=function(b,e){var g=d.defer();return a({method:"DELETE",url:c.postingAPI+b+"/questions/"+e}).then(function(a,c,d,e){f.getPostingIdQuestions(b).then(function(a){g.resolve(a)},function(a){g.reject(a)})},function(a,b,c,d){g.reject(a)}),g.promise},f.deleteAnswer=function(b,e,g){var h=d.defer();return a({method:"DELETE",url:c.postingAPI+b+"/questions/"+e+"/answers/ "+g}).then(function(a,c,d,e){f.getPostingIdQuestions(b).then(function(a){h.resolve(a)},function(a){h.reject(a)})},function(a,b,c,d){h.reject(a)}),h.promise},f}]),angular.module("htsApp").run(["$templateCache",function(a){"use strict";a.put("js/404/partials/404.html",'<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="utf-8">\n    <title>Page Not Found :(</title>\n    <style>\n        ::-moz-selection {\n            background: #b3d4fc;\n            text-shadow: none;\n        }\n\n        ::selection {\n            background: #b3d4fc;\n            text-shadow: none;\n        }\n\n        html {\n            padding: 30px 10px;\n            font-size: 20px;\n            line-height: 1.4;\n            color: #737373;\n            background: #f0f0f0;\n            -webkit-text-size-adjust: 100%;\n            -ms-text-size-adjust: 100%;\n        }\n\n        html,\n        input {\n            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n        }\n\n        body {\n            max-width: 500px;\n            _width: 500px;\n            padding: 30px 20px 50px;\n            border: 1px solid #b3b3b3;\n            border-radius: 4px;\n            margin: 0 auto;\n            box-shadow: 0 1px 10px #a7a7a7, inset 0 1px 0 #fff;\n            background: #fcfcfc;\n        }\n\n        h1 {\n            margin: 0 10px;\n            font-size: 50px;\n            text-align: center;\n        }\n\n        h1 span {\n            color: #bbb;\n        }\n\n        h3 {\n            margin: 1.5em 0 0.5em;\n        }\n\n        p {\n            margin: 1em 0;\n        }\n\n        ul {\n            padding: 0 0 0 40px;\n            margin: 1em 0;\n        }\n\n        .container {\n            max-width: 380px;\n            _width: 380px;\n            margin: 0 auto;\n        }\n\n        /* google search */\n\n        #goog-fixurl ul {\n            list-style: none;\n            padding: 0;\n            margin: 0;\n        }\n\n        #goog-fixurl form {\n            margin: 0;\n        }\n\n        #goog-wm-qt,\n        #goog-wm-sb {\n            border: 1px solid #bbb;\n            font-size: 16px;\n            line-height: normal;\n            vertical-align: top;\n            color: #444;\n            border-radius: 2px;\n        }\n\n        #goog-wm-qt {\n            width: 220px;\n            height: 20px;\n            padding: 5px;\n            margin: 5px 10px 0 0;\n            box-shadow: inset 0 1px 1px #ccc;\n        }\n\n        #goog-wm-sb {\n            display: inline-block;\n            height: 32px;\n            padding: 0 10px;\n            margin: 5px 0 0;\n            white-space: nowrap;\n            cursor: pointer;\n            background-color: #f5f5f5;\n            background-image: -webkit-linear-gradient(rgba(255,255,255,0), #f1f1f1);\n            background-image: -moz-linear-gradient(rgba(255,255,255,0), #f1f1f1);\n            background-image: -ms-linear-gradient(rgba(255,255,255,0), #f1f1f1);\n            background-image: -o-linear-gradient(rgba(255,255,255,0), #f1f1f1);\n            -webkit-appearance: none;\n            -moz-appearance: none;\n            appearance: none;\n            *overflow: visible;\n            *display: inline;\n            *zoom: 1;\n        }\n\n        #goog-wm-sb:hover,\n        #goog-wm-sb:focus {\n            border-color: #aaa;\n            box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\n            background-color: #f8f8f8;\n        }\n\n        #goog-wm-qt:hover,\n        #goog-wm-qt:focus {\n            border-color: #105cb6;\n            outline: 0;\n            color: #222;\n        }\n\n        input::-moz-focus-inner {\n            padding: 0;\n            border: 0;\n        }\n    </style>\n</head>\n<body>\n<div class="container">\n    <h1>Not found <span>:(</span></h1>\n    <p>Sorry, but the page you were trying to view does not exist.</p>\n    <p>It looks like this was the result of either:</p>\n    <ul>\n        <li>a mistyped address</li>\n        <li>an out-of-date link</li>\n    </ul>\n    <!--<script>-->\n        <!--var GOOG_FIXURL_LANG = (navigator.language || \'\').slice(0,2),GOOG_FIXURL_SITE = location.host;-->\n    <!--</script>-->\n    <!--<script src="//linkhelp.clients.google.com/tbproxy/lh/wm/fixurl.js"></script>-->\n</div>\n</body>\n</html>\n'),a.put("js/authModals/modals/betaCheckModal/partials/betaCheck.html",'<style>\n    .bike-background {\n        background: url("//static.hashtagsell.com/htsApp/backdrops/flyingPigeon_dark_compressed.jpg") no-repeat center center fixed;\n        background-size: cover;\n        border-radius: 5px 5px 0px 0px;\n        height: 100%;\n        width: 100%;\n    }\n\n\n    @media (min-width: 992px) {\n        .modal-lg {\n            width: 80%;\n        }\n    }\n</style>\n\n<div class="modal-header bike-background">\n    <h2 style="text-align: center; color: white; margin-top: 100px; margin-bottom: 100px;">Join <img src="//static.hashtagsell.com/logos/hts/HashtagSell_Logo_80px.svg" style="top: -5px; position: relative; height: 80px;"/><sup>Beta</sup></h2>\n</div>\n<div class="modal-body" style="background-color: #F5F5F5; border-radius: 0px 0px 4px 4px;">\n    <div class="row">\n        <button type="button" class="btn btn-default btn-lg raised col-md-4 col-md-offset-1 col-xs-10 col-xs-offset-1" ng-click="dismiss(\'signUp\')">I have a beta code</button>\n        <div class="col-md-2 col-xs-hidden"></div>\n        <button type="button" class="btn btn-default btn-lg raised col-md-4 col-md-offset-0 col-xs-10 col-xs-offset-1" ng-click="dismiss(\'subscribe\')">I want a beta code</button>\n    </div>\n</div>'),a.put("js/authModals/modals/checkEmailModal/partials/checkEmail.html",'<!DOCTYPE html>\n<html>\n<head lang="en">\n    <meta charset="UTF-8">\n    <title></title>\n</head>\n<body>\n    <div class="modal-header">\n        <h3 style="text-align: center;">Verification Email Sent</h3>\n    </div>\n    <div class="modal-body">\n        <p>Please acknowledge the activation email we\'ve just sent you.</p>\n        <p>Thanks for making HashtagSell a great community to buy and sell used goods!</p>\n    </div>\n    <!--<div class="modal-footer">-->\n        <!--<a href="mailto:" target="_self" class="btn btn-default">Go to inbox</a>-->\n    <!--</div>-->\n</body>\n</html>'),a.put("js/authModals/modals/forgotPasswordModal/partials/forgotPassword.html",'<!DOCTYPE html>\n<html>\n<head lang="en">\n    <meta charset="UTF-8">\n    <title></title>\n</head>\n<body>\n\n    <form id="forgotPasswordForm" name="forgotPasswordForm" class="form-horizontal" ng-submit="forgotPassword(forgotPasswordForm.$valid)" novalidate>\n        <div class="modal-header">\n            <h3 id="myModalLabel" style="text-align: center;">Password Recovery</h3>\n        </div>\n        <div class="modal-body">\n            <div class="controls">\n                <input class="form-control" type="email" name="recoveryId" ng-model="email" placeholder="Email" required>\n                <!--<br>-->\n                <small class="text-danger">\n                    {{message}}\n                </small>\n                <br>\n                <a href ng-click="dismiss(\'signUp\')">\n                    <small>Create Account</small>\n                </a>\n                <small> | </small>\n                <a href ng-click="dismiss(\'signIn\')">\n                    <small>Sign In</small>\n                </a>\n            </div>\n        </div>\n        <div class="modal-footer">\n            <input class="btn btn-success" type="submit" value="Send recovery email" ng-disabled="forgotPasswordForm.$invalid">\n            <!--<button class="btn btn-default" ng-click="dismiss()">Close</button>-->\n        </div>\n    </form>\n\n</body>\n</html>'),a.put("js/authModals/modals/resetPasswordModal/partials/resetPassword.html",'<!DOCTYPE html>\n<html>\n<head lang="en">\n    <meta charset="UTF-8">\n    <title></title>\n</head>\n<body>\n\n    <form id="resetPasswordForm" name="resetPasswordForm" class="form-horizontal" ng-submit="resetPassword(resetPasswordForm.$valid)" novalidate>\n        <div class="modal-header">\n            <h3 id="myModalLabel" style="text-align: center;">Reset Password</h3>\n        </div>\n        <div class="modal-body">\n            <div class="controls">\n                <input class="form-control" type="password" name="newPassword" ng-model="newPassword" placeholder="New password" ng-minlength="4" ng-maxlength="30" ng-pattern="/^[a-zA-Z0-9.!@#$%&*~+=-_]*$/" required>\n                <!--<br>-->\n                <small class="text-danger">\n                    {{message}}\n                </small>\n            </div>\n        </div>\n        <div class="modal-footer">\n            <button class="btn btn-success" type="submit" ng-class="resetPasswordForm.$invalid ? \'btn-warning\' : \'btn-success\'" ng-disabled="resetPasswordForm.$invalid">\n                <span ng-show="resetPasswordForm.newPassword.$error.minlength">Password is too short.</span>\n                <span ng-show="resetPasswordForm.newPassword.$error.pattern">Remove spaces in password.</span>\n                <span ng-show="!resetPasswordForm.newPassword.$error.minlength &&\n                    !resetPasswordForm.newPassword.$error.pattern &&\n                    resetPasswordForm.$invalid"\n                        >Type password</span>\n                <span ng-show="!resetPasswordForm.newPassword.$error.minlength &&\n                    !resetPasswordForm.newPassword.$error.pattern &&\n                    !resetPasswordForm.$invalid"\n                        >Submit new password</span>\n            </button>\n            <!--<button class="btn btn-default" ng-click="dismiss()">Close</button>-->\n        </div>\n    </form>\n\n</body>\n</html>'),a.put("js/authModals/modals/signInModal/partials/signIn.html",'<!DOCTYPE html>\n<html>\n<head lang="en">\n    <meta charset="UTF-8">\n    <title>HashtagSell Sign In</title>\n    <style>\n        /*----- Genral Classes start ------*/\n        hr{\n            margin: 30px 20px;\n            border-top:2px solid #1C1E26 ;\n            border-bottom:2px solid #38404D;\n        }\n        .list-unstyled {\n            padding-left: 0;\n            list-style: none;\n        }\n        .list-inline li {\n            display: inline-block;\n            padding-right: 5px;\n            padding-left: 5px;\n            margin-bottom: 10px;\n        }\n        /*---- General classes end -------*/\n\n        /*Change icons size here*/\n        .social-icons .fa {\n            font-size: 1.8em;\n        }\n        /*Change icons circle size and color here*/\n        .social-icons .fa {\n            width: 50px;\n            height: 50px;\n            line-height: 50px;\n            text-align: center;\n            color: #FFF;\n            color: rgba(255, 255, 255, 0.8);\n            -webkit-transition: all 0.3s ease-in-out;\n            -moz-transition: all 0.3s ease-in-out;\n            -ms-transition: all 0.3s ease-in-out;\n            -o-transition: all 0.3s ease-in-out;\n            transition: all 0.3s ease-in-out;\n        }\n\n        .social-icons.icon-circle .fa{\n            border-radius: 50%;\n        }\n        .social-icons.icon-rounded .fa{\n            border-radius:5px;\n        }\n        .social-icons.icon-flat .fa{\n            border-radius: 0;\n        }\n\n        .social-icons .fa:hover, .social-icons .fa:active {\n            color: #FFF;\n            -webkit-box-shadow: 1px 1px 3px #333;\n            -moz-box-shadow: 1px 1px 3px #333;\n            box-shadow: 1px 1px 3px #333;\n        }\n        .social-icons.icon-zoom .fa:hover, .social-icons.icon-zoom .fa:active {\n            -webkit-transform: scale(1.1);\n            -moz-transform: scale(1.1);\n            -ms-transform: scale(1.1);\n            -o-transform: scale(1.1);\n            transform: scale(1.1);\n        }\n\n        .social-icons .fa-facebook,.social-icons .fa-facebook-square{background-color:#3C599F;}\n        .social-icons .fa-twitter,.social-icons .fa-twitter-square{background-color:#32CCFE;}\n\n    </style>\n</head>\n<body>\n\n    <form name="loginForm" id="loginForm" class="form-horizontal" ng-submit="loginPassport(loginForm.$valid)" novalidate>\n        <div class="modal-header">\n            <h3 id="myModalLabel" style="text-align: center;">Welcome Back!</h3>\n        </div>\n        <div class="modal-body">\n            <!--<ul class="social-icons icon-circle icon-zoom list-unstyled list-inline">-->\n                <!--<li> <a href="/auth/facebook" target="_self"><i class="fa fa-facebook"></i></a></li>-->\n                <!--<li> <a href="/auth/twitter" target="_self"><i class="fa fa-twitter"></i></a></li>-->\n            <!--</ul>-->\n\n            <div class="controls">\n                <input class="form-control" type="email" id="email" ng-model="email" placeholder="Email" required>\n            </div>\n            <br>\n            <div class="controls">\n                <input class="form-control" type="password" id="password" ng-model="password" placeholder="Password" required>\n                <small class="text-danger">\n                    {{message}}\n                </small>\n                <br>\n                <a href ng-click="dismiss(\'signUp\')">\n                    <small>Create Account</small>\n                </a>\n                <small> | </small>\n                <a href ng-click="dismiss(\'forgot\')">\n                    <small>Forgot Your Password?</small>\n                </a>\n            </div>\n        </div>\n        <div class="modal-footer">\n            <input class="btn btn-success" type="submit" value="Log In" id="submit" ng-disabled="loginForm.$invalid">\n            <!--<button class="btn btn-default" ng-click="dismiss(\'dismiss\')">Close</button>-->\n        </div>\n    </form>\n\n</body>\n</html>'),
a.put("js/authModals/modals/signUpModal/partials/signUp.html",'<!DOCTYPE html>\n<html>\n<head lang="en">\n    <meta charset="UTF-8">\n    <title></title>\n</head>\n<body>\n\n        <form name="RegisterFormV2" id="RegisterFormV2" class="form-horizontal" ng-submit="signupPassport(RegisterFormV2.$valid)" novalidate>\n            <div class="modal-header">\n                <h3 style="text-align: center;">Create Your Account</h3>\n                <div style="text-align: center;">\n                    <small>\n                        <a href ng-click="dismiss(\'signIn\')">\n                            Sign in to my existing account.\n                        </a>\n                    </small>\n                </div>\n            </div>\n            <div class="modal-body">\n\n                <div class="controls">\n                    <input class="form-control" type="email" id="email" name="email" ng-model="email" placeholder="Email" required="true"/>\n                </div>\n\n                <br>\n\n\n                <div class="controls">\n                    <div class="input-group">\n                        <span class="input-group-addon">@</span>\n                        <input class="form-control" type="text" id="username" name="username" ng-model="name" ng-minlength="3" ng-maxlength="22" ng-pattern="/^[a-zA-Z0-9]*$/" placeholder="Username" required="true"/>\n                    </div>\n                </div>\n\n\n                <br>\n\n                <div class="controls">\n                    <input class="form-control" type="password" id="password" name="password" ng-model="password" ng-minlength="4" ng-maxlength="30" ng-pattern="/^[a-zA-Z0-9.!@#$%&*~+=^-_]*$/" placeholder="Password" required="true"/>\n                </div>\n\n                <br>\n\n                <!--<div class="controls">-->\n                    <!--<input class="form-control" type="text" id="secret" placeholder="Early Access Code" name="secret" ng-model="secret" required="true"/>-->\n                    <!--<span>-->\n                        <!--<a href ng-click="dismiss(\'subscribe\')" style="position: relative; top: 3px;">-->\n                            <!--<small>I don\'t have an access code</small>-->\n                        <!--</a>-->\n                    <!--</span>-->\n                <!--</div>-->\n\n                <!--<br/>-->\n\n                <div class="controls">\n\n                        <input id="betaAgreement" name="betaAgreement" type="checkbox" ng-model="betaAgreement" required="true"> I agree to the\n                        <a ui-sref="betaAgreement" target="_blank" required>Beta Agreement</a>\n\n                    <br>\n                    <small class="text-danger">{{message}}</small>\n                </div>\n\n\n            </div>\n            <div class="modal-footer">\n                <button id="submit-create-account" class="btn" ng-class="RegisterFormV2.$invalid ? \'btn-warning\' : \'btn-success\'" type="submit" ng-disabled="RegisterFormV2.$invalid">\n                    <span ng-show="RegisterFormV2.username.$error.minlength">Username too short</span>\n                    <span ng-show="RegisterFormV2.username.$error.maxlength">Username too long</span>\n                    <span ng-show="RegisterFormV2.username.$error.pattern">Remove special chars in username</span>\n                    <span ng-show="RegisterFormV2.password_verify.$error.match">Passwords do not match</span>\n                    <span ng-show="RegisterFormV2.password.$error.minlength">Password too short</span>\n                    <span ng-show="RegisterFormV2.password.$error.pattern">Remove spaces in password</span>\n                    <span ng-show="!RegisterFormV2.username.$error.minlength &&\n                    !RegisterFormV2.username.$error.maxlength &&\n                    !RegisterFormV2.username.$error.pattern &&\n                    !RegisterFormV2.password_verify.$error.match &&\n                    !RegisterFormV2.password.$error.minlength &&\n                    !RegisterFormV2.password.$error.pattern &&\n                    RegisterFormV2.$invalid"\n                            >Almost there</span>\n                    <span ng-show="!RegisterFormV2.username.$error.minlength &&\n                    !RegisterFormV2.username.$error.maxlength &&\n                    !RegisterFormV2.username.$error.pattern &&\n                    !RegisterFormV2.password_verify.$error.match &&\n                    !RegisterFormV2.password.$error.minlength &&\n                    !RegisterFormV2.password.$error.pattern &&\n                    !RegisterFormV2.$invalid"\n                            >Create Account</span>\n                </button>\n                <!--<button class="btn btn-default" ng-click="dismiss(\'dismiss\')">Close</button>-->\n            </div>\n        </form>\n</body>\n</html>'),a.put("js/authModals/modals/subscribeModal/partials/subscribe.html",'<!DOCTYPE html>\n<html>\n<head lang="en">\n    <meta charset="UTF-8">\n    <title></title>\n</head>\n<body>\n\n    <form id="betaSubscriberForm" name="betaSubscriberForm" class="form-horizontal" ng-submit="subscribe(betaSubscriberForm.$valid)" novalidate>\n        <div class="modal-header">\n            <h3 id="myModalLabel" style="text-align: center;" ng-show="!done">Request Early Access</h3>\n            <h3 id="myModalLabel" style="text-align: center;" ng-show="done">Tell Your Friends!</h3>\n        </div>\n        <div class="modal-body">\n            <div class="controls">\n\n                <alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)">{{alert.msg}}</alert>\n\n                <input class="form-control" type="email" name="subscriberEmail" ng-model="email" placeholder="Email" ng-show="!done" required>\n                <span ng-show="!done">\n                    <br>\n                    <a href ng-click="dismiss(\'signUp\')">\n                        <small>Create Account</small>\n                    </a>\n                    <small> | </small>\n                    <a href ng-click="dismiss(\'signIn\')">\n                        <small>Sign In</small>\n                    </a>\n                </span>\n            </div>\n        </div>\n        <div class="modal-footer">\n            <input class="btn btn-success" type="submit" value="I want early access!" ng-disabled="betaSubscriberForm.$invalid" ng-show="!done">\n            <!--<button class="btn btn-default" ng-click="dismiss()">Close</button>-->\n        </div>\n    </form>\n</body>\n</html>'),a.put("js/bookingSystem/partials/bookingSystem.html",'<div class="btn-group" role="group" ng-show="!selectedDay">\n    <label class="btn btn-default btn-lg" disabled="true" style="background-color: #eee;"><i class="fa fa-clock-o"></i></label>\n    <!--<label class="btn btn-default btn-lg" ng-repeat="day in days" ng-click="daySelected($index)" ng-show="!{{day.disabled}}">{{day.name}}</label>-->\n    <label class="btn btn-default btn-lg" ng-repeat="day in days" ng-click="daySelected($index)">{{day.name}}</label>\n</div>\n\n\n\n<div ng-show="selectedDay">\n    <h4 style="text-align: center; cursor: pointer;" ng-click="back()">\n        <i class="fa fa-arrow-left"></i>{{selectedDay.name}}\n    </h4>\n    <div>\n        <!--<label class="btn btn-default" ng-repeat="hour in selectedHours" ng-model="hour.selected" ng-change="getAllProposedTimes()" btn-checkbox ng-show="!{{hour.disabled}}">{{hour.name}}</label>-->\n        <label class="btn btn-default" ng-repeat="hour in selectedHours" ng-model="hour.selected" ng-change="getAllProposedTimes()" btn-checkbox >{{hour.name}}</label>\n    </div>\n</div>'),a.put("js/feed/partials/feed.partial.html",'<div ui-view></div>\n\n<div ng-show="status.error.message" class="background-instructions">\n    <div class="inset-background-text" ng-bind-html="status.error.message">\n\n    </div>\n</div>\n\n<div class="outer-container col-xs-12">\n    <spinner ng-if="spinner.show" class="spinner-container" spinner-text="Finding recently posted items around you"></spinner>\n\n    <div vs-repeat class="inner-container feed row" vs-size="feedItemHeight" vs-offset-before="77" vs-excess="10" on-vs-index-change="getScrollPosition(startIndex, endIndex)">\n        <div class="list-item" ng-repeat="result in feed.filtered" ng-click="openSplash(this)">\n            <div class="thumbnail">\n\n                <ribbon-list ng-if="!!result.askingPrice.value">{{::result.askingPrice.value | currency : $ : 0}}</ribbon-list>\n\n                <!--Has NO image-->\n                <div ng-if="!result.images.length">\n                    <div class="row">\n                        <div class="caption">\n                            <h3 class="noImage-heading" ng-bind-html="result.heading | cleanHeading"></h3>\n                            <hts-fave-toggle class="carousel-starPositioning"></hts-fave-toggle>\n                            <p class="noImage-body" ng-bind-html="result.body |cleanBodyExcerpt"></p>\n                            <div class="pull-left carousel-timestamp">\n                                <small>Posted {{(currentDate.timestamp - result.external.threeTaps.timestamp) | secondsToTimeString}} ago.</small>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n\n                <!--Has ONE image-->\n                <div ng-if="result.images.length == 1">\n                    <div class="row">\n                        <div class="col-lg-5 col-md-6 col-sm-6 col-xs-6">\n                            <img ng-src="{{::result.images[0].full || result.images[0].thumb || result.images[0].images}}" class="img-rounded singleImage-Image">\n                        </div>\n                        <div class="col-lg-7 col-md-6 col-sm-6 col-xs-6 singleImage-TextContainer">\n                            <div class="row">\n                                <div class="caption">\n                                    <h3 class="singleImage-heading" ng-bind-html="result.heading | cleanHeading"></h3>\n                                    <hts-fave-toggle class="singleImage-starPositioning"></hts-fave-toggle>\n                                    <p class="singleImage-body" ng-bind-html="result.body |cleanBodyExcerpt"></p>\n                                    <div class="pull-left singleImage-timestamp">\n                                        <small>Posted {{(currentDate.timestamp - result.external.threeTaps.timestamp) | secondsToTimeString}} ago.</small>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n\n                <!--Has MULTIPLE images-->\n                <div ng-if="result.images.length > 1">\n                    <div class="row">\n                        <div class="col-lg-12">\n                            <slick data="result.images" lazy-load=\'progressive\' init-onload=true dots=true infinite=true slides-to-scroll=1 speed=100 variable-width=true center-mode=false next-arrow=".next-arrow-ctl{{$index}}" prev-arrow=".prev-arrow-ctl{{$index}}">\n\n\n                                <button ng-click="$event.stopPropagation();" type="button" data-role="none" class="slick-prev prev-arrow-ctl{{$index}}" aria-label="previous" style="display: block;">Previous</button>\n\n                                <button ng-click="$event.stopPropagation();" type="button" data-role="none" class="slick-next next-arrow-ctl{{$index}}" aria-label="next" style="display: block;">Next</button>\n\n                                <div ng-repeat="image in result.images">\n                                    <img data-lazy="{{image.thumb || image.thumbnail || image.images || image.full}}"/>\n                                </div>\n                            </slick>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="caption">\n                            <h3 class="carousel-heading" ng-bind-html="result.heading | cleanHeading"></h3>\n                            <hts-fave-toggle class="carousel-starPositioning"></hts-fave-toggle>\n                            <p class="carousel-body" ng-bind-html="result.body |cleanBodyExcerpt"></p>\n                            <div class="pull-left carousel-timestamp">\n                                <small>Posted {{(currentDate.timestamp - result.external.threeTaps.timestamp) | secondsToTimeString}} ago.</small>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'),a.put("js/legal/betaAgreement/partials/betaAgreement.partial.html",'<style>\n    body, html {\n        background-color: #ECF0F5;\n        overflow-y: auto;\n        overflow-x: hidden;\n        font-weight: 200;\n    }\n</style>\n\n<div class="container">\n    <h3>HashtagSell Beta Agreement</h3>\n    <p>Last Updated on May 15th, 2015</p>\n\n    <p>Effective as of May 15th, 2015</p>\n\n    <p>This Beta Agreement (the Agreement) contains the exclusive terms and conditions between HashtagSell, Inc., a California corporation (Company) and you (You) and it governs Your testing, evaluation and use of the beta version of the Services, any related software and website to which Company gives You access (Services). By accessing the Services for the evaluation purposes described herein You are consenting to be bound by and are becoming a party to the terms and conditions of this Agreement. If You do not agree to all of the terms of this Agreement, You must not access the Services.</p>\n    <p>1. Evaluation.</p>\n    <p>During the time period permitted by Company (the Term) You may access the Services and test the functionality and other features of the Services, but only to evaluate the Services for their intended purpose. From time to time as requested by Company You agree to participate in the feedback programs administered by Company.</p>\n    <p>This Agreement does not entitle You to any technical support with respect to the Services, but any such support provided by Company in its sole discretion shall be subject to this Agreement. If You are under the age of 18, You shall not access, browse or use the Services, and by using the Services, You represent and warrant that You are at least 18 years of age.</p>\n    <p>2. Third Party Services.</p>\n    <p>The Services may also allow You to access services provided by third parties or you may use third party services to access the Services. You acknowledge that Company is not responsible nor liable for such services, and that Your use of such services may be subject to separate terms between You and the company providing those services.</p>\n    <p>3. Restrictions; Ownership.</p>\n    <p>You may not, directly or indirectly: copy, distribute, rent, lease, timeshare, operate a service bureau with, use for the benefit of a third party, reverse engineer, disassemble, decompile, attempt to discover the source code or structure, sequence and organization of, or remove any proprietary notices from, the Services. You shall not:</p>\n    <p>*(a) use the Services to abuse, harass, threaten, intimidate or otherwise violate the legal rights (including intellectual property rights or rights of privacy and publicity) of others; *(b) use the Services for any unauthorized purpose or in violation of any applicable laws; *(c) transmit any content that You do not have a right to transmit under any law or under contractual or fiduciary relationships; *(d) interfere with or disrupt the Services. As between the parties, title, ownership rights, and intellectual property rights in and to the Services, and any copies or portions thereof, shall remain in Company and its suppliers or licensors.</p>\n    <p>4. Confidentiality; Feedback.</p>\n    <p>Your acknowledge that, in the course of evaluating the Services, You will obtain information relating to the Company and the Services which is confidential in nature (Confidential Information). You agree that You will not use or disclose Confidential Information without the prior written consent of Company unless such Confidential Information becomes part of the public domain. Further, if You provide Company any feedback, ideas, concepts or suggestions about the Companys Services, business, technology or Confidential Information (Feedback), You grant Company, without charge, the fully paid-up, irrevocable right and license to use, share, commercialize and otherwise fully exercise and exploit Your Feedback and all related rights (and to allow others to do so) in any way and for any purpose. These rights survive termination of this agreement in perpetuity.</p>\n    <p>5. Term/Termination.</p>\n    <p>This Agreement will commence on the date that You first accept the terms of this Agreement by clicking Accept below (or otherwise create an account) and shall continue for the Term. Sections 2-9 of this Agreement will survive any expiration or termination of this Agreement. All rights You are granted herein shall immediately terminate upon expiration or termination of this Agreement and You shall immediately return to Company or destroy all Confidential Information (including all Software). In addition to any other rights set forth herein, Company may in its sole discretion restrict, suspend or terminate Your access to the Services, in whole or in part and without notice.</p>\n    <p>6. Disclaimer.</p>\n    <p>The parties acknowledge that the Services are experimental in nature and that the Services are provided AS IS. COMPANY DISCLAIMS ALL WARRANTIES RELATING TO THE SUBJECT MATTER HEREOF, EXPRESS OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NON-INFRINGEMENT.</p>\n    <p>7. Limitation of Remedies and Damages. COMPANY SHALL NOT BE RESPONSIBLE OR LIABLE WITH RESPECT TO ANY SUBJECT MATTER OF THIS AGREEMENT OR TERMS AND CONDITIONS RELATED THERETO UNDER ANY CONTRACT, NEGLIGENCE, STRICT LIABILITY OR OTHER THEORY (A) FOR LOSS OR INACCURACY OF DATA OR, COST OF PROCUREMENT OF SUBSTITUTE GOODS, SERVICES OR TECHNOLOGY, (B) FOR ANY INDIRECT, INCIDENTAL OR CONSEQUENTIAL DAMAGES INCLUDING, BUT NOT LIMITED TO LOSS OF REVENUES AND LOSS OF PROFITS, OR (C) ANY AMOUNT IN THE AGGREGATE IN EXCESS OF THE AMOUNTS YOU HAVE PAID COMPANY IN THE LAST SIX (6) MONTHS, OR, IF GREATER, FIFTY DOLLARS ($50). COMPANY SHALL NOT BE RESPONSIBLE FOR ANY MATTER BEYOND ITS REASONABLE CONTROL.</p>\n    <p>8. Equitable Relief.</p>\n    <p>You acknowledge and agree that due to the unique nature of Companys Confidential Information, there can be no adequate remedy at law for any breach of Your obligations hereunder, that any such breach may allow You or third parties to unfairly compete with Company resulting in irreparable harm to Company, and therefore, that upon any such breach or threat thereof, Company shall be entitled to injunctions and other appropriate equitable relief in addition to whatever remedies it may have at law.</p>\n    <p>9. Miscellaneous.</p>\n    <p>In the event that any of the provisions of this Agreement shall be held by a court or other tribunal of competent jurisdiction to be unenforceable, such provisions shall be limited or eliminated to the minimum extent necessary so that this Agreement shall otherwise remain in full force and effect and enforceable. This Agreement constitutes the entire agreement between the parties pertaining to the subject matter hereof, and any and all written or oral agreements previously existing between the parties are expressly cancelled. Neither the rights nor the obligations arising under this Agreement are assignable or transferable by You, and any such attempted assignment or transfer shall be void and without effect. This Agreement shall be governed by and construed in accordance with the laws of the State of California without regard to the conflicts of laws provisions therein.</p>\n    <p>Last Modified: 15th May 2015<br>\n     2015 HashtagSell, Inc.</p>\n</div>'),a.put("js/legal/postingRules/partials/postingRules.partial.html",'<style>\n    body, html {\n        background-color: #ECF0F5;\n        overflow-y: auto;\n        overflow-x: hidden;\n        font-weight: 200;\n    }\n</style>\n\n<div class="container">\n    <h3>HashtagSell Posting Rules</h3>\n    <p>Last Updated on May 15th, 2015</p>\n\n    <p>Effective as of May 15th, 2015</p>\n\n    <p>We categorize any ads posted on HashtagSell. Here are some general rules to follow when posting and replying to an ad:</p>\n    <ol><li>You are responsible for ensuring compliance with all applicable laws relating to items that you list, buy or sell on HashtagSell.</li>\n        <li>Ads that are on our prohibited items list are not permitted.</li>\n        <li>Ads or replies that contain any text that violates the spirit of HashtagSell, contains inappropriate or discriminatory language in ads, and/or &quot;hate speech&quot; directed at individuals or groups, is threatening or abusive, infringes on another user&#39;s privacy, or could disturb, harm, or offend our users, may be rejected.</li>\n        <li>It is prohibited to post an item or service not located in the U.S.</li>\n        <li>It is prohibited to post a duplicate or similar ad for the same item or service.</li>\n        <li>Ads that are intentionally misleading, deceptive, deceitful, misinformative, or found to be using &quot;bait and switch&quot; tactics are not permitted.</li>\n        <li>You can only post one ad for an item in the area that the item is actually located.</li>\n        <li>We generally allow links under the following conditions:</li>\n        <ul>\n            <li>Link to additional product information/pictures</li>\n        </ul>\n        <li>Posting an ad for a unique item</li>\n        <li>Sole purpose of link is not to direct more traffic to your website</li>\n        <li>You do not post links to another classified site</li>\n        <li>Your ad must comply with all other site policies.</li>\n        <li>It is prohibited to use multiple accounts to post.</li>\n        <li>It is prohibited to post pornography, nudity, or other related material that is obscene or adult in nature.</li>\n        <li>It is prohibited to post ads relating to personals, dating or adult themed events or services, missed connections, or adult services.</li>\n        <li>It is prohibited to infringe upon the rights of third parties. This includes, but is not limited to, infringing upon intellectual property rights such as copyright and trademark.</li>\n        <li>It is prohibited to post ads that serve no other purpose than to send traffic to another web site. Ads must describe a specific item or service in order to be allowed on the site. If you include HTML code in your ad it will not work and your ad could be removed.</li>\n        <li>It is prohibited to post keywords in your ad for the purpose of increasing its visibility in search results.</li>\n        <li>Use of content and/or functionality of HashtagSell to send unsolicited emails, or make unsolicited contact of any kind with its users is strictly prohibited.</li>\n        <li>Rules may change periodically to reflect HashtagSell&#39;s ongoing commitment to providing the safest and best user experience possible. We reserve the right to enforce these rules at our discretion and change these rules at any time. HashtagSell reserves the right to remove any ad at any time at our discretion. By posting an ad on the site you understand and have agreed to these rules.</li></ol>\n    <h4>HashtagSell Prohibited Items List</h4>\n    <p>The list below details a partial list of what can&#39;t be posted on HashtagSell. HashtagSell reserves the right to remove an ad at our discretion, and to alter this list at any time:</p>\n    <ul>\n        <li>Ads asking for donations unless from a registered charity</li>\n        <li>Ads offering or looking for human adoption</li>\n        <li>Ads that are adult in nature (including, but not limited to: adult toys, adult magazines, adult services, escort services, adult massages, adult job postings, dating websites, and personal ads)</li>\n        <li>Airline tickets that restrict transfer and tickets of any kind which you are not authorized to sell</li>\n        <li>Alcoholic Beverages</li>\n        <li>Animals/pets</li>\n        <li>Animals traps that could be deemed inhumane</li>\n        <li>Blood, Bodily Fluids and Body Parts</li>\n        <li>Burglary Tools</li>\n        <li>Counterfeit Products, replicas or knock-off brand name goods</li>\n        <li>Coupons or gift cards that restrict transfer, and coupons or gift cards which you are not authorized to sell</li>\n        <li>Electronically delivered gift cards or electronic &quot;scanned&quot; coupons</li>\n        <li>Cribs (new and used) unless they meet the new federal safety standards issued by the CPSC. Only cribs that were manufactured in 2011 or later are permitted. If your crib was manufactured in 2011 or later and meets the required safety standards, you must specifically state in your listing that the crib was manufactured in 2011 or later and does meet these standards (please visit the CPSC website for more information)</li>\n        <li>Electronic Surveillance Equipment designed or used primarily to illegally intercept/record the private actions or interactions of others without their knowledge or permission</li>\n        <li>Embargoed Goods</li>\n        <li>Endangered or protected species, or any part of any endangered or protected species (including bone/ivory, taxidermy, shell, pelts, etc)</li>\n        <li>Food and food products</li>\n        <li>Fireworks, Destructive Devices and Explosives</li>\n        <li>Gift cards of any kind</li>\n        <li>Government and Transit Badges, Uniforms, IDs, Documents and Licenses</li>\n        <li>Hazardous Materials including but not limited to radioactive, toxic and explosive materials</li>\n        <li>Identity Documents, Personal Financial Records &amp; Personal Information</li>\n        <li>Illegal Drugs, controlled substances, substances and items used to manufacture controlled substances and drugs, &amp; drug paraphernalia</li>\n        <li>Illegal telecommunication and electronics equipment such as access cards, password swiffers, any type of jamming device, traffic signal control devices, satellite/cable descrambler, or any device prohibited by the FCC</li>\n        <li>Items issued to United States Armed Forces that have not been disposed of in accordance with Department of Defense demilitarization policies</li>\n        <li>Items marketed inappropriately with an intolerant regard toward religion, sexual orientation, race, or ethnic background</li>\n        <li>Items that restrict transfer (such as tickets or coupons) and items you are not authorized to sell</li>\n        <li>Items which encourage or facilitate illegal activity</li>\n        <li>Liquor licenses</li>\n        <li>Lottery Tickets, Sweepstakes Entries and Slot Machines that requires money to operate</li>\n        <li>Material, artwork, and/or photographs that are obscene, contain nudity (partial or full), pornographic, adult in nature, or harmful to minors</li>\n        <li>Material that infringes copyright, including but not limited to software or other digital goods which you are not authorized to sell</li>\n        <li>Modded gaming items and modification services</li>\n        <li>Nonprescription drugs, drugs that make false or misleading treatment claims, or treatment claims that require FDA approval</li>\n        <li>Offensive Material</li>\n        <li>Pesticides or hazardous materials</li>\n        <li>Pictures or images that contain nudity</li>\n        <li>Plants and insects that are restricted or regulated</li>\n        <li>Prescription Drugs and Devices</li>\n        <li>Products being sold by representatives of companies that violate our jobs/services policies</li>\n        <li>Prostitution or ads that offer sex, sexual favors or sexual actions in exchange for anything</li>\n        <li>Recalled items (please visit the US recall information website for more information)</li>\n        <li>Stocks and Other Securities</li>\n        <li>Stolen Property</li>\n        <li>Tobacco and Related Products (including, but not limited to: nicotine patches, nicotine gum, e-cigarettes, etc)</li>\n        <li>Used bedding and clothing, unless sanitized in accordance with law (used undergarments, swimwear and socks are never permitted)</li>\n        <li>Used cosmetics or toiletries (items must be new and sealed)</li>\n        <li>Weapons and related items (including, but not limited to firearms, magazines and all parts and accessories, ammunition, BB and pellet guns, tear gas, tasers, stun guns, knives, swords, airsoft guns and all accessories, crossbows, archery bows, and martial arts weapons)</li>\n    </ul>\n\n    <p>Last Modified: 15th May 2015<br>\n     2015 HashtagSell, Inc.</p>\n</div>'),a.put("js/legal/privacyPolicy/partials/privacyPolicy.partial.html",'<style>\n    body, html {\n        background-color: #ECF0F5;\n        overflow-y: auto;\n        overflow-x: hidden;\n        font-weight: 200;\n    }\n</style>\n\n<div class="container">\n    <h3>HashtagSell Privacy Policy</h3>\n\n    <p>Last Updated on May 15th, 2015</p>\n\n    <p>Effective as of May 15th, 2015</p>\n\n    <p>HashtagSell, Inc., the company behind HashtagSell.com (hereafter HashtagSell, our, we, or us) has created this Privacy Policy to explain how your information is collected and used. This Privacy Policy applies to our web site. </p>\n\n    <p>By visiting and using the web site, you consent to our Terms of Use, which is incorporated by reference including applicable terms regarding limitations on liability and the resolution of disputes. You acknowledge our use of your information per the terms of this Privacy Policy. We reserve the right to modify this Privacy Policy in the future. You can always review the most current version at <a ui-sref="privacyPolicy" target="_blank">{{legalUrl.privacyPolicy}}</a></p>\n\n    <h4>Data Collected From You.</h4>\n\n    <p>1. Information Submitted by You. HashtagSell receives, stores, and processes information that you provide when using our Platform, including: </p>\n\n    <p>1.1. information you submit to the Platform, such as when you register or update the details of your account, information and any payment information you submit to the Platform such as credit card number, expiration, and security codes, or digital payment system account;</p>\n\n    <p>1.2. information you post in order to sell any product on the Platform, including any photographs, written descriptions and your location (Offers), as well as any bids you make on Offers through the Platform; and</p>\n\n    <p>1.3. any reviews or comments you make using the Platform, all correspondence or communications with another user conducted using the Platform, or if you contact or communicate with us, whether through written or verbal communications.</p>\n\n    <p>2. Information from Third Parties. HashtagSell may, from time to time, supplement the information we collect about you through our Platform with outside records from third parties in order to enhance our ability to serve you, to tailor our content to you and to offer you opportunities to purchase products or services that we believe may be of interest to you. HashtagSell may also receive information from Facebook, or any other social media site or other third party service which HashtagSell may support in the future, should you elect to log on to the Platform using such social media sites. We may combine the information we receive from those sources with information we collect through the Platform. In those cases, we will apply this Privacy Policy to any Personal Information received, unless we have disclosed otherwise. </p>\n\n    <p>3. Internet/Mobile Data and Metadata. When you use the Platform, we receive, store and process a variety of information about your location (e.g. IP address, GPS coordinates), your device (e.g. make, model and specifications of your device, OS, UDID), metadata (e.g. time, date and location of when a post was made) and other similar data, to the extent sent by your computer or mobile device or generated as part of the data communications with the Platform. </p>\n\n    <p>4. Tracking Technologies; Advertising. </p>\n\n    <p>4.1. HashtagSell uses, or may use, cookies, tracking pixels, embedded scripts and other similar tracking technologies on the Platform and may, without further consultation with you, and may permit its partners to do the same. By accessing or using the Platform, you will provide or make available certain information to us and to our partners. HashtagSell will track your activities if you click on advertisements for our services on third party platforms such as search engines and social networks, and do use analytics to track what you do in response to those advertisements. All information which could reasonably be used to identify you personally (e.g. your name, e-mail address, location, IP address) are hereafter (Personal Information).</p>\n\n    <p>4.2. HashtagSell does not currently offer targeted advertising through the Platform, though we reserve the right to do or allow our partners to do so in the future without further consultation from you. We do not currently support any browser based Do Not Track (DNT) settings or participate in any DNT frameworks, and we do not assign any meaning to any potential DNT track signals you may send or alter any of our data collection or use practices in response to such signals.  </p>\n\n    <h4>Use of Collected Data.</h4>\n\n    <p>5. General Uses. HashtagSell uses and processes the collected information, including Personal Information, for the following uses: </p>\n\n    <p>5.1. to enable you to access and use the Platform and to optimize the type of classified posts presented to you when you use the Platform;</p>\n\n    <p>5.2. to enable any identification programs we may institute and which you elect to participate, such as verifying your identity and address, and to conduct checks against various publically available databases;</p>\n\n    <p>5.3. to operate, protect, improve and optimize the Platform, our business, and our users experience, such as to perform analytics, conduct research, and for advertising and marketing; </p>\n\n    <p>5.4. to help create and maintain a trusted and safer environment on the Platform including detection and prevention of fraud, unauthorized access, intrusion, and service interruption </p>\n\n    <p>5.5. to conduct investigations and to respond to disputes between users, refund requests and other similar customer support service; </p>\n\n    <p>5.6. to send you service, support and administrative messages, reminders, technical notices, updates, security alerts, and information requested by you; </p>\n\n    <p>5.7. where we have your consent, to send you our newsletter, marketing and promotional messages and other information that may be of interest to you, including HashtagSell&#39;s newsletter and other information sent on behalf of our business partners that we think you may find interesting; and </p>\n\n    <p>5.8. to comply with our legal obligations or requests from law enforcement agencies, resolve any disputes that we may have with any of our users, and enforce our agreements with third parties.</p>\n\n    <p>6. Payment.HashtagSell uses or intends to use a third party credit card processing company to handle credit card payments made on the Platform. As part of this process, your name and other credit card information will be sent to third parties for processing. </p>\n\n    <p>7. Use of Communications. HashtagSell will review, scan, or analyze your communications made via the Platform or with us for fraud prevention, risk assessment, legal/regulatory compliance, investigation, product development, research and customer support purposes. We may also scan, review or analyze messages for research and product development purposes to help make search, and user communications more efficient and effective, as well as to improve our product and service offerings.</p>\n\n    <p>8. Limitation on Use. HashtagSell will not review, scan, or analyze your communications for sending third party marketing messages to you, nor will to use any of your credit card or payment information as part of our advertising or marketing campaigns.</p>\n\n    <p>9. Opting Out. You will be able to unsubscribe or opt-out from receiving certain marketing and promotional messages and communications by by clicking the unsubscribe link in any promotional email we send to you.</p>\n\n    <h4>Disclosure of Your Information.</h4>\n\n    <p>10. Platform Disclosure. Your Personal Information may be disclosed on the Platform as follows: </p>\n\n    <p>10.1. Certain information from your HashtagSell account will be made available to the public on the Platform, including your user name, picture (if one is provided), the date you created your HashtagSell account. In addition to your information, your public profile will also display other users who may have followed you and your rating on HashtagSell. Billing information will never be shared with another user. </p>\n\n    <p>10.2. HashtagSell may ask you to review the other HashtagSell users. If you choose to provide a review, your comments may be made public on the Platform.</p>\n\n    <p>11. Social Media. You may link your account on a third party social media site to your HashtagSell account. We refer to a persons contacts on these third party sites as Friends. When you create this link: </p>\n\n    <p>11.1. information you provide to us from the linking of your accounts may be published on your HashtagSell account profile; </p>\n\n    <p>11.2. your activities on the Platform may be displayed to your Friends on the Platform and/or the third party site; </p>\n\n    <p>11.3. other HashtagSell users may be able to see any common Friends that you may have with them, or that you are a Friend of their Friend if applicable; </p>\n\n    <p>11.4. other HashtagSell users may be able to see any information you have provided on the linked social networking site(s); and</p>\n\n    <p>11.5. the information you provide to us from the linking of your accounts may be stored, processed and transmitted for fraud prevention and risk assessment purposes. The publication and display of information that you provide to HashtagSell through this linkage is subject to your settings and authorizations on the Platform and the third party site.</p>\n\n    <p>12.  Disclosures to Partners, Affiliates </p>\n\n    <p>12.1. HashtagSell may distribute parts of the Platform (including your posts, communications or offers) for display on sites operated by HashtagSell&#39;s business partners or on social media you have linked to your HashtagSell account. If and when your posts, communications or offers are displayed on a partners site or on a social media site, information from your public profile page may also be displayed. </p>\n\n    <p>12.2. We may allow our related entities such as our subsidiaries, and their employees, to use and process your Personal Information in the same way and to the same extent that we are permitted to under this Privacy Policy. These related entities comply with the same obligations that we have to protect your Personal Information under this Privacy Policy.</p>\n\n    <p>12.3. You acknowledge, consent and agree that HashtagSell may access, preserve and disclose your information, including all Personal Information, if required to do so by law or in a good faith belief that such access, preservation or disclosure is reasonably necessary to (a) respond to claims asserted against HashtagSell; (b) to comply with legal process (for example, court orders, subpoenas and warrants); (c) to enforce and administer our agreements with users, such as the <a href="mailto:contact@hashtagsell.com" target="_blank">contact us</a> and enter your request for cancellation. Please also note that any reviews, forum postings and similar materials posted by you may continue to be publicly available on the Platform in association with your account name, even after your HashtagSell account is cancelled. </p>\n\n    <h4>Security of Your Personal Information.</h4>\n\n    <p>15. All communication between the Platform to HashtagSell&#39;s servers is encrypted using 128-bit SSL. We have also sought to use other reasonable administrative, technical, and physical security measures to protect your Personal Information and other information against the unauthorized access, destruction or alteration of your information. However, no method of transmission over the Internet, and no method of storing electronic information, can be 100% secure. HashtagSell cannot guarantee the absolute security of your transmissions to us and of your Personal Information that we store. </p>\n\n    <p>16. If you become aware of a security issue, please provide us with details regarding the security issue <a href="mailto:contact@hashtagsell.com" target="_blank">contact us</a> . We will work with you to address the security issues you have encountered. </p>\n\n    <h4>Third Party Websites.</h4>\n\n    <p>17. The Platform will contain links to other websites not owned or controlled by HashtagSell. These other websites may place their own cookies, web beacons or other files on your device, or collect and solicit Personal Information from you. These third parties will have their own rules about the collection, use and disclosure of Personal Information. HashtagSell encourages you to read the terms of use and privacy policies of the other websites and mobile applications that you visit. </p>\n\n    <p>18. The Platform utilizes Google Maps API(s) to give other users the approximate location of the goods you post for sale. Your use of Google Maps/Earth is subject to <a href="http://www.google.com/intl/en_us/help/terms_maps.html" target="_blank">Googles terms of use</a> and <a href="http://www.google.com/privacy">Googles privacy policy</a> as may be amended by Google from time to time. </p>\n\n    <p>19. The Platform utilizes Facebook Connect API(s) to allow you to log on to the Platform using your Facebook account. Your use of Facebook is subject to <a href="https://www.facebook.com/policies/">Facebooks terms and policies</a>, as may be amended by Facebook from time to time. </p>\n\n    <p>20. HashtagSell, Inc. uses Braintree, a division of PayPal, Inc. (Braintree) for payment processing services. By using the Braintree payment processing services you agree to the Braintree Payment Services Agreement available at <a href="https://www.braintreepayments.com/legal/gateway-agreement">https://www.braintreepayments.com/legal/gateway-agreement</a>, and the applicable bank agreement available at <a href="https://www.braintreepayments.com/legal/cea-wells">https://www.braintreepayments.com/legal/cea-wells</a>. </p>\n\n    <h4>Amendments.</h4>\n\n    <p>21. HashtagSell may change how we collect and then use Personal Information at any time, at our sole discretion. </p>\n\n    <p>22. We may change this Privacy Policy at any time. If we make material changes to the Privacy Policy, we will notify you either by posting the changed Privacy Policy on the Platform or by sending an e-mail to you. We will also update the Last Updated Date and the Effective Date at the top of this Privacy Policy. If we let you know of changes through an email communication, then the date on which the e-mail is sent shall be the deemed to be the date of your receipt of that email. </p>\n\n    <p>23. Its important that you review the changed Privacy Policy. If you do not wish to agree to the changed Privacy Policy, then we will not be able to continue providing the Platform to you, and your only option will be to stop accessing the Platform and deactivate your HashtagSell account. </p>\n\n    <h4>Applicable Law.</h4>\n\n    <p>24. International Users. If you are located anywhere outside of the United States, please be aware that information we collect, including, Personal Information, will be transferred to, processed and stored in the United States. The data protection laws in the United States may differ from those of the country in which you are located, and your Personal Information may be subject to access requests from governments, courts, or law enforcement in the United States according to laws of the United States. By using the Platform or providing us with any information, you consent to this transfer, processing and storage of your information in the United States. </p>\n\n    <p>25. Notice to California Residents. Under California Civil Code Section 1798.83 (known as the Shine the Light law), HashtagSell customers who are residents of California may request certain information regarding the disclosure of your Personal Information during the immediate prior calendar year to third parties for their direct marketing purposes. To make such a request, please write to us at the following address: </p>\n\n    <p>HashtagSell, Inc.<br>\n    Customer Service<br>\n    1819 Polk Street #323<br>\n    San Francisco, Ca 94109</p>\n\n    <p>or send us your request electronically <a href="mailto:contact@hashtagsell.com" target="_blank">contact us</a> .</p>\n\n    <p>Questions and Comments.</p>\n\n    <p>If youd like to provide feedback to us about this Privacy Policy, or if you have any questions, please <a href="mailto:contact@hashtagsell.com" target="_blank">contact us</a> . </p>\n\n    <p>Last Modified: 15th May 2015<br>\n     2015 HashtagSell, Inc.</p>\n</div>'),
a.put("js/legal/termsOfService/partials/termsOfService.partial.html",'<style>\n    body, html {\n        background-color: #ECF0F5;\n        overflow-y: auto;\n        overflow-x: hidden;\n        font-weight: 200;\n    }\n</style>\n\n<div class="container">\n    <h3>HashtagSell Terms of Service</h3>\n    <p>Last Updated on May 15th, 2015</p>\n\n    <p>Effective as of May 15th, 2015</p>\n    <p>Use of the Services. We grant you the nonexclusive right to use the Services only for your personal use, subject to these terms. You are solely responsible for all content and other information that you post or submit via the Services (including your listings and any communications you make through the Services with us or other users) and any consequences that may result from your content and other information. You must comply with applicable third party terms of agreement when using the Services (e.g. your wireless data service agreement). Your right to use the Services will terminate immediately if you violate any provision of these terms.</p>\n    <p>Restrictions on Use. As a condition of your use of the Services you agree that you will not:</p>\n    <ul>\n        <li>modify, copy, publish, license, sell, or otherwise commercialize the Services or any information or software associated with the Services;</li>\n        <li>rent, lease or otherwise transfer rights to the Services;</li>\n        <li>use the Services in any manner that could impair any of our websites or applications in any way or interfere with any partys use or enjoyment of any such site or application;</li>\n        <li>violate any laws;</li>\n        <li>violate our <a ui-sref="postingRules">posting rules</a>;\n        <li>post any threatening, abusive, defamatory, obscene or indecent material;</li>\n        <li>be false or misleading;</li>\n        <li>infringe any third-party right;</li>\n        <li>distribute or contain spam, chain letters, or pyramid schemes;</li>\n        <li>impose an unreasonable load on our infrastructure or interfere with the proper working of the Services;</li>\n        <li>copy, modify, or distribute any other persons content without their consent;</li>\n        <li>use any robot spider, scraper or other automated means to access the Services and collect content for any purpose without our express written permission;</li>\n        <li>harvest or otherwise collect information about others, including email addresses, without their consent; and/or</li>\n        <li>bypass measures used to prevent or restrict access to the Services.</li>\n    </ul>\n    <p>Abusing the Services. Please report problems, offensive content and policy breaches to us.</p>\n    <p>Without limiting other remedies, we may issue warnings, limit or terminate the Services, remove hosted content and take technical and legal steps to keep users off the Services if we think that they are creating problems or acting inconsistently with the letter or spirit of our policies. However, whether we decide to take any of these steps, remove hosted content or keep a user off the Services or not, we do not accept any liability for monitoring the Services or for unauthorized or unlawful content on the Services or use of the Services by users. You also recognize and accept that we are not under any obligation to monitor any content or other information that is communicated through or available on the Services.</p>\n    <p>Global Marketplace. Some of our features may display your ad on other sites that are part of the global HashtagSell community, like on eBay Classifieds or our classifieds sites in other countries. By using the Services, you agree that your ads can be displayed on these other sites. The terms for our other sites are similar to these terms, but you may be subject to additional laws or other restrictions in the countries where your ad is posted. When you choose to post your ad on another site, you may be responsible for ensuring that it does not violate our other site policies. We may remove your ad if it is reported on any our sites, or if we believe it causes problems or violates any law or policy.</p>\n    <p>Fees and Services. Using the Services is generally free, but we sometimes charge a fee for certain Services. If the Service you use incurs a fee, youll be able to review and accept terms that will be clearly disclosed at the time you post your ad. Our fees are quoted in US Dollars, and we may change them from time to time. Well notify you of changes to our fee policy by posting such changes on the site. We may choose to temporarily change our fees for promotional events or new services; these changes are effective when we announce the promotional event or new service.</p>\n    <p>Our fees are non-refundable, and you are responsible for paying them when theyre due. If you do not, we may limit your ability to use the Services. If your payment method fails or your account is past due, we may collect fees owed using other collection mechanisms.</p>\n    <p>Intellectual Property &amp; Content. We own, or are the licensee to, all right, title and interest in and to the Services, including all rights under patent, copyright, trade secret, trademark, or unfair competition law, and any and all other proprietary rights, including all applications, renewals, extensions and restorations thereof. You will not modify, adapt, translate, prepare derivative works from, decompile, reverse-engineer, disassemble or otherwise attempt to derive source code from the Services and you will not remove, obscure or alter our copyright notice, trademarks or other proprietary rights notices affixed to, contained within or accessed in conjunction with or by the Services.</p>\n    <p>Our Services contain content from us, you, and other users. Content displayed on or via the Services is protected as a collective work and/or compilation, pursuant to copyrights laws and international conventions. You agree not to copy, distribute, modify, reproduce, copy, sell, resell, or exploit for any purposes any aspect of the Services (other than your own content) without our express written consent.</p>\n    <p>When providing us with content or causing content to be posted using our Services, you grant us a non-exclusive, worldwide, perpetual, irrevocable, royalty-free, sublicensable (through multiple tiers) right to exercise any and all copyright, publicity, trademarks, database rights and other intellectual property rights you have in the content, in any media known now or developed in the future. Further, to the fullest extent permitted under applicable law, you waive your moral rights and promise not to assert such rights or any other intellectual property or publicity rights against us, our sublicensees, or our assignees.</p>\n    <p>Infringement. Do not post content that infringes the rights of third parties, This includes, but is not limited to, content that infringes on intellectual property rights such as copyright and trademark (e.g. offering counterfeit items for sale). A large number of very varied products are offered on the Services by private individuals. Entitled parties, in particular the owners of copyright, trademark rights or other rights owned by third parties can report any offers which many infringe on their rights, and submit a request for this offer to be removed. If a legal representative of the entitled party reports this to us in the correct manner, products infringing on the intellectual property rights will be removed by us.</p>\n    <p>Braintree Service. HashtagSell, Inc. uses Braintree, a division of PayPal, Inc. (Braintree) for payment processing services. By using the Braintree payment processing services you agree to the Braintree Payment Services Agreement available at <a href="https://www.braintreepayments.com/legal/gateway-agreement" target="_blank">https://www.<wbr>braintreepayments.com/legal/<wbr>gateway-agreement</a>, and the applicable bank agreement available at <a href="https://www.braintreepayments.com/legal/cea-wells" target="_blank">https://www.<wbr>braintreepayments.com/legal/<wbr>cea-wells</a>.</p>\n    <p>Reporting Intellectual Property Infringements (HashtagSell Notice and Take Down Program)</p>\n    <p>If you have a good faith belief that your work has been copied in a way that constitutes copyright infringement, or that your intellectual property rights have been otherwise violated, please provide our designated agent with the following information:</p>\n    <ol>\n        <li>a physical or electronic signature of the person authorized to act on behalf of the owner of the copyright or other intellectual property interest that is allegedly infringed;</li>\n        <li>identification or description of the copyrighted work or other intellectual property that you claim has been infringed. If you are asserting infringement of an intellectual property right other than copyright, please specify the intellectual property right at issue (for example, trademark or patent);</li>\n        <li>identification or description of where the material that you claim is infringing is located within the Services, with enough detail that we may find it;</li>\n        <li>your address, telephone number, and email address;</li>\n        <li>a statement by you that you have a good faith belief that the use of the material complained of is not authorized by the copyright or intellectual property owner, its agent, or the law;</li>\n        <li>a statement by you, made under penalty of perjury, that the information in your notice is accurate and that you are the copyright or intellectual property owner or authorized to act on the copyright or intellectual property owner&#39;s behalf. Our agent designated to receive claims of copyright or other intellectual property infringement may be contacted as follows:</li>\n    </ol>\n    <p>By mail:<br>\n        Attn: HashtagSell<br>\n        1819 Polk Street #323<br>\n        San Francisco, Ca  94109</p>\n    <p>By phone: (415)-662-8809</p>\n    <p>By email: <a href="mailto:copyright@hashtagsell.com" target="_blank">copyright@hashtagsell.com</a></p>\n    <p>We have adopted and implemented a policy that provides for the termination in appropriate circumstances of the accounts of users who repeatedly infringe copyrights or other intellectual property rights of ours and/or others.</p>\n    <p>Other Users; Release. You agree not to hold us responsible for things other users post or do. We do not review users postings and (except as may be expressly set out in these terms) are not involved in the actual transactions between users. As most of the content on the Services comes from other users, we do not guarantee the accuracy of postings or user communications or the quality, safety, or legality of whats offered. If you have a dispute with one or more users, you release us (and our affiliates and subsidiaries, and our and their respective officers, directors, employees and agents) from claims, demands and damages (actual and consequential) of every kind and nature, known and unknown, arising out of or in any way connected with such disputes. In entering into this release you expressly waive any protections (whether statutory or otherwise) that would otherwise limit the coverage of this release to include only those claims which you may know or suspect to exist in your favor at the time of agreeing to this release.</p>\n    <p>Disclaimer of Warranties. WE DISCLAIM RESPONSIBILITY FOR ANY HARM RESULTING FROM YOUR USE OF THE SERVICES. THE SERVICES, INCLUDING OTHER SERVICE(S) ACCESSED BY THE APPLICATION ARE PROVIDED AS IS AND AS AVAILABLE. WE EXPRESSLY DISCLAIM TO THE FULLEST EXTENT PERMITTED BY LAW ALL EXPRESS, IMPLIED AND STATUTORY WARRANTIES, INCLUDING WITHOUT LIMITATION THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE, AND NON-INFRINGEMENT OF PROPRIETARY RIGHTS, AND ANY WARRANTIES REGARDING THE SECURITY, RELIABILITY, TIMELINESS AND PERFORMANCE OF THE SERVICES. YOU DOWNLOAD THE APPLICATION AND USE THE SERVICES AT YOUR OWN DISCRETION AND RISK, AND YOU ARE SOLELY RESPONSIBLE FOR ANY DAMAGES TO YOUR HARDWARE DEVICE(S) OR LOSS OF DATA THAT RESULTS FROM THE DOWNLOAD OF THE APPLICATION OR USE OF THE SERVICES. WE CANNOT GUARANTEE CONTINUOUS, ERROR-FREE OR SECURE ACCESS TO THE SERVICES OR THAT DEFECTS IN THE SERVICES WILL BE CORRECTED. NOTIFICATION FUNCTIONALITY IN THE APPLICATION MAY NOT OCCUR IN REAL TIME. SUCH FUNCTIONALITY IS SUBJECT TO DELAYS BEYOND OUR CONTROL, INCLUDING WITHOUT LIMITATION, DELAYS OR LATENCY DUE TO YOUR PHYSICAL LOCATION OR YOUR WIRELESS DATA SERVICE PROVIDERS NETWORK.</p>\n    <p>Limitation of Liability. We are not liable to you or any user for any use or misuse of the Services. This exclusion: (a) includes direct, indirect, incidental, consequential, special, exemplary and punitive damages, whether such claim is based on warranty, contract, tort or otherwise (even if we have been advised of the possibility of such damages); (b) applies whether damages arise from use or misuse of and reliance on the Services, from inability to use the Services, or from the interruption, suspension, or termination of the Services (including any damages incurred by third parties); and (c) applies notwithstanding a failure of the essential purpose of any limited remedy and to the fullest extent permitted by law.</p>\n    <p>Despite the previous paragraph, if we are found to be liable, our liability to you or any third party (whether based on contract, tort, negligence, strict liability or otherwise) is limited to the greater of (a) the total fees you pay to us in the 12 months prior to the action giving rise to liability, and (b) 100 US dollars.</p>\n    <p>Some jurisdictions do not allow the disclaimer of warranties or exclusion of damages, so the disclaimers in the preceding section and the above limitations and exclusions of liability may not apply to you.</p>\n    <p>Indemnification. You will indemnify and hold harmless us (and our affiliates and subsidiaries, and our and their respective officers, directors, employees, agents) against and from any claim or demand, including reasonable legal fees, made by any third party due to or arising out of your conduct, your use of the Services, any alleged violation of these terms, and any alleged violation of any applicable law or regulation. We reserve the right, at our own expense, to assume the exclusive defense and control of any matter subject to indemnification by you, but doing so will not excuse your indemnity obligations. Security. We reserve the right at our discretion to take whatever action we find necessary to preserve the security, integrity and reliability of our network and back-office applications.</p>\n    <p>Changes to the Services or Terms of Use. We reserve the right to make changes to the Services and/or these terms from time to time. Any material changes will take effect when you next use the Services or after 30 days, whichever is sooner. If you do not agree to any change, please uninstall the Application and discontinue your use of the Services. No other amendment to these terms will be effective unless made in writing, signed by users and by us.</p>\n    <p>Compliance with Certain Laws. You are responsible for complying with trade regulations and both foreign and domestic laws. You represent and warrant that you are not located in a country that is subject to a US Government embargo, or that has been designated by the US Government as a terrorist supporting country and you are not listed on any US Government list of prohibited or restricted parties. Our Application or its underlying technology may not be downloaded to or exported or re-exported: (a) into (or to a resident or national of) Cuba, Iraq, Iran, Libya, North Korea, Syria or any other country subject to United States embargo; (b) to anyone on the US Treasury Departments list of Specially Designated Nationals or on the US Commerce Departments Denied Party or Entity List; and (c) you will not export or re-export this Application to any prohibited country, person, end-user or entity specified by US Export Laws.</p>\n    <p>Miscellaneous Provisions. These terms and the other policies posted on or accessed by the Services constitute the entire agreement between you and us regarding the subject matter of these terms, superseding any prior agreements relating to that subject matter. To the extent permitted by applicable law, these terms shall be governed and construed in all respects by the laws of the State of California without regard to its conflict of law provisions. You agree that any claim or dispute you may have against us must be resolved by the courts of the United States, and you and we both agree to submit to the non-exclusive jurisdiction of San Francisco, California. If we do not enforce any particular provision, we are not waiving our right to do so later. If a court strikes down any of these terms, the remaining terms will survive. We may automatically assign these terms in our sole discretion in accordance with the notice provision below. Except for notices relating to illegal or infringing content, your notices to us must be sent by registered mail to:</p>\n    <p>HashtagSell<br>\n    1819 Polk Street #323<br>\n    San Francisco, Ca  94109</p>\n    <p>We will send notices to you via the email address you provide, or by registered mail. Notices sent by registered mail will be deemed received five days following the date of mailing.</p>\n    <p>Last Modified: 15th May 2015<br>\n     2015 HashtagSell, Inc.</p>\n</div>'),a.put("js/modalConfirmation/partials/modalConfirmation.html",'<div class="modal-header">\n    <h3>{{modalOptions.headerText}}</h3>\n</div>\n<div class="modal-body">\n    <p>{{modalOptions.bodyText}}</p>\n</div>\n<div class="modal-footer">\n    <button type="button" class="btn"\n            data-ng-click="modalOptions.close()">{{modalOptions.closeButtonText}}</button>\n    <button class="btn btn-primary"\n            data-ng-click="modalOptions.ok();">{{modalOptions.actionButtonText}}</button>\n</div>'),a.put("js/myPosts/meetings/partials/myPosts.meetings.html",'<div ng-repeat="offer in post.offers.results">\n\n    <div style="border: 1px solid; border-color: #e5e6e9 #dfe0e4 #d0d1d5; margin-bottom: 20px; padding: 0px;" class="col-md-10 col-xs-12" ng-class="{ \'proposal-sent\': offer.proposals[cachedOffers[$index].proposals.length - 1].isOwnerReply, \'proposal-accepted\': offer.proposals[cachedOffers[$index].proposals.length - 1].acceptedAt }" ng-class="{ \'proposal-sent\': offer.proposals[cachedOffers[$index].proposals.length - 1].isOwnerReply, \'proposal-accepted\': offer.proposals[cachedOffers[$index].proposals.length - 1].acceptedAt }" construct-my-posts-overlay-message offer="offer" post="post" message="css content string dynamically added">\n        <div style="background-color: #ffffff; padding: 10px;">\n            <div>\n                <img ng-src="{{offer.userProfile.profile_photo}}" height="40" style="position: relative; top: -12px;">\n                <div style="display: inline-block">\n                    <div>\n                        @{{offer.username}}\n                    </div>\n                    <div>\n                        {{offer.modifiedAt | date:"MMMM d \'at\' h:mma"}}\n                    </div>\n                </div>\n\n                <div class="form-group">\n\n                    <div>\n                        <span ng-show="offer.proposals[cachedOffers[$index].proposals.length - 1].comment"><i>"{{offer.proposals[cachedOffers[$index].proposals.length - 1].comment}}"</i></span>\n                    </div>\n\n                    <br>\n\n                    <div class="controls">\n                        <div class="input-group input-group-lg">\n                            <span class="input-group-addon">$</span>\n                            <input class="form-control" type="text" id="price" name="price" ng-model="offer.proposals[offer.proposals.length - 1].price.value" ng-disabled="true"/>\n                        </div>\n                    </div>\n\n                    <br>\n\n                    <div class="controls">\n                        <div class="input-group input-group-lg">\n                            <span class="input-group-addon">@</span>\n                            <input class="form-control" type="text" id="location" name="location" ng-model="offer.proposals[offer.proposals.length - 1].where" ng-disabled="true"/>\n                        </div>\n                    </div>\n\n                    <br>\n\n                    <div class="btn-group" role="group">\n                        <label class="btn btn-default btn-lg" disabled="true"><i class="fa fa-clock-o"></i></label>\n                        <label class="btn btn-default btn-lg" ng-repeat="proposedTime in offer.proposals[offer.proposals.length - 1].when" btn-radio="proposedTime" ng-model="acceptedTime.model" ng-change="errors.message = null">{{proposedTime | date:\'MMM d, h:mm a\'}}</label>\n                    </div>\n\n                    <div ng-show="errors.message">\n                        <span class="text-danger">{{errors.message}}</span>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n        <div class="read-question">\n\n            <div style="display: inline-block; position: relative;">\n                <button class="btn btn-primary" ng-click="counterOffer($index, offer.proposals[offer.proposals.length - 1])">Send Counter Offer</button>\n            </div>\n\n            <div style="display: inline-block; position: relative;">\n                <button class="btn btn-success" ng-click="acceptDeal($index, offer.proposals[offer.proposals.length - 1])">Accept Offer</button>\n            </div>\n\n        </div>\n    </div>\n\n\n</div>\n<div class="col-xs-12">\n    <span ng-show="!post.offers.results.length">Buyer\'s offers will appear here.</span>\n</div>'),a.put("js/myPosts/partials/myPosts.html",'<div ui-view></div>\n\n<div class="outer-container-myposts custom-myposts-well">\n\n    <div ng-show="!userPosts.data.length" class="background-instructions">\n        <div class="inset-background-text">\n            :( Awww... You\'re not selling anything.  <span ng-click="newPost();" style="cursor: pointer; color: rgb(66, 139, 202);">Try it out?</span>\n        </div>\n    </div>\n\n\n    <div ng-show="userPosts.data.length">\n        <table class="table table-striped table-hover" ng-table="tableParams">\n            <thead>\n                <tr>\n                    <th>\n                        <!--<input type="text" ng-model="filters.$" placeholder="Search Favorites" style="width:98%; margin:0px;"/>-->\n                    </th>\n                    <th>\n                        <input class="form-control" ng-model="filters.$" placeholder="Filter posts" />\n                    </th>\n                </tr>\n            </thead>\n        </table>\n\n        <div class="inner-myposts-container">\n            <div class="myposts-container">\n\n                <table class="table table-striped table-hover" ng-show="userPosts.data.length" ng-table="tableParams">\n                    <thead>\n\n                    </thead>\n                    <tbody>\n\n                        <!--TODO: Open splash on click-->\n                        <tr ng-repeat-start="post in $data" style="cursor: pointer" ng-click="openSplash(post)">\n\n                            <td style="width:1px;">\n                                <img ng-show="post.images.length" ng-src="{{post.images[0].thumbnail || post.images[0].full}}" style="height:70px; width: 70px;">\n                                <div ng-show="!post.images.length" class="myPosts-noImage-Placeholder"></div>\n                            </td>\n\n                            <td>\n                                <h4>\n                                    {{::post.heading | cleanHeading}} - {{::post.askingPrice.value | currency : $ : 0}}\n                                    <span ng-show="post.facebook" class="label label-primary" ng-click="showFacebookPost(post); $event.stopPropagation();" tooltip="Show Facebook post" tooltip-trigger="mouseenter" tooltip-placement="bottom" style="font-weight: inherit;">Facebook</span>\n                                    <span ng-show="post.twitter" class="label label-info" ng-click="showTwitterPost(post); $event.stopPropagation();" tooltip="Show Twitter Post" tooltip-trigger="mouseenter" tooltip-placement="bottom" style="font-weight: inherit;">Twitter</span>\n                                    <span ng-show="post.ebay" class="label label-warning" ng-click="showEbayPost(post); $event.stopPropagation();" tooltip="Show Ebay Post" tooltip-trigger="mouseenter" tooltip-placement="bottom" style="font-weight: inherit;">Ebay</span>\n                                </h4>\n\n                                <!--<div ng-bind-html="post.body"/>-->\n\n                                <div style="float: left;">\n                                    <button class="btn btn-default" type="button" ng-init="unreadQuestionsCount = countUnreadQuestions(post);" ng-click="expandCollapseQuestions($event, post)">\n                                        <i class="fa" ng-class="post.currentlyViewing.questions ? \'fa-chevron-down\' : \'fa-chevron-right\'"></i> Questions <span ng-if="unreadQuestionsCount > 0" class="badge">{{unreadQuestionsCount}}</span>\n                                    </button>\n\n                                    <button class="btn btn-default" type="button" ng-init="unreadOffersCount = countUnreadOffers(post);" ng-click="expandCollapseMeetingRequests($event, post)">\n                                        <i class="fa" ng-class="post.currentlyViewing.meetings ? \'fa-chevron-down\' : \'fa-chevron-right\'"></i> Offers <span ng-if="unreadOffersCount > 0" class="badge">{{unreadOffersCount}}</span>\n                                    </button>\n                                </div>\n\n                                <div style="float: right;">\n                                    <i class="fa fa-trash-o fa-2x" ng-click="deletePost(post); $event.stopPropagation();" style="margin-right: 20px;" tooltip="Delete post" tooltip-trigger="mouseenter" tooltip-placement="left"></i>\n                                    <i class="fa fa-pencil-square-o fa-2x" ng-click="editPost(post); $event.stopPropagation();" style="margin-right: 20px;" tooltip="Edit post" tooltip-trigger="mouseenter" tooltip-placement="left"></i>\n                                </div>\n                            </td>\n                        </tr>\n\n                        <tr ng-show="currentState === \'myposts.questions\' && expandedPostingId === post.postingId" style="background-color: rgb(253, 253, 253);">\n                            <td colspan="2" style="background-color: rgb(253, 253, 253);">\n                                <owner-questions-more-info post="post"></owner-questions-more-info>\n                            </td>\n                        </tr>\n\n                        <tr ng-repeat-end ng-show="currentState === \'myposts.meetings\' && expandedPostingId === post.postingId" style="background-color: rgb(253, 253, 253);">\n                            <td colspan="2" style="background-color: rgb(253, 253, 253);">\n                                <owner-meetings-more-info post="post"></owner-meetings-more-info>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>'),a.put("js/myPosts/questions/partials/myPosts.questions.html",'<div ng-repeat="question in post.questions.results">\n    <div style="border: 1px solid; border-color: #e5e6e9 #dfe0e4 #d0d1d5; margin-bottom: 20px; padding: 0px;" class="col-md-10 col-xs-12">\n        <div style="background-color: #ffffff; padding: 10px;">\n            <div>\n                <img ng-src="{{question.userProfile.profile_photo}}" height="40" style="position: relative; top: -12px;">\n                <div style="display: inline-block">\n                    <div>\n                        @{{question.username}}\n                    </div>\n                    <div>\n                        {{question.modifiedAt | date:"MMMM d \'at\' h:mma"}}\n                    </div>\n                </div>\n                <div>\n                    <div class="dropdown" dropdown on-toggle="toggled(open)" style="position: absolute; top: 10px; right: 15px;">\n                      <a href class="dropdown-toggle" dropdown-toggle><i class="fa fa-chevron-down"></i></a>\n                      <ul class="dropdown-menu dropdown-menu-right">\n                          <li>\n                              <a href ng-click="deleteQuestion(question.postingId, question.questionId, $index)">Delete Question</a>\n                          </li>\n                      </ul>\n                    </div>\n                </div>\n                <div>\n                    Q: {{question.value}}\n                </div>\n                <div ng-show="question.answers.length">\n                    <div ng-repeat="answer in question.answers">\n                        A: {{answer.value}}\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div ng-class="question.answers.length ? \'read-question\' : \'unread-question\'">\n            <img ng-src={{userObj.user_settings.profile_photo}} height="32">\n            <div style="display: inline-block; width: 70%; position: relative; top: 5px;">\n                <input class="col-md-7 col-xs-12 form-control" height="32" style="position: relative; top: 8px;" ng-keyup="$event.keyCode == 13 && submitAnswer(question, $index)" placeholder="Add answer" ng-model="question.givenAnswer"/>\n            </div>\n            <button class="btn btn-primary" ng-click="submitAnswer(question, $index)">Send</button>\n        </div>\n    </div>\n</div>\n<div class="col-xs-12">\n    <!--<a ng-show="showAnswered && post.questions.results.length" ng-click="showAnswered = !showAnswered">Hide questions already answered?</a>-->\n    <!--<a ng-show="!showAnswered && post.questions.results.length" ng-click="showAnswered = !showAnswered">Show questions already answered?</a>-->\n    <span ng-show="!post.questions.results.length">Buyer\'s questions about your {{post.heading | capitalize}} will appear here.</span>\n</div>'),a.put("js/newPost/modals/congrats/partials/newPost.congrats.html",'<div>\n    <div class="modal-body">\n        <div style="text-align: center">\n            <i class="fa fa-check-circle fa-5x" style="color:#428bca"></i>&nbsp;<span style="font-size: 36px;">Congratulations!</span>\n            <br>\n            <!--<h5>You can edit or modify your post <a ui-sref="selling">here</a> or share this link with others-->\n                <!--<a ng-href="https://www.hashtagsell.com/#/{{newPost.postingId}}">www.HashtagSell.com/#/{{newPost.postingId}}</a>.-->\n            <!--</h5>-->\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="dismiss(\'dismiss\')">Done</button>\n    </div>\n</div>'),a.put("js/newPost/modals/newPost/partials/newPost.html",'<div class="modal-header hts-post-title">\n    <!--<span class="pull-left hover-pointer" ng-click="alert(\'fullscreen zen editor soon.\')">-->\n        <!--<i class="fa fa-arrows-alt"></i>-->\n    <!--</span>-->\n    <span ng-show="!jsonObj.category_name  && !manualCategorySelect.show">Create New Post</span>\n    <select ng-show="jsonObj.category_name || manualCategorySelect.show" ng-change="manualCategorySelect.init()" class="btn btn-mini category-select" ng-model="jsonObj.category" tooltip-placement="bottom" tooltip="{{manualCategorySelect.tooltip}}" tooltip-trigger="show">\n        <optgroup ng-repeat="category in allCategories" label="{{category.name}}">\n            <option ng-repeat="childCategory in category.categories" value="{{childCategory.code}}">{{childCategory.name | capitalize}}</option>\n        </optgroup>\n    </select>\n    <span ng-show="jsonObj.category_name" class="drop-down-caret">\n        <i class="fa fa-angle-down"></i>\n    </span>\n\n    <span class="close-sell-box" ng-click="dismiss(\'cancel post\')">\n        <i class="fa fa-close" style="font-size: 1.5em;"></i>\n    </span>\n\n</div>\n<div class="modal-body dropzone hts-post-modal-body" dropzone="dropzoneConfig">\n\n    <alert type="info" style="font-size: 17px;" close="clearExampleReminder()" ng-show="toggleExampleVisibility">\n        <b>Example: </b>\n        "<i>I\'m selling my <span class="mention-highlighter" contenteditable="false">#item name</span>&nbsp;\n        for  <span  class="mention-highlighter-price" contenteditable="false">$item price</span>&nbsp;\n        <span class="mention-highlighter-location" contenteditable="false">@meeting location</span>&nbsp;"</i>\n        <br>\n        <br>\n        <small>Pro tip: Multiple hashtags make our product prediction smarter!  Also, don\'t include a price if you\'re listing an item for free.</small>\n        <br>\n        <br>\n        <button ng-show="!showDemo" class="btn btn-primary" ng-click="hideDemo()">Show video example</button>\n        <button ng-show="showDemo" class="btn btn-primary" ng-click="hideDemo()">Stop video</button>\n    </alert>\n\n    <alert ng-repeat="banner in alerts.banners" type="{{banner.type}}" close="closeAlert($index)">{{banner.msg}}</alert>\n\n    <!--<pre>-->\n        <!--{{jsonObj}}-->\n    <!--</pre>-->\n\n    <img class=\'sell-box-image img-responsive\' ng-src=\'{{img}}\' ng-show="showDemo"/>\n\n    <div class="sell-box" ng-show="!showDemo">\n        <div class="row remove-row-margins">\n            <div class="hts-input-container">\n                <div id="htsPost"\n                     ng-class="jsonObj.category_name ? \'col-md-10\' : \'col-md-12\' "\n                     class="hts-input needsclick" style="clear:both;"\n                     mentio\n                     contenteditable\n                     sellbox\n                     ng-paste="handlePaste($event)"\n                     ng-focus="clearPlaceholder()"\n                     mentio-require-leading-space="false"\n                     mentio-macros="macros"\n                     mentio-id="\'hashtag\'"\n                     mentio-typed-term="typedTerm"\n                     ng-model="jsonObj.body">\n                    <span>Try it yourself, begin typing here...</span>\n                </div>\n\n                <div ng-class="{ \'hts-annotations-container\' : jsonObj.category_name}">\n                    <div ng-show="jsonObj.annotations.length" ng-repeat="annotation in jsonObj.annotations">\n                        <input ng-model="jsonObj.annotations[$index].value" placeholder="{{annotation.key}}" class="hts-annotation-input">\n                    </div>\n                    <div ng-show="!jsonObj.annotations.length && jsonObj.category_name">\n                        <div class="spinner">\n                            <div class="bounce1"></div>\n                            <div class="bounce2"></div>\n                            <div class="bounce3"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n\n        <div class="row remove-row-margins">\n            <div class="inset-toolbar">\n                <div>\n                    <div style="position: absolute; bottom: 15px;">\n                        <button id="imageUpload" class="btn btn-primary needsclick" style="height: 45px; border-radius: 0px 0px 0px 4px;">\n                            <i class="fa fa-camera"></i> Add photo\n                        </button>\n                    </div>\n\n                    <progressbar value="uploadProgress" id="imgPreviewsContainer" class="dz-preview-container progress-striped active">{{uploadMessage}}</progressbar>\n\n                    <div style="position: absolute; right: 15px; bottom: 15px;" class="sellModalButton" popover-placement="left" popover="Publish on Amazon, eBay, Craigslist, and HashtagSell!" popover-trigger="show">\n                        <button class="btn btn-primary" ng-click="validatePost()" style="height: 45px; border-radius: 0px 0px 4px 0px;">\n                            <i class="fa fa-slack"></i> Sell It\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n<!--ng-TEMPLATES-->\n\n<mentio-menu id="mentioMenu" class="mentioMenuProducts"\n        mentio-for="\'hashtag\'"\n        mentio-trigger-char="\'#\'"\n        mentio-items="products"\n        mentio-template-url="/product-mentions.tpl"\n        mentio-search="searchProducts(term)"\n        mentio-select="getProductTextRaw(item)">\n</mentio-menu>\n\n<mentio-menu id="mentioMenu" class="mentioMenuPlaces"\n        mentio-for="\'hashtag\'"\n        mentio-trigger-char="\'@\'"\n        mentio-items="places"\n        mentio-template-url="/place-mentions.tpl"\n        mentio-search="searchPlaces(term)"\n        mentio-select="getPlacesTextRaw(item)">\n</mentio-menu>\n\n<mentio-menu id="mentioMenu" class="mentioMenuPrices"\n        mentio-for="\'hashtag\'"\n        mentio-trigger-char="\'$\'"\n        mentio-items="prices"\n        mentio-template-url="/price-mentions.tpl"\n        mentio-search="searchPrice(term)"\n        mentio-select="getPricesTextRaw(item)">\n</mentio-menu>\n\n<script type="text/ng-template" id="/product-mentions.tpl">\n    <ul class="list-group user-search demo-scrollable-menu">\n        <li mentio-menu-item="product" ng-repeat="product in items" class="list-group-item">\n\n            <span class="text-primary" ng-bind-html="product.value | mentioHighlight:typedTerm:\'menu-highlighted\' | unsafe"></span>\n\n        </li>\n    </ul>\n</script>\n\n<script type="text/ng-template" id="/place-mentions.tpl">\n    <ul class="list-group user-search demo-scrollable-menu">\n        <li mentio-menu-item="place" ng-repeat="place in items" class="list-group-item">\n\n            <span class="text-primary" ng-bind-html="place.description | mentioHighlight:typedTerm:\'menu-highlighted\' | unsafe"></span>\n\n        </li>\n    </ul>\n</script>\n\n\n<script type="text/ng-template" id="/price-mentions.tpl">\n    <ul class="list-group user-search demo-scrollable-menu">\n        <li mentio-menu-item="price" ng-repeat="price in items" class="list-group-item">\n\n            <span class="text-primary" ng-bind-html="price.suggestion | mentioHighlight:typedTerm:\'menu-highlighted\' | unsafe"></span>\n\n        </li>\n    </ul>\n</script>\n\n\n<script type="text/ng-template" id="dropzone-thumbnail.html">\n        <div class="dz-preview">\n            <img data-dz-thumbnail />\n            <i data-dz-remove class="fa fa-times dz-remove"></i>\n        </div>\n        <div>\n            <strong class="error text-danger" data-dz-errormessage></strong>\n        </div>\n</script>\n'),
a.put("js/newPost/modals/pushToExternalSources/partials/newPost.pushToExternalSources.html",'<div class="modal-header">\n    <h3 class="modal-title" style="text-align: center">Share To</h3>\n</div>\n<div class="modal-body">\n\n    <!--<div class="component">-->\n        <div class="icon icon-mono facebook" ng-class="{ \'hold\': shareToggles.facebook}" ng-click="shareToggles.facebook = !shareToggles.facebook; checkIfFacebookTokenValid();">\n            <div ng-show="currentlyPublishing.facebook" class="circ-spinner"></div>\n        </div>\n        <div class="icon icon-mono twitter" ng-class="{ \'hold\': shareToggles.twitter}" ng-click="shareToggles.twitter = !shareToggles.twitter; checkIfTwitterTokenValid()">\n            <div ng-show="currentlyPublishing.twitter" class="circ-spinner"></div>\n        </div>\n        <div class="icon icon-mono ebay" ng-class="{ \'hold\': shareToggles.ebay}" ng-click="shareToggles.ebay = !shareToggles.ebay; checkIfEbayTokenValid()">\n            <div ng-show="currentlyPublishing.ebay" class="circ-spinner"></div>\n        </div>\n        <div class="icon icon-mono amazon" ng-class="{ \'hold\': shareToggles.amazon}" ng-click="shareToggles.amazon = !shareToggles.amazon">\n            <div ng-show="currentlyPublishing.amazon" class="circ-spinner"></div>\n        </div>\n        <!--<div class="icon icon-mono online-payment" ng-class="{ \'hold\': onlinePayment.allow}" ng-click="onlinePayment.allow = !onlinePayment.allow">-->\n            <!--<div ng-show="currentlyPublishing.onlinePayment" class="circ-spinner"></div>-->\n        <!--</div>-->\n    <!--</div>-->\n\n    <h3 id="instructions">Boost your post\'s visibility and allow online payment.</h3>\n    <h3 id="facebookBlurb">Share to your facebook timeline for friends to see.</h3>\n    <h3 id="twitterBlurb">Share to your twitter timeline for friends to see.</h3>\n    <h3 id="ebayBlurb">Share to your existing Ebay account.</h3>\n    <h3 id="amazonBlurb">Coming soon!  Share to Amazon.</h3>\n    <!--<h3 id="onlinePaymentBlurb">Allow buyer to send online payment.</h3>-->\n\n    <!--{{shareToggles}}-->\n    <!--{{onlinePayment}}-->\n\n</div>\n<div class="modal-footer">\n    <button class="btn" ng-class="currentlyPublishing.publishing ? \'btn-warning\' : \'btn-primary\'" ng-click="dismiss(\'stageTwoSuccess\')" ng-disabled="{{currentlyPublishing.publishing}}">\n        <span ng-show="!currentlyPublishing.publishing && shareToggles.facebook ||\n         !currentlyPublishing.publishing && shareToggles.twitter ||\n         !currentlyPublishing.publishing && shareToggles.ebay ||\n         !currentlyPublishing.publishing && shareToggles.amazon">Share</span>\n\n\n        <span ng-show="!currentlyPublishing.publishing && !shareToggles.facebook && !shareToggles.twitter && !shareToggles.ebay && !shareToggles.amazon">Continue without sharing</span>\n\n        <span ng-show="currentlyPublishing.publishing">Please wait</span>\n    </button>\n</div>'),a.put("js/notifications/partials/notifications.html",'<!--<div class="background-instructions">-->\n    <!--<div class="inset-background-text">-->\n        <!--Coming soon!  We\'ll notify you when items you\'re looking for appear online. :)-->\n    <!--</div>-->\n<!--</div>-->\n\n<div class="outer-container-myposts custom-myposts-well">\n\n    <div ng-show="!userPosts.data.length" class="background-instructions">\n        <div class="inset-background-text">\n            Coming soon!  Tell us what you\'re looking for and we\'ll send you notifications.\n        </div>\n    </div>\n</div>\n\n<!--<div class="outer-container">-->\n    <!--<div class="inner-container" vs-repeat vs-offset-before="200" vs-excess="100">-->\n\n        <!--<div class="well notification-item" ng-repeat="item in items.collection">-->\n            <!--<div class="col-lg-12">-->\n                <!--<span>{{$index}} - {{item.text}}</span>-->\n            <!--</div>-->\n        <!--</div>-->\n\n    <!--</div>-->\n<!--</div>-->'),a.put("js/payment/partials/payment.partial.html",'<style>\n    .top-level {\n        height: 100%;\n    }\n\n    .body-main {\n        background: url("//static.hashtagsell.com/htsApp/backdrops/flyingPigeon_dark_compressed.jpg") no-repeat center center fixed;\n        background-size: cover;\n        height: 100%;\n        width: 100%;\n    }\n\n    .root {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        overflow-y: auto;\n        overflow-x: hidden;\n    }\n</style>\n\n\n<!--TODO: Test on iphone, handle if images are not present, overflow y scroll testing-->\n<div class="payment-container col-lg-6 col-lg-offset-3 col-md-8 col-md-offset-2 col-xs-12" style="position: relative">\n\n    <div class="inner-payment-container">\n\n        <div class="payment-logo-container">\n            <img src="//static.hashtagsell.com/logos/hts/HTS_Logo_White_512w.png" class="payment-hts-logo">\n        </div>\n\n\n        <div style="text-align: center; margin-top: 10px; margin-bottom: 10px;" ng-if="posting.images[0].thumbnail || posting.images[0].full">\n            <img ng-show="sellerProfile.user.profile_photo" ng-src="{{sellerProfile.user.profile_photo}}" class="img-circle" style="height: 80px; border: 5px solid #fff; display: inline-block; position: relative; right: -50px;">\n            <img ng-show="posting.images[0].thumbnail || posting.images[0].full" ng-src="{{posting.images[0].thumbnail || posting.images[0].full}}" class="img-thumbnail" style="max-height: 120px;">\n            <img ng-show="buyerProfile.user.profile_photo" ng-src="{{buyerProfile.user.profile_photo}}" class="img-circle" style="height: 80px; border: 5px solid #fff; display: inline-block; position: relative; left: -50px;">\n        </div>\n\n        <div style="text-align: center; margin-top: 10px; margin-bottom: 10px;" ng-if="!posting.images[0].thumbnail || !posting.images[0].full">\n            <img ng-show="sellerProfile.user.profile_photo" ng-src="{{sellerProfile.user.profile_photo}}" class="img-circle" style="height: 80px; border: 5px solid #fff; display: inline-block;">\n            <div style="font-weight: 200!important; font-size: 36px; color: white">{{posting.heading}}</div>\n            <img ng-show="buyerProfile.user.profile_photo" ng-src="{{buyerProfile.user.profile_photo}}" class="img-circle" style="height: 80px; border: 5px solid #fff; display: inline-block;">\n        </div>\n\n        <alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)">\n            <span ng-bind-html="alert.msg"></span>\n        </alert>\n\n        <form action="/payments/purchase" method="post" ng-show="!alerts.length">\n\n            <braintree-dropin options="dropinOptions">\n                Loading payment form...\n            </braintree-dropin>\n\n            <input type="hidden" name="token" value="{{posting.postingId}}"/>\n\n            <button type="submit" class="btn btn-lg btn-primary btn-block">Send {{posting.askingPrice.value| currency : $}} to {{posting.username}}</button>\n\n        </form>\n\n    </div>\n\n</div>'),a.put("js/peerReview/partials/peerReview.partial.html",'<style>\n    .top-level {\n        height: 100%;\n    }\n\n    .body-main {\n        background: url("//static.hashtagsell.com/htsApp/backdrops/flyingPigeon_dark_compressed.jpg") no-repeat center center fixed;\n        background-size: cover;\n        height: 100%;\n        width: 100%;\n    }\n\n    .root {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        overflow-y: auto;\n        overflow-x: hidden;\n    }\n\n    .glyphicon-star, .glyphicon-star-empty {\n        font-size: 3em;\n        color: gold;\n    }\n\n    .peer-review-container {\n        background: rgba(255, 255, 255, 0.9);\n        border-radius: 4px;\n        text-align: center;\n        font-weight: 100 !important;\n        padding: 20px 10px 20px 10px;\n        position: relative;\n        top: -40px;\n    }\n\n    .reviewee-photo-container{\n        text-align: center;\n        margin-top: 10px;\n        margin-bottom: 10px;\n        position: relative;\n        z-index: 1;\n    }\n\n    .reviewee-photo {\n        height: 80px;\n        border: 5px solid #fff;\n        display: inline-block;\n    }\n\n    .submit-button{\n        position: relative;\n        top: -30px;\n    }\n</style>\n\n\n<div class="review-container col-lg-4 col-lg-offset-4 col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2 col-xs-12" style="position: relative">\n\n    <div class="inner-review-container">\n\n        <div class="review-logo-container">\n            <img src="//static.hashtagsell.com/logos/hts/HTS_Logo_White_512w.png" class="payment-hts-logo">\n        </div>\n\n        <div class="reviewee-photo-container">\n            <img ng-show="reviewee.user.profile_photo" ng-src="{{reviewee.user.profile_photo}}" class="img-circle reviewee-photo">\n        </div>\n\n        <div ng-show="!alerts.length">\n            <form class="peer-review-container">\n\n                <h3>How was your experience?</h3>\n                <div ng-init="review.rating = 0">\n                    <rating ng-model="reviewForm.rating" max="5" state-on="\'glyphicon-star\'" state-off="\'glyphicon-star-empty\'"></rating>\n                </div>\n\n                <textarea ng-model="reviewForm.comment" class="form-control" rows="5" placeholder="Optional Feedback"></textarea>\n\n            </form>\n            <button type="submit" class="btn btn-lg btn-primary btn-block submit-button">Submit</button>\n        </div>\n\n    </div>\n\n</div>'),a.put("js/profile/partials/profile.partial.html",'<div class="outer-container">\n    <div class="inner-container-padding">\n        <tabset>\n            <tab ng-repeat="tab in nav" heading="{{tab.title}}" active="tab.active" disabled="tab.disabled">\n                {{tab.data}}\n            </tab>\n        </tabset>\n    </div>\n</div>'),a.put("js/results/partials/results_partial.html",'<div ui-view></div>\n\n<div ng-show="status.error.message" class="background-instructions">\n    <div class="inset-background-text" ng-bind-html="status.error.message">\n\n    </div>\n</div>\n\n<div class="outer-container">\n    <spinner ng-if="status.pleaseWait" class="spinner-container" spinner-text=\'Finding "searchTerm" for sale around you...\' spinner-attribute="{{queryObj.q}}"></spinner>\n    <div class="results-container" resize-grid ng-class="{ \'split-results-container\' : views.showMap }">\n        <!--GRID VIEW-->\n        <div vs-repeat class="inner-container" vs-size="rowHeight" vs-offset-before="77" vs-excess="5" on-vs-index-change="infiniteScroll(startIndex, endIndex)" ng-show="views.gridView">\n            <div ng-repeat="row in results.gridRows" style="width: 100%;">\n                <div ng-repeat="result in row.rowContents"\n                     ng-click="openSplash(this)"\n                     class="grid-item"\n                     style="width: {{results.gridPercentageWidth}}%;"\n                        >\n                    <div class="thumbnail" style="cursor: pointer">\n                        <div ng-show="result.external.source.code === \'HSHTG\'" class="hshtg-ribbon"><span>HashtagSell</span></div>\n                        <ribbon-grid ng-if="result.askingPrice.value">{{result.askingPrice.value | currency : $ : 0}}</ribbon-grid>\n                        <hts-fave-toggle class="starPositioning"></hts-fave-toggle>\n                        <!--<div style="background: url({{result.images[0].full || result.images[0].thumb || result.images[0].images}}) no-repeat center center fixed; height: 172px; webkit-background-size: cover; -moz-background-size: cover; -o-background-size: cover;"></div>-->\n                        <img ng-if="result.images.length" ng-src="{{::result.images[0].full || result.images[0].thumb || result.images[0].images}}" class="fitImage">\n                        <div ng-if="!result.images.length" class="grid-noImage-Placeholder"></div>\n                        <div class="caption">\n                            <h4 class="heading" ng-bind-html="result.heading | cleanHeading"></h4>\n                            <p class="body" ng-bind-html="result.body | cleanBodyExcerpt"></p>\n                            <span class="distance">\n                                <i class="fa fa-location-arrow" style="color: #777777;"></i>&nbsp;{{::result.geo.distance* 0.00062137 | number:0}} mi.\n                            </span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n\n\n        <!--LIST VIEW-->\n        <!--{{views.showMap}}-->\n        <div vs-repeat class="inner-container" vs-excess="7" vs-size="rowHeight" vs-offset-before="77" ng-show="!views.gridView">\n            <div ng-repeat="row in results.gridRows" ng-class="views.showMap ? \'list-item-map-view\':\'list-item\'">\n                <div style="cursor: pointer;" ng-repeat="result in row.rowContents" ng-click="openSplash(this)">\n\n                    <div class="thumbnail">\n                        <ribbon-list ng-if="!!result.askingPrice.value" >{{::result.askingPrice.value | currency : $ : 0}}</ribbon-list>\n\n                        <!--Has NO image-->\n                        <div ng-if="!result.images.length">\n                            <div class="row">\n                                <div class="caption">\n                                    <h3 class="noImage-heading" ng-bind-html="result.heading | cleanHeading"></h3>\n                                    <hts-fave-toggle class="carousel-starPositioning"></hts-fave-toggle>\n                                    <p class="noImage-body" ng-bind-html="result.body |cleanBodyExcerpt"></p>\n                                    <div class="pull-left carousel-timestamp">\n                                        <small>Posted {{(currentDate - result.external.threeTaps.timestamp) | secondsToTimeString}} ago.</small>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n\n                        <!--Has ONE image-->\n                        <div ng-if="result.images.length == 1">\n                            <div class="row">\n                                <div class="col-lg-5 col-md-6 col-sm-6 col-xs-6">\n                                    <img ng-src="{{::result.images[0].full || result.images[0].thumb || result.images[0].images}}" class="img-responsive img-rounded singleImage-Image">\n                                </div>\n                                <div class="col-lg-7 col-md-6 col-sm-6 col-xs-6 singleImage-TextContainer">\n                                    <div class="row">\n                                        <div class="caption">\n                                            <h3 class="singleImage-heading" ng-bind-html="result.heading | cleanHeading"></h3>\n                                            <hts-fave-toggle class="singleImage-starPositioning"></hts-fave-toggle>\n                                            <p class="singleImage-body" ng-bind-html="result.body |cleanBody"></p>\n                                            <div class="pull-left singleImage-timestamp">\n                                                <small><i class="fa fa-location-arrow"></i>&nbsp;{{::result.geo.distance* 0.00062137 | number:0}} mi.</small>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n\n                        <!--Has MULTIPLE images-->\n                        <div ng-if="result.images.length > 1">\n                            <div class="row">\n                                <div class="col-lg-12">\n                                    <slick data="result.images" lazy-load=\'progressive\' init-onload=true dots=true infinite=true slides-to-scroll=1 speed=100 variable-width=true center-mode=false next-arrow=".next-arrow-ctl{{result.postingId}}" prev-arrow=".prev-arrow-ctl{{result.postingId}}">\n\n                                        <button ng-click="$event.stopPropagation();" type="button" data-role="none" class="slick-prev prev-arrow-ctl{{result.postingId}}" aria-label="previous" style="display: block;">Previous</button>\n\n                                        <button ng-click="$event.stopPropagation();" type="button" data-role="none" class="slick-next next-arrow-ctl{{result.postingId}}" aria-label="next" style="display: block;">Next</button>\n\n                                        <div ng-repeat="image in result.images">\n                                            <img data-lazy="{{image.thumb || image.thumbnail || image.images || image.full}}"/>\n                                        </div>\n                                    </slick>\n                                </div>\n                            </div>\n\n                            <div class="row">\n                                <div class="caption">\n                                    <h3 class="carousel-heading" ng-bind-html="result.heading | cleanHeading"></h3>\n                                    <hts-fave-toggle class="carousel-starPositioning"></hts-fave-toggle>\n                                    <p class="carousel-body" ng-bind-html="result.body |cleanBodyExcerpt"></p>\n                                    <div class="pull-left carousel-timestamp">\n                                        <small><i class="fa fa-location-arrow"></i>&nbsp;{{::result.geo.distance* 0.00062137 | number:0}} mi.<small>\n                                    </div>\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <spinner ng-show="status.loading" class="spinner-container" spinner-text={{status.loadingMessage}} style="  top: -170px; z-index: 1; background: linear-gradient(to top, rgba(194, 202, 213, 1), rgba(194, 202, 213, 0)); width: 100%; text-align: center; pointer-events: none;"></spinner>\n        <!--<div class="loadingMore" ng-show="status.loading">-->\n            <!--&lt;!&ndash;<img src="https://static.hashtagsell.com/htsApp/spinners/ajax-loader.gif">&nbsp;&ndash;&gt;-->\n            <!--{{status.loadingMessage}}-->\n            <!--&lt;!&ndash;blah blah blah&ndash;&gt;-->\n\n        <!--</div>-->\n\n    </div>\n\n\n\n    <div class="map-container" ng-class="{ \'show-map\' : views.showMap }" ng-if="views.showMap">\n        <ui-gmap-google-map center="map.center" zoom="map.zoom" bounds="map.bounds" draggable="true" options="map.options">\n            <ui-gmap-markers models="map.markers" options="\'options\'" coords="\'coords\'" fit="true" doCluster="true" clusterOptions="map.clusterOptions" doRebuildAll="map.refresh">\n            </ui-gmap-markers>\n        </ui-gmap-google-map>\n    </div>\n\n\n</div>\n\n'),a.put("js/settings/account/partials/settings.account_partial.html",'<div>\n    <div class="settings-header">\n        <h3>Account</h3>\n        <h4>Manage your account settings</h4>\n    </div>\n</div>\n\n<div class="container">\n    <form class="form-horizontal">\n        <!--<div class="form-group has-feedback" ng-class="safeSearchUpdated ? \'has-success\' : \'\'">-->\n            <!--<label class="col-sm-2 control-label">Safe Search</label>-->\n            <!--<div class="col-sm-2">-->\n                <!--<select class="form-control" ng-model="safeSearch" ng-options="opt for opt in options.safeSearch" ng-change="setSafeSearch(safeSearch)"></select>-->\n                <!--<span ng-show="safeSearchUpdated" class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>-->\n                <!--&lt;!&ndash;<i ng-show="safeSearchUpdated" class="fa fa-check-circle fa-2x safeSearch-checkmark"></i>&ndash;&gt;-->\n            <!--</div>-->\n        <!--</div>-->\n\n        <!--<div class="form-group has-feedback" ng-class="defaultEmailUpdated ? \'has-success\' : \'\'">-->\n            <!--<label class="col-sm-2 control-label">Default Email</label>-->\n            <!--<div class="col-sm-2">-->\n                <!--<select class="form-control" ng-model="defaultEmail" ng-options="opt.value as opt.name for opt in options.defaultEmail" ng-change="setDefaultEmail(defaultEmail)"></select>-->\n                <!--<span ng-show="defaultEmailUpdated" class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>-->\n                <!--&lt;!&ndash;<i ng-show="defaultEmailUpdated" class="fa fa-check-circle fa-2x defaultEmail-checkmark"></i>&ndash;&gt;-->\n            <!--</div>-->\n        <!--</div>-->\n\n        <div class="form-group">\n\n            <label class="col-sm-2 control-label">Facebook</label>\n            <div class="col-sm-5" ng-show="!userObj.user_settings.linkedAccounts.facebook.id">\n                <a href="/auth/facebook" target="_self" class="btn btn-primary btn-sm"><span class="fa fa-facebook"></span> Link Facebook</a>\n            </div>\n            <div class="col-sm-5" ng-show="userObj.user_settings.linkedAccounts.facebook.id">\n                <!--<img ng-src="http://graph.facebook.com/v2.3/{{userObj.user_settings.linkedAccounts.facebook.id}}/picture">-->\n                <a ng-click="disconnectFacebook()" class="btn btn-primary btn-sm">Disconnect my Facebook</a>\n            </div>\n        </div>\n\n        <div class="form-group">\n            <label class="col-sm-2 control-label">Twitter</label>\n            <div class="col-sm-5" ng-show="!userObj.user_settings.linkedAccounts.twitter.id">\n                <a href="/auth/twitter" target="_self" class="btn btn-info btn-sm"><span class="fa fa-twitter"></span> Link Twitter</a>\n            </div>\n            <div class="col-sm-5" ng-show="userObj.user_settings.linkedAccounts.twitter.id">\n                <a ng-click="disconnectTwitter()" class="btn btn-info btn-sm">Disconnect my Twitter</a>\n            </div>\n        </div>\n\n        <div class="form-group">\n            <label class="col-sm-2 control-label">eBay</label>\n            <div class="col-sm-5" ng-show="!userObj.user_settings.linkedAccounts.ebay.eBayAuthToken">\n                <a ng-click="getEbaySessionID()" target="_self" class="btn btn-warning btn-sm"> Link Ebay</a>\n                <div>\n                    <small ng-show="ebay.err" class="text-danger">{{ebay.err}}</small>\n                </div>\n            </div>\n            <div class="col-sm-5" ng-show="userObj.user_settings.linkedAccounts.ebay.eBayAuthToken">\n                <a ng-click="disconnectEbay()" class="btn btn-warning btn-sm">Disconnect my eBay</a>\n            </div>\n        </div>\n\n        <div class="form-group">\n            <label class="col-sm-2 control-label">Delete Account</label>\n            <div class="col-sm-5">\n                <a ng-click="deleteAccount()" target="_self" class="btn btn-danger btn-sm"> Delete Entire Account</a>\n            </div>\n        </div>\n\n    </form>\n</div>\n'),a.put("js/settings/password/partials/settings.password_partial.html",'<div>\n    <div class="settings-header">\n        <h3>Password</h3>\n        <h4>Change your password</h4>\n    </div>\n</div>\n\n<div class="container">\n    <form id="updatePasswordForm" name="updatePasswordForm" class="form-horizontal" ng-submit="updatePassword(updatePasswordForm.$valid)" novalidate>\n\n       <div class="form-group" ng-show="alerts.length">\n           <label class="col-md-2 control-label"></label>\n\n           <div class="col-md-3">\n               <alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)">{{alert.msg}}</alert>\n           </div>\n       </div>\n\n        <div class="form-group">\n            <label class="col-md-2 control-label">Current Password</label>\n            <div class="col-md-3">\n\n                <div class="controls">\n                    <input class="form-control" type="password" name="currentPassword" ng-model="currentPassword" required>\n                </div>\n\n            </div>\n        </div>\n\n        <div class="form-group">\n            <label class="col-md-2 control-label">New Password</label>\n\n            <div class="col-md-3">\n                <input class="form-control" type="password" ng-minlength="4" ng-maxlength="30" ng-pattern="/^[a-zA-Z0-9.!@#$%&*~+=-_]*$/" name="newPassword" ng-model="newPassword" required>\n            </div>\n        </div>\n\n\n        <div class="form-group">\n            <label class="col-md-2 control-label">Verify Password</label>\n\n            <div class="col-md-3">\n                <input class="form-control" type="password" name="veryifyNewPassword" ng-model="verifyNewPassword" matchinput="newPassword" required>\n            </div>\n        </div>\n\n\n        <!-- Button -->\n        <div class="form-group">\n            <label class="col-md-2 control-label" for="submit"></label>\n            <div class="col-md-3">\n                <!--<button id="submit" name="submit" class="btn btn-primary"  ng-disabled="updatePasswordForm.$invalid">Submit</button>-->\n                <button class="btn btn-primary" ng-show="!currentPassword && !newPassword && !verifyNewPassword">Change password</button>\n\n                <button id="submit" class="btn" ng-show="currentPassword || newPassword || verifyNewPassword" type="submit" ng-class="updatePasswordForm.$invalid ? \'btn-warning\' : \'btn-success\'" ng-disabled="updatePasswordForm.$invalid">\n                    <span ng-show="updatePasswordForm.newPassword.$error.minlength">Password is too short.</span>\n\n                    <span ng-show="updatePasswordForm.newPassword.$error.pattern">Remove spaces in password.</span>\n\n                    <span ng-show="updatePasswordForm.veryifyNewPassword.$error.match">Passwords do not match.</span>\n\n                    <span ng-show="!updatePasswordForm.newPassword.$error.minlength &&\n                        !updatePasswordForm.newPassword.$error.pattern &&\n                        !updatePasswordForm.veryifyNewPassword.$error.match &&\n                        updatePasswordForm.$invalid"\n                            >Keep going</span>\n\n                    <span ng-show="!updatePasswordForm.newPassword.$error.minlength &&\n                        !updatePasswordForm.newPassword.$error.pattern &&\n                        !updatePasswordForm.veryifyNewPassword.$error.match &&\n                        !updatePasswordForm.$invalid"\n                            >Change password</span>\n                </button>\n\n\n\n            </div>\n        </div>\n\n    </form>\n</div>'),a.put("js/settings/payment/partials/settings.payment_partial.html",'<div>\n    <div class="settings-header">\n        <h3>Payment & Shipping Settings</h3>\n        <h4>Payment</h4>\n    </div>\n\n    <sub-merchant></sub-merchant>\n\n\n\n    <div class="settings-header">\n        <h4>Shipping</h4>\n    </div>\n\n    <div class="container">\n        <form class="form-horizontal">\n            <fieldset>\n\n                <!-- Select Basic -->\n                <div class="form-group">\n                    <div class="col-md-8">\n                        <h4>Yep, we\'re building in shipping support, and it\'s going to be awesome!</h4>\n                    </div>\n                </div>\n            </fieldset>\n        </form>\n    </div>\n\n</div>\n'),a.put("js/settings/profile/partials/settings.profile_partial.html",'<div>\n    <div class="settings-header">\n        <h3>Profile Settings</h3>\n        <h4>Manage your profile</h4>\n    </div>\n</div>\n\n<div class="container">\n    <form class="form-horizontal">\n        <div class="form-group">\n            <label class="col-sm-2 control-label">Profile Photo</label>\n            <div class="col-sm-5">\n\n                <div ng-hide="bindingObj.currentlyUploadingProfilePhoto" style="cursor: pointer">\n                    <img class=\'triggerProfileImageUpload needsclick\' ng-src={{userObj.user_settings.profile_photo}} width="90px;"/>\n                </div>\n\n                <div ng-show="bindingObj.currentlyUploadingProfilePhoto" id="profilePreview" dropzone="profileDropzoneConfig">\n\n                </div>\n            </div>\n        </div>\n\n        <div class="form-group">\n            <label class="col-sm-2 control-label">Banner Photo</label>\n\n            <div class="col-sm-5">\n                <div ng-hide="bindingObj.currentlyUploadingBannerPhoto" style="cursor: pointer">\n                    <img class=\'triggerBannerImageUpload img-rounded needsclick\' ng-src={{userObj.user_settings.banner_photo}} width="190px;"/>\n                </div>\n\n                <div ng-show="bindingObj.currentlyUploadingBannerPhoto" id="bannerPreview" dropzone="bannerDropzoneConfig">\n\n                </div>\n            </div>\n        </div>\n\n        <div class="form-group">\n            <label class="col-sm-2 control-label">About me</label>\n\n            <div class="col-sm-2">\n                <textarea class="form-control" ng-model="userObj.user_settings.biography" ng-change="requireUpdate()">{{userObj.user_settings.biography}}</textarea>\n            </div>\n        </div>\n\n        <div class="form-group">\n            <label class="col-sm-2 control-label"></label>\n            <div class="col-sm-5">\n                <button class="btn btn-success" ng-disabled="bindingObj.requireUpdate" ng-click="submitUpdatedProfile()">Update About Me</button>\n            </div>\n        </div>\n    </form>\n</div>\n\n\n\n<!-- Template loaded into dropzone for profile upload -->\n<script type="text/ng-template" id="profileUploadTemplate.tpl">\n    <div>\n        <!-- This is used as the file preview template -->\n        <div class="triggerProfileImageUpload">\n            <img class="img-circle" data-dz-thumbnail />\n            <div class="progress progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">\n                <div class="progress-bar progress-bar-info" style="width:0%;" data-dz-uploadprogress></div>\n            </div>\n        </div>\n        <div>\n            <strong class="error text-danger" data-dz-errormessage></strong>\n        </div>\n    </div>\n</script>\n\n\n<!-- Template loaded into dropzone for heading upload -->\n<script type="text/ng-template" id="bannerUploadTemplate.tpl">\n    <div>\n        <!-- This is used as the file preview template -->\n        <div class="triggerBannerImageUpload">\n            <img class="heading-banner" data-dz-thumbnail />\n            <div class="progress progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">\n                <div class="progress-bar progress-bar-info" style="width:0%;" data-dz-uploadprogress></div>\n            </div>\n        </div>\n        <div>\n            <strong class="error text-danger" data-dz-errormessage></strong>\n        </div>\n    </div>\n</script>'),a.put("js/settings/settings_partial.html",'<div class="outer-container-settings custom-settings-well">\n    <div class="inner-container">\n        <div ui-view></div>\n    </div>\n</div>'),a.put("js/splash/partials/splash_content.html",'<div class="container-fluid splash-content">\n    <div class="master-container">\n        <div class="splash-content-container" ng-class="{ \'offcanvas-open\' : !sideNav.hidden}">\n            <div class="container">\n                <div class="splash-outer-container">\n                    <div class="splash-inner-container">\n                        <div style="background-color: #f8f8f8; border-bottom: 1px solid #e7e7e7; margin-bottom: 20px;">\n                            <div class="container-fluid">\n                                <ul class="nav navbar-nav" style="width: 100%;">\n                                    <li style="float: left;">\n                                        <a ng-click="$dismiss()">\n                                            < Back\n                                        </a>\n                                    </li>\n                                    <li style="display: table; margin: 6px auto 0px auto;">\n                                        <h3 style="margin: 0px;" ng-bind-html="result.heading | cleanHeading"></h3>\n                                    </li>\n                                </ul>\n                            </div>\n                        </div>\n                        <div class="photo-description-column">\n                            <div class="photo-carousel">\n                                <div class="thumbnail" style="padding: 4px 4px 0px 4px;" ng-if="result.images.length">\n                                    <div class="row">\n                                        <div class="col-xs-12 splashCarousel">\n                                            <div ng-if="result.images.length === 1 && toggles.showCarousel">\n                                                <img ng-src="{{::result.images[0].full || result.images[0].thumb || result.images[0].images}}" class="img-responsive singleImage-splash-Image"/>\n                                            </div>\n                                            <div ng-if="result.images.length > 1">\n                                                <slick ng-if="toggles.showCarousel" data="result.images" lazy-load=\'progressive\' init-onload=true dots=true infinite=true slides-to-scroll=1 speed=100 variable-width=true center-mode=false>\n                                                    <div ng-repeat="image in result.images">\n                                                        <img data-lazy="{{image.thumb || image.thumbnail || image.images || image.full}}"/>\n                                                    </div>\n                                                </slick>\n                                            </div>\n                                            <ui-gmap-google-map class="splash-map" center=\'map.settings.center\' zoom=\'map.settings.zoom\' options=\'map.settings.options\' ng-if="!toggles.showCarousel">\n\n                                                <ui-gmap-marker coords="map.marker.coords" idkey="map.marker.id" options="map.marker.options" click="onClick()">\n                                                    <ui-gmap-window options="windowOptions" show="infoWindow.show" closeClick="closeClick()">\n\n                                                    </ui-gmap-window>\n                                                </ui-gmap-marker>\n\n                                            </ui-gmap-google-map>\n                                            <div style="margin: 0px -4px 0px -4px; padding-top: 13px;">\n                                                <div class="col-xs-6" ng-class="toggles.showCarousel ? \'\' : \'grey-photo-selector\'" ng-click="toggles.showCarousel = true" style="height: 40px; text-align: center; cursor: pointer;">\n                                                    <i class="fa fa-camera fa-lg" style="margin-top: 16px;">&nbsp; Photos</i>\n                                                </div>\n                                                <div class="col-xs-6" ng-class="toggles.showCarousel ? \'grey-map-selector\' : \'\'" ng-click="toggles.showCarousel = false" style="height: 40px; text-align: center; cursor: pointer;">\n                                                    <i class="fa fa-map-marker fa-lg" style="margin-top: 16px;">&nbsp; Map</i>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div class="thumbnail" ng-if="!result.images.length">\n                                    <div class="row">\n                                        <div class="col-xs-12 splashCarousel">\n                                            <ui-gmap-google-map class="splash-map" center=\'map.settings.center\' zoom=\'map.settings.zoom\' options=\'map.settings.options\'>\n\n                                                <ui-gmap-marker coords="map.marker.coords" idkey="map.marker.id" options="map.marker.options" click="onClick()">\n                                                    <ui-gmap-window options="windowOptions" show="infoWindow.show" closeClick="closeClick()">\n\n                                                    </ui-gmap-window>\n                                                </ui-gmap-marker>\n\n                                            </ui-gmap-google-map>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="annotations-column">\n                                <div ng-if="result.sanitized_annotations" class="row">\n                                    <div ng-repeat="(key, value) in result.sanitized_annotations">\n                                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">\n                                            <h4 class="row annotationKey">\n                                                {{::key}}\n                                            </h4>\n                                            <div class="row annotationValue">\n                                                {{::value}}\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <br>\n                            <div class="details-column">\n                                <h4>Description:</h4>\n                                <div style="line-height: 20px; padding-bottom: 75px;" ng-bind-html="result.body | cleanBody">\n\n                                </div>\n                            </div>\n                        </div>\n                        <div class="bs-profile-nav splash-profile-nav">\n                            <splash-side-profile result="result">\n                                <div class="profile">\n                                    <div class="profileCircle">\n                                        <img class=\'bs-profile-image\' width="70px;" height="70px;"/>\n                                    </div>\n                                </div>\n                                <div class="splash-username-container">\n                                    <div class="splash-bs-username"></div>\n                                    <h2 style="color: #216C2A; margin-bottom: 2px;">{{::result.askingPrice.value | currency : $ : 0}}</h2>\n                                    <!--<button type="submit" class="btn btn-danger btn-sm btn-block" ng-click="newPost(); $event.stopPropagation();">New post</button>-->\n                                </div>\n                            </splash-side-profile>\n\n                            <!--SideNav-->\n                            <div class="list-group splash-bs-side-nav ng-cloak" ng-if="result.username !== userObj.user_settings.name">\n                                <!--<a class="list-group-item" ng-if="result.external.source.code == \'CRAIG\' && result.annotations.source_account" ng-click="emailSeller(result)" style="cursor: pointer">-->\n                                    <!--<i class="fa fa-envelope-square fa-fw fa-lg"></i>&nbsp; Email seller-->\n                                <!--</a>-->\n                                <!--<a class="list-group-item" ng-if="result.external.source.code == \'CRAIG\' && result.annotations.phone" ng-click="displayPhone(result)" style="cursor: pointer">-->\n                                    <!--<i class="fa fa-phone-square fa-fw fa-lg"></i>&nbsp; Phone seller-->\n                                <!--</a>-->\n                                <a  class="list-group-item" ng-if="result.external.source.code === \'HSHTG\' && result.askingPrice.value" ng-click="buyOnline(result)" style="cursor: pointer; font-size: 16px; text-align: center">\n                                    <span>Send An Offer</span>\n                                </a>\n                                <!--<a  class="list-group-item" ng-if="result.external.source.code === \'HSHTG\'" ng-click="placeOffer(result)" style="cursor: pointer">-->\n                                    <!--<i class="fa fa-calendar-o fa-fw fa-lg"></i>&nbsp; Request a meeting-->\n                                <!--</a>-->\n                                <a class="list-group-item"  ng-if="result.external.source.code === \'E_BAY\'" ng-click="placeBid(result)" style="cursor: pointer; font-size: 16px;">\n                                    <i class="fa fa-paypal fa-fw fa-lg"></i>&nbsp; Bid On Item\n                                </a>\n                                <a class="list-group-item" ng-click="toggleFave(result)" style="cursor: pointer; font-size: 16px;">\n                                    <span ng-show="favorited">\n                                        <span ng-show="favorited" ng-class="{starHighlighted: favorited, star: !favorited}" class="fa fa-fw fa-lg"></span>&nbsp; Remove From Watch List\n                                    </span>\n                                    <span ng-show="!favorited">\n                                        <span ng-class="{starHighlighted: favorited, star: !favorited}" class="fa fa-fw fa-lg"></span>&nbsp; Add To Watch List\n                                    </span>\n                                </a>\n                                <!--<a class="list-group-item" onclick="alert(\'spam reporting feature soon\')" style="cursor: pointer">-->\n                                    <!--<i class="fa fa-flag fa-fw fa-lg"></i>&nbsp; Report-->\n                                <!--</a>-->\n                                <a class="list-group-item" ng-if="result.external.source.url && result.external.source.code != \'HSHTG\'" ng-click="showOriginal(result)" style="cursor: pointer; font-size: 16px;">\n                                    <i class="fa fa-external-link-square fa-fw fa-lg"></i>&nbsp; Show Original Post\n                                </a>\n                            </div>\n\n\n                            <div ng-if="result.external.source.code === \'HSHTG\' && result.username !== userObj.user_settings.name" ng-init="getPostingIdQuestions()">\n                                <p class="input-group">\n                                    <input class="form-control" ng-model="qamodule.question" placeholder="Ask the seller a question" ng-enter="submitQuestion(qamodule.question)"/>\n                                    <span class="input-group-btn">\n                                        <button type="button" class="btn btn-primary" ng-click="submitQuestion(qamodule.question)">Ask</button>\n                                    </span>\n                                </p>\n                                <div ng-repeat="question in questions.store">\n                                    <div class="question-counter-block">\n                                        <span class="stack-question-counter fa-2x">\n                                            <i class="fa fa-caret-up"></i>\n                                            <div>{{question.plus.length}}</div>\n                                            <i class="fa fa-caret-down"></i>\n                                        </span>\n                                        <div class="questions-and-answers">\n                                            <div class="question">\n                                                <b>Q:</b> {{question.value}}\n                                            </div>\n                                            <div ng-repeat="answer in question.answers">\n                                                <div class="answer" ng-if="answer.value"><b>A:</b> {{answer.value}}</div>\n                                            </div>\n                                            <div ng-if="result.username === userObj.user_settings.name && !question.answers.length">\n                                                <a class="answer" ui-sref="myposts.questions({postingId: question.postingId})">Click here to answer.</a>\n                                            </div>\n                                            <div ng-if="result.username !== userObj.user_settings.name && !question.answers.length">\n                                                <a class="answer">The seller has been notified.</a>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'),
a.put("js/splash/partials/splash_window.html",'<section class="splash" ng-class="{\'splash-open\': animate}">\n    <div class="splash-inner" ng-transclude></div>\n</section>'),a.put("js/submerchant/modals/partials/submerchant.modal.partial.html",'<!DOCTYPE html>\n<html>\n<head lang="en">\n    <meta charset="UTF-8">\n    <title></title>\n</head>\n<body>\n    <div class="modal-header">\n\n        <button type="button" class="close" ng-click="close()"><span aria-hidden="true">&times;</span></button>\n\n        <h3 id="myModalLabel">How do we send you money?</h3>\n\n    </span>\n    </div>\n    <div class="modal-body">\n        <sub-merchant></sub-merchant>\n    </div>\n    <!--<div class="modal-footer">-->\n        <!--<input class="btn btn-success" type="submit" value="Send recovery email" ng-disabled="forgotPasswordForm.$invalid">-->\n    <!--</div>-->\n\n</body>\n</html>'),a.put("js/submerchant/partials/submerchant.partial.html",'\n\n<div class="container">\n\n    <form name="subMerchForm" class="form-horizontal" autocomplete="false" ng-submit="submitSubMerchant()">\n        <fieldset>\n\n            <alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)">{{alert.msg}}</alert>\n\n            <!-- Select Basic -->\n            <div class="form-group">\n                <label class="col-md-2 control-label" for="business">Are you a business?</label>\n                <div class="col-md-2">\n                    <select id="business" name="business" class="form-control" ng-init="subMerchantForm.business.isBusinessAccount = subMerchantForm.business.businessOptionsDropdown[0]" ng-model="subMerchantForm.business.isBusinessAccount" ng-options="opt.name for opt in subMerchantForm.business.businessOptionsDropdown" novalidate>\n\n                    </select>\n                </div>\n            </div>\n\n            <!-- Text input-->\n            <div class="form-group">\n                <label class="col-md-2 control-label" for="firstname">First Name</label>\n                <div class="col-md-4">\n                    <input id="firstname" name="firstname" type="text" placeholder="First Name" ng-model="subMerchant.individual.firstName" class="form-control input-md" required="required">\n\n                </div>\n            </div>\n\n            <!-- Text input-->\n            <div class="form-group">\n                <label class="col-md-2 control-label" for="lastname">Last Name</label>\n                <div class="col-md-4">\n                    <input id="lastname" name="lastname" type="text" placeholder="Last Name" ng-model="subMerchant.individual.lastName" class="form-control input-md" required="required">\n\n                </div>\n            </div>\n\n            <!-- Text input-->\n            <div class="form-group">\n                <label class="col-md-2 control-label" for="individualEmail">Email</label>\n                <div class="col-md-4">\n                    <input id="individualEmail" name="IndividualEmail" type="email" placeholder="Email" ng-model="subMerchant.individual.email" class="form-control input-md" required="required">\n\n                </div>\n            </div>\n\n            <!-- Text input-->\n            <div class="form-group">\n                <label class="col-md-2 control-label" for="dob">Date of birth</label>\n                <div class="col-md-3">\n                    <input id="dob" name="dob" type="text" placeholder="mm/dd/yyyy" ng-model="subMerchantForm.individual.dateOfBirth" class="form-control input-md" required="required" ng-pattern="/\\d\\d\\/\\d\\d\\/\\d\\d\\d\\d/" ng-maxlength="10" ng-minlength="10">\n\n                </div>\n            </div>\n\n\n            <!-- Text input-->\n            <div class="form-group">\n                <label class="col-md-2 control-label" for="individualAddress">Address</label>\n                <div class="col-md-4">\n                    <input autocomplete="false" id="individualAddress" name="individualAddress" type="text" placeholder="Address" ng-model="subMerchantForm.individual.addressLookup" typeahead="city.description for city in predictAddress($viewValue)" typeahead-on-select=\'setAddressComponents($item, "individual")\' class="form-control input-md" required="required" >\n\n                </div>\n            </div>\n\n            <!-- Text input-->\n            <div class="form-group" ng-show="subMerchantForm.business.isBusinessAccount.value">\n                <label class="col-md-2 control-label" for="companyname">Company Name</label>\n                <div class="col-md-4">\n                    <input id="companyname" name="companyname" type="text" placeholder="Company Name" ng-model="subMerchant.business.legalName" class="form-control input-md" ng-required=\'subMerchantForm.business.isBusinessAccount.value\'>\n\n                </div>\n            </div>\n\n            <div class="form-group" ng-show="subMerchantForm.business.isBusinessAccount.value">\n                <label class="col-md-2 control-label" for="businessaddress">Address</label>\n                <div class="col-md-4">\n                    <input autocomplete="off" id="businessaddress" name="business" type="text" placeholder="Business address" ng-model="subMerchantForm.business.addressLookup" typeahead="city.description for city in predictAddress($viewValue)" typeahead-on-select=\'setAddressComponents($item, "business")\' class="form-control input-md" ng-required=\'subMerchantForm.business.isBusinessAccount.value\' >\n\n                </div>\n            </div>\n\n            <!-- Text input-->\n            <div class="form-group" ng-show="subMerchantForm.business.isBusinessAccount.value">\n                <label class="col-md-2 control-label" for="taxid">Tax Id</label>\n                <div class="col-md-3">\n                    <input id="taxid" name="taxid" type="number" placeholder="Tax Id" ng-model="subMerchant.business.taxId" class="form-control input-md" ng-required=\'subMerchantForm.business.isBusinessAccount.value\'>\n\n                </div>\n            </div>\n\n            <!-- Multiple Radios -->\n            <!--<div class="form-group">-->\n                <!--<label class="col-md-2 control-label" for="destination">Send funds to</label>-->\n                <!--<div class="col-md-3">-->\n                    <!--<div class="radio">-->\n                        <!--<label for="destination-0">-->\n                            <!--<input type="radio" name="destination" id="destination-0" ng-model="subMerchantForm.destination.disperseType" value="bank" required="required">-->\n                            <!--Bank Account-->\n                        <!--</label>-->\n                    <!--</div>-->\n                    <!--<div class="radio">-->\n                        <!--<label for="destination-1">-->\n                            <!--<input type="radio" name="destination" id="destination-1" ng-model="subMerchantForm.destination.disperseType" value="venmo" required="required">-->\n                            <!--Venmo-->\n                        <!--</label>-->\n                    <!--</div>-->\n                <!--</div>-->\n            <!--</div>-->\n\n            <!-- Text input-->\n            <!--<div class="form-group" ng-show="subMerchantForm.destination.disperseType === \'bank\'">-->\n                <!--<label class="col-md-2 control-label" for="accountnumber">Bank Account No.</label>-->\n                <!--<div class="col-md-4">-->\n                    <!--<input id="accountnumber" name="accountnumber" type="number" placeholder="Bank Account No." ng-model="subMerchant.funding.accountNumber" class="form-control input-md" ng-required="subMerchantForm.destination.disperseType === \'bank\'">-->\n\n                <!--</div>-->\n            <!--</div>-->\n\n            <!--&lt;!&ndash; Text input&ndash;&gt;-->\n            <!--<div class="form-group" ng-show="subMerchantForm.destination.disperseType === \'bank\'">-->\n                <!--<label class="col-md-2 control-label" for="routingnumber">Bank Routing No.</label>-->\n                <!--<div class="col-md-4">-->\n                    <!--<input id="routingnumber" name="routingnumber" type="number" placeholder="Bank Routing No." ng-model="subMerchant.funding.routingNumber" class="form-control input-md" ng-required="subMerchantForm.destination.disperseType === \'bank\'">-->\n\n                <!--</div>-->\n            <!--</div>-->\n\n            <!-- Text input-->\n            <div class="form-group">\n                <label class="col-md-2 control-label" for="venmoemail">Venmo Email</label>\n                <div class="col-md-4">\n                    <input id="venmoemail" name="venmoemail" type="email" placeholder="Venmo Email Account" ng-model="subMerchant.funding.email" class="form-control input-md" required="required">\n                    <small><a href="https://venmo.com/w/signup" target="_blank">I need a Venmo account.</a></small>\n                </div>\n            </div>\n\n            <!--<div class="form-group">-->\n                <!--<label class="col-md-2 control-label" for="venmoemail">Venmo Email</label>-->\n                <!--<div class="col-md-4">-->\n                    <!-- -->\n                <!--</div>-->\n            <!--</div>-->\n\n            <!-- Button -->\n            <div class="form-group">\n                <label class="col-md-2 control-label" for="submit"></label>\n                <div class="col-md-3">\n                    <button id="submit" name="submit" class="btn btn-warning" ng-show="recoveredMerchantAccount.response.status === \'active\'">Change Payment Settings</button>\n                    <button id="submit" name="submit" class="btn btn-primary" ng-show="recoveredMerchantAccount.response.status === \'declined\'">Re-Submit</button>\n                    <button id="submit" name="submit" class="btn btn-primary" ng-show="recoveredMerchantAccount.response.status === \'pending\'" ng-disabled="true">Pending approval</button>\n                    <button id="submit" name="submit" class="btn btn-primary" ng-show="!recoveredMerchantAccount.response.status">Submit</button>\n                </div>\n            </div>\n\n            <!--{{subMerchant}}-->\n\n            <!--{{recoveredMerchantAccount}}-->\n\n        </fieldset>\n    </form>\n</div>\n\n<!--{{subMerchantForm}}-->'),a.put("js/transactionButtons/modals/buyNow/partials/transactionButtons.modal.buyNow.partial.html",'<form class="form-horizontal">\n    <div class="modal-header">\n        <h3 id="myModalLabel">Send payment</h3>\n    </div>\n    <div class="modal-body">\n        I\'ve met the seller and inspected the item for sale.  I\'d like to send payment.\n    </div>\n\n    <div class="modal-footer">\n        <button class="btn btn-default" ng-click="no()">No, I need to inspect the item</button>\n        <button class="btn btn-primary" ng-click="yes()">Send Payment</button>\n    </div>\n</form>'),a.put("js/transactionButtons/modals/email/partials/transactionButtons.modal.email.partial.html",'<!DOCTYPE html>\n<html>\n<head lang="en">\n    <meta charset="UTF-8">\n    <title>HashtagSell Quick Compose</title>\n</head>\n<body>\n\n    <!--<form name="loginForm" id="loginForm" class="form-horizontal" ng-submit="loginPassport(loginForm.$valid)" novalidate>-->\n        <!--<div class="modal-header">-->\n            <!--<h3 id="myModalLabel">Private Beta Login!</h3>-->\n        <!--</div>-->\n        <!--<div class="modal-body">-->\n            <!--<label class="control-label" for="email">Email Address:</label>-->\n            <!--<div class="controls">-->\n                <!--<input type="email" id="email" ng-model="email" required>-->\n            <!--</div>-->\n            <!--<br>-->\n            <!--<label class="control-label" for="password">Password:</label>-->\n            <!--<div class="controls">-->\n                <!--<input type="password" id="password" ng-model="password" required>-->\n                <!--<br>-->\n                <!--<small style="color:red;">-->\n                    <!--{{message}}-->\n                <!--</small>-->\n                <!--<br>-->\n                <!--<a href ng-click="dismiss(\'signUp\')">-->\n                    <!--<small>Need an account?</small>-->\n                <!--</a>-->\n                <!--<small> | </small>-->\n                <!--<a href ng-click="dismiss(\'forgot\')">-->\n                    <!--<small>Forgot your password?</small>-->\n                <!--</a>-->\n            <!--</div>-->\n        <!--</div>-->\n        <!--<div class="modal-footer">-->\n            <!--<input class="btn btn-success" type="submit" value="Log In" id="submit" ng-disabled="loginForm.$invalid">-->\n            <!--<button class="btn btn-default" ng-click="dismiss(\'dismiss\')">Close</button>-->\n        <!--</div>-->\n    <!--</form>-->\n\n\n\n\n    <!--<div ng-controller="quickComposeController">-->\n        <!--<div id="QuickComposeEmail" class="modal hide fade" data-backdrop="false">-->\n            <form class="form-horizontal">\n                <div class="modal-header">\n                    <h3 id="myModalLabel">Select Email</h3>\n                </div>\n                <div class="modal-body">\n                    <select class="form-control" ng-model="selected" ng-options="o.value as o.name for o in emailOptionsObject">\n\n                    </select>\n                </div>\n\n                <div class="modal-footer">\n                    <span ng-show="userObj.user_settings.loggedIn" class="pull-left">\n\n                            <input type="checkbox" ng-model="setDefaultEmailProvider"> Save as default email.\n\n                    </span>\n                    <span ng-show="!userObj.user_settings.loggedIn" class="pull-left">\n                        <small><a ng-click="dismiss(\'signUp\')" style="cursor: pointer;">Create a free account to setup default mail settings</a></small>\n                    </span>\n                    <button class="btn btn-success" ng-click="qcEmail()">Compose Email</button>\n                    <button class="btn btn-default" ng-click="dismiss(\'dismiss\')">Close</button>\n                </div>\n            </form>\n        <!--</div>-->\n\n\n        <!--<div id="QuickComposePhone" class="modal hide fade" data-backdrop="false">-->\n            <!--<div class="modal-header">-->\n                <!--<h3 id="myModalLabel">Call or Text</h3>-->\n            <!--</div>-->\n            <!--<div class="modal-body">-->\n                <!--<div>Seller did not include an email.  Please contact:</div>-->\n                <!--<h4>{{dynamicContent.phone}}</h4>-->\n            <!--</div>-->\n            <!--<div class="modal-footer">-->\n                <!--<button class="btn btn-default" data-dismiss="modal" aria-hidden="true">Close</button>-->\n            <!--</div>-->\n        <!--</div>-->\n\n\n        <!--<div id="QuickComposeFail" class="modal hide fade" data-backdrop="false">-->\n            <!--<form id="quickComposeForm" style="margin: 0px;" class="form-horizontal">-->\n                <!--<div class="modal-header">-->\n                    <!--<h3 id="myModalLabel">No phone or email found :(</h3>-->\n                <!--</div>-->\n                <!--<div class="modal-body">-->\n                    <!--The seller did not provide their contact info.  Please read the ad carefully.-->\n                <!--</div>-->\n                <!--<div class="modal-footer">-->\n                    <!--<button class="btn btn-default" data-dismiss="modal" aria-hidden="true">Close</button>-->\n                <!--</div>-->\n            <!--</form>-->\n        <!--</div>-->\n    <!--</div>-->\n\n</body>\n</html>'),a.put("js/transactionButtons/modals/phone/partials/transactionButtons.modal.phone.partial.html",'<form class="form-horizontal">\n    <div class="modal-header">\n        <h3 id="myModalLabel">Seller Phone Number</h3>\n    </div>\n    <div class="modal-body">\n        <h3 ng-bind="result.annotations.phone | tel"></h3>\n    </div>\n\n    <div class="modal-footer">\n        <span ng-show="!userObj.user_settings.loggedIn" class="pull-left">\n            <small><a ng-click="dismiss(\'signUp\')" style="cursor: pointer;">Create your free HashtagSell account.</a></small>\n        </span>\n        <button class="btn btn-default" ng-click="dismiss(\'dismiss\')">Close</button>\n    </div>\n</form>'),a.put("js/transactionButtons/modals/placeOffer/partials/transactionButtons.modal.placeOffer.partial.html",'<!DOCTYPE html>\n<html>\n<head lang="en">\n    <meta charset="UTF-8">\n    <title>HashtagSell Place an Offer</title>\n</head>\n<body>\n\n    <form class="form-horizontal">\n        <div class="modal-header">\n            <h3 id="myModalLabel">Let\'s meet!</h3>\n        </div>\n        <div class="modal-body">\n            Schedule a time you can meet the seller face to face.\n            <br>\n            <br>\n            Location: <span class="mention-highlighter">@{{result.external.threeTaps.location.formatted}}</span>\n            <br>\n            <br>\n            <ul>\n                <li ng-repeat="proposedTime in offer.proposedTimes track by $index">\n                    {{proposedTime.when | date:\'MMM d, y h:mm a\'}}\n                    <i class="fa fa-trash-o" ng-click="removeProposedTime($index)" style="cursor: pointer; color: red"></i>\n                </li>\n            </ul>\n            <div class="dropdown row" dropdown is-open="dropDownStatus.isOpen">\n                <a href class="dropdown-toggle col-xs-8" dropdown-toggle>\n                    <div class="input-group">\n                        <input type="text" class="form-control" data-ng-model="data.dateDropDownInput" placeholder="Propose times you can meet">\n                        <span class="input-group-addon">\n                            <i class="glyphicon glyphicon-calendar"></i>\n                        </span>\n                    </div>\n                </a>\n                <ul class="dropdown-menu">\n                    <li>\n                        <datetimepicker data-ng-model="data.dateDropDownInput" data-datetimepicker-config="{ minuteStep: 15 }" data-on-set-time="onTimeSet(newDate, oldDate)"/>\n                    </li>\n                </ul>\n            </div>\n        </div>\n\n        <div class="modal-footer">\n            <span ng-show="!userObj.user_settings.loggedIn" class="pull-left">\n                <small><a ng-click="dismiss(\'signUp\')" style="cursor: pointer;">Create your free HashtagSell account.</a></small>\n            </span>\n            {{allowSubmission}}\n            <button class="btn btn-default btn-primary" ng-click="sendOffer()" ng-disabled="disableSubmission">Send</button>\n        </div>\n    </form>\n\n</body>\n</html>'),a.put("js/transactionButtons/modals/proposeDeal/partials/transactionButtons.modal.proposeDeal.partial.html",'<!DOCTYPE html>\n<html>\n<head lang="en">\n    <meta charset="UTF-8">\n    <title>HashtagSell Propose a deal</title>\n</head>\n<body>\n\n    <form class="form-horizontal">\n        <!--<div class="modal-header">-->\n            <!--<h3 id="myModalLabel">Let\'s meet!</h3>-->\n        <!--</div>-->\n        <div class="modal-body">\n\n            <div class="controls">\n                <div class="input-group input-group-lg">\n                    <span class="input-group-addon">$</span>\n                    <input class="form-control" type="text" id="price" name="price" ng-model="deal.price" required="true"/>\n                </div>\n            </div>\n\n            <div ng-show="error.price">\n                <span class="text-danger">{{error.price}}</span>\n            </div>\n\n            <br>\n\n            <div class="controls">\n                <div class="input-group input-group-lg">\n                    <span class="input-group-addon">@</span>\n                    <input autocomplete="false" class="form-control" type="text" id="location" name="location" ng-model="deal.location" typeahead="city.description for city in predictAddress($viewValue)" typeahead-on-select=\'setAddressComponents($item)\' required="true" ng-click="deal.location = null"/>\n                </div>\n            </div>\n\n            <div ng-show="error.where">\n                <span class="text-danger">{{error.where}}</span>\n            </div>\n\n            <br>\n\n            <div class="controls">\n                <div class="input-group input-group-lg">\n                    <span class="input-group-addon"><i class="fa fa-comments-o"></i></span>\n                    <input class="form-control" type="comment" id="comment" name="comment" ng-model="deal.comment" placeholder="Include comment.  (Optional)"/>\n                </div>\n            </div>\n\n            <br>\n\n            <booking-system></booking-system>\n\n            <div ng-show="error.when">\n                <span class="text-danger">{{error.when}}</span>\n            </div>\n\n\n        </div>\n\n        <div class="modal-footer">\n            <button class="btn btn-default btn-primary" ng-click="counterOffer()">{{button.text}}</button>\n        </div>\n\n\n    </form>\n\n</body>\n</html>'),a.put("js/transactionButtons/partials/transactionButtons.partial.html",'\n<!--CL item and has email-->\n<button ng-if="result.source == \'CRAIG\' && result.annotations.source_account" ng-click="quickCompose(); $event.stopPropagation();" class="btn btn-default" role="button"><i class="fa fa-envelope-o fa-lg"></i>&nbsp; Email</button>\n\n<!--CL item and only has phone-->\n<button ng-if="result.source == \'CRAIG\' && result.annotations.phone" ng-click="displayPhone(); $event.stopPropagation();" class="btn btn-default" role="button"><i class="fa fa-phone fa-lg"></i>&nbsp; Phone</button>\n\n<!--CL has no phone or email-->\n<button ng-if="result.source == \'CRAIG\' && !result.annotations.phone && !result.annotations.source_account" ng-click="openSplash(); $event.stopPropagation();" class="btn btn-default" role="button"><i class="fa fa-external-link fa-lg"></i>&nbsp; Details</button>\n\n<!--E_Bay Item-->\n<a ng-if="result.source == \'E_BAY\'" style="cursor: pointer;" ng-click="placeBid(); $event.stopPropagation();" class="btn btn-default" role="button"><i class="fa fa-credit-card fa-lg"></i>&nbsp; Place Bid</a>\n\n<!--E_Bay Motors-->\n<a ng-if="result.source == \'EBAYM\'" style="cursor: pointer;" ng-click="openSplash(); $event.stopPropagation();" class="btn btn-default" role="button"><i class="fa fa-external-link fa-lg"></i>&nbsp; Details</a>\n\n<!--Apartments.com-->\n<a ng-if="result.source == \'APTSD\'" style="cursor: pointer;" ng-click="openSplash(); $event.stopPropagation();" class="btn btn-default" role="button"><i class="fa fa-external-link fa-lg"></i>&nbsp; Details</a>\n\n<!--Backpage -->\n<a ng-if="result.source == \'BKPGE\'" style="cursor: pointer;" ng-click="openSplash(); $event.stopPropagation();" class="btn btn-default" role="button"><i class="fa fa-external-link fa-lg"></i>&nbsp; Details</a>\n\n<!--Autotrader -->\n<a ng-if="result.source == \'AUTOD\'" style="cursor: pointer;" ng-click="openSplash(); $event.stopPropagation();" class="btn btn-default" role="button"><i class="fa fa-external-link fa-lg"></i>&nbsp; Details</a>\n\n<!--HashtagSell Item-->\n<a ng-if="result.source == \'HSHTG\'" style="cursor: pointer;" ng-click="placeOffer(); $event.stopPropagation();" class="btn btn-danger" role="button"><i class="fa fa-calendar-o fa-lg"></i>&nbsp; Let\'s Meet</a>'),a.put("js/watchlist/meetings/partials/watchlist.meetings.html",'<div ng-repeat="offer in post.offers.results">\n\n    <!--Meeting Requests Awaiting Response-->\n    <div style="border: 1px solid; border-color: #e5e6e9 #dfe0e4 #d0d1d5; margin-bottom: 20px; padding: 0px;" class="col-md-10 col-xs-12" ng-if="userObj.user_settings.name === offer.username" ng-class="{ \'proposal-sent\': !offer.proposals[cachedOffers[$index].proposals.length - 1].isOwnerReply, \'proposal-accepted\': offer.proposals[cachedOffers[$index].proposals.length - 1].acceptedAt }" construct-wish-list-overlay-message offer="offer" post="post" message="css content string dynamically added">\n        <div style="background-color: #ffffff; padding: 10px;">\n            <div>\n                <img ng-src="{{offer.userProfile.profile_photo}}" height="40" style="position: relative; top: -12px;">\n                <div style="display: inline-block">\n                    <div>\n                        @{{offer.username}}\n                    </div>\n                    <div>\n                        Sent {{offer.modifiedAt | date:"MMMM d \'at\' h:mma"}}\n                    </div>\n                </div>\n                <div>\n                    <div class="dropdown" dropdown on-toggle="toggled(open)" style="position: absolute; top: 10px; right: 15px;">\n                        <a href class="dropdown-toggle" dropdown-toggle><i class="fa fa-chevron-down"></i></a>\n                        <ul class="dropdown-menu dropdown-menu-right">\n                            <li>\n                                <a href ng-click="cancelOffer(offer, post)">Cancel my offer</a>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n\n                <div class="form-group">\n                    <div>\n                        <span ng-show="offer.proposals[offer.proposals.length - 1].comment"><i>"{{offer.proposals[offer.proposals.length - 1].comment}}"</i></span>\n                    </div>\n\n                    <br>\n\n                    <div class="controls">\n                        <div class="input-group input-group-lg">\n                            <span class="input-group-addon">$</span>\n                            <input class="form-control" type="text" id="price" name="price" ng-model="offer.proposals[offer.proposals.length - 1].price.value" ng-disabled="true"/>\n                        </div>\n                    </div>\n\n                    <br>\n\n                    <div class="controls">\n                        <div class="input-group input-group-lg">\n                            <span class="input-group-addon">@</span>\n                            <input class="form-control" type="text" id="location" name="location" ng-model="offer.proposals[offer.proposals.length - 1].where" ng-disabled="true"/>\n                        </div>\n                    </div>\n\n                    <br>\n\n                    <div class="btn-group" role="group">\n                        <label class="btn btn-default btn-lg" disabled="true"><i class="fa fa-clock-o"></i></label>\n                        <label class="btn btn-default btn-lg" ng-repeat="proposedTime in offer.proposals[offer.proposals.length - 1].when" btn-radio="proposedTime" ng-model="acceptedTime.model" ng-change="errors.message = null">{{proposedTime | date:\'MMM d, h:mm a\'}}</label>\n                    </div>\n\n                    <div ng-show="errors.message">\n                        <span class="text-danger">{{errors.message}}</span>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n        <div class="read-meeting">\n\n            <div style="display: inline-block; position: relative;">\n                <button class="btn btn-primary" ng-click="counterOffer($index, offer.proposals[offer.proposals.length - 1])">Send Counter Offer</button>\n            </div>\n\n            <div style="display: inline-block; position: relative;">\n                <button class="btn btn-success" ng-click="acceptDeal($index, offer.proposals[offer.proposals.length - 1])">Accept Offer</button>\n            </div>\n\n        </div>\n    </div>\n\n</div>\n<div class="col-xs-12">\n    <span ng-show="!post.offers.results.length">Keep track of how many users requested to view the {{post.heading}}</span>\n    <span ng-show="post.offers.results.length && userObj.user_settings.name !== post.offers.results[0].username"><i class="fa fa-exclamation-circle"></i> {{post.offers.results.length}} other users have placed an offer on this item.</span>\n</div>'),a.put("js/watchlist/partials/watchlist.html",'<div ui-view></div>\n\n<div class="outer-container-interested interested-well">\n\n    <!--{{expandedPostingId}}-->\n\n    <!--{{currentState}}-->\n\n    <div ng-show="!currentFaves.length" class="background-instructions">\n        <div class="inset-background-text">\n            Place an offer on an item, or star an item, and it will appear here.\n        </div>\n    </div>\n\n\n\n    <div ng-show="currentFaves.length">\n        <table ng-table="tableParams" class="table">\n            <thead>\n            <tr ng-show="checkboxes.checked">\n                <th>\n\n                </th>\n                <th colspan="6" class="fave-batch-button">\n\n                    <dropdown-multiselect selectedlabels="selected_labels" userlabels="UserLabels" selectedfaves="checkboxes.items">\n\n                    </dropdown-multiselect>\n\n                </th>\n                <!--<th colspan="4" class="fave-batch-button" ng-model="batchContact" ng-click="batchEmail(checkboxes)">-->\n                    <!--<i class="fa fa-envelope">&nbsp;&nbsp;Contact Seller</i>-->\n                <!--</th>-->\n                <th colspan="6" class="fave-batch-button" ng-model="batchTrash" ng-click="batchRemoveFaves(checkboxes)">\n                    <i class="fa fa-trash">&nbsp;&nbsp;Trash</i>\n                </th>\n            </tr>\n            <tr>\n                <th colspan="1" width="30px">\n                    <input type="checkbox" style="text-align: center; vertical-align: middle;" ng-model="checkboxes.masterCheck" id="select_all" name="filter-checkbox">\n                </th>\n                <th  colspan="9" class="text-center">\n                    <input class="form-control" type="text" ng-model="filters.$" placeholder="Filter Watchlist" style="width:98%; margin:0px;"/>\n                </th>\n                <th colspan="2" style="vertical-align: middle;" class="text-center sortable" ng-class="{\n                                        \'sort-asc\': tableParams.isSortBy(\'price\', \'asc\'),\n                                        \'sort-desc\': tableParams.isSortBy(\'price\', \'desc\')\n                                    }"\n                    ng-click="tableParams.sorting({\'price\' : tableParams.isSortBy(\'price\', \'asc\') ? \'desc\' : \'asc\'})">\n                    <div>Price</div>\n                </th>\n            </tr>\n            </thead>\n        </table>\n    </div>\n    <div class="inner-container-interested">\n        <table ng-table="tableParams" class="table table-striped table-hover table-padding" ng-class="checkboxes.checked ? \'table-big-nudge\' : \'table-nudge\'">\n            <thead>\n\n            </thead>\n            <tbody>\n                <tr ng-repeat-start="favorite in $data" ng-click="openSplash(favorite)">\n                    <td width="30" style="text-align: center; vertical-align: middle;">\n                        <input type="checkbox" ng-model="checkboxes.items[favorite.postingId]" ng-click="$event.stopPropagation();"/>\n                    </td>\n                    <td style="width:70px; cursor: pointer;">\n                        <img ng-show="favorite.images.length" ng-src="{{::favorite.images[0].full || favorite.images[0].thumb || favorite.images[0].images}}" style="width:70px; height:70px;">\n                        <div ng-show="!favorite.images.length" class="watchlist-noImage-Placeholder"></div>\n                    </td>\n                    <td filter="{ \'heading\': \'text\' }" style="cursor: pointer;">\n\n                        <h4>{{::favorite.heading | cleanHeading}}\n                                <span ng-repeat="label in favorite.labels" class="label label-primary" style="font-weight: inherit; margin-right: 5px;">\n                                    {{label}} | x\n                                </span>\n                        </h4>\n\n                        <div>\n                            <button class="btn btn-default" type="button" ng-click="expandCollapseQuestions($event, favorite)">\n                                <i class="fa" ng-class="favorite.currentlyViewing.questions ? \'fa-chevron-down\' : \'fa-chevron-right\'"></i> Questions\n                            </button>\n\n                            <button class="btn btn-default" type="button" ng-click="expandCollapseMeetingRequests($event, favorite)">\n                                <i class="fa" ng-class="favorite.currentlyViewing.meetings ? \'fa-chevron-down\' : \'fa-chevron-right\'"></i> Offers\n                            </button>\n                        </div>\n                    </td>\n                    <td ng-if="favorite.askingPrice.value" style="vertical-align: middle;">\n                        <h5>{{::favorite.askingPrice.value | currency : $ : 0}}</h5>\n                    </td>\n                    <td ng-if="!favorite.askingPrice.value" style="vertical-align: middle;">\n                        <h4>No price</h4>\n                    </td>\n                    <td style="width:20px; vertical-align: middle;">\n                        <i class="fa fa-trash-o fa-2x" ng-click="removeFave(favorite); $event.stopPropagation();" style="cursor: pointer;" tooltip="Remove from watch list" tooltip-trigger="mouseenter" tooltip-placement="left"></i>\n                    </td>\n                </tr>\n\n                <tr ng-show="currentState === \'watchlist.questions\' && expandedPostingId === favorite.postingId" style="background-color: rgb(253, 253, 253);">\n                    <td colspan="6" style="background-color: rgb(253, 253, 253);">\n                        <sender-questions-more-info post="favorite"></sender-questions-more-info>\n                    </td>\n                </tr>\n\n                <tr ng-repeat-end ng-show="currentState === \'watchlist.meetings\' && expandedPostingId === favorite.postingId" style="background-color: rgb(253, 253, 253);">\n                    <td colspan="6" style="background-color: rgb(253, 253, 253);">\n                        <sender-meetings-more-info post="favorite"></sender-meetings-more-info>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</div>'),
a.put("js/watchlist/questions/partials/watchlist.questions.html",'<div ng-repeat="question in post.questions.results">\n    <div style="border: 1px solid; border-color: #e5e6e9 #dfe0e4 #d0d1d5; margin-bottom: 20px; padding: 0px;" class="col-md-10 col-xs-12">\n        <div style="background-color: #ffffff; padding: 10px;">\n            <div>\n                <img ng-src="{{question.userProfile.profile_photo}}" height="40" style="position: relative; top: -12px;">\n                <div style="display: inline-block">\n                    <div>\n                        @{{question.username}}\n                    </div>\n                    <div>\n                        Sent {{question.modifiedAt | date:"MMMM d \'at\' h:mma"}}\n                    </div>\n                </div>\n                <div ng-show="question.username === userObj.user_settings.name">\n                    <div class="dropdown" dropdown on-toggle="toggled(open)" style="position: absolute; top: 10px; right: 15px;">\n                      <a href class="dropdown-toggle" dropdown-toggle><i class="fa fa-chevron-down"></i></a>\n                      <ul class="dropdown-menu dropdown-menu-right">\n                          <li>\n                              <a href ng-click="deleteQuestion(question.postingId, question.questionId)">Delete my question</a>\n                          </li>\n                      </ul>\n                    </div>\n                </div>\n                <div>\n                    Q: {{question.value}}\n                </div>\n                <div ng-show="question.answers.length">\n                    <div ng-repeat="answer in question.answers">\n                        A: {{answer.value}}\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div style="padding: 10px; background-color: #F4A460; color:#ffffff" ng-show="!question.answers.length">\n            Waiting on seller to answer.  Hang tight!\n        </div>\n    </div>\n</div>\n<div class="col-xs-12">\n    <!--<a ng-show="showAnswered && post.questions.results.length" ng-click="showAnswered = !showAnswered">Hide questions already answered?</a>-->\n    <!--<a ng-show="!showAnswered && post.questions.results.length" ng-click="showAnswered = !showAnswered">Show questions already answered?</a>-->\n    <span ng-show="!post.questions.results.length">User questions associated with this item will appear here.</span>\n</div>')}]);