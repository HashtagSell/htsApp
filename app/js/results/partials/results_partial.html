<div ui-view></div>

<div ng-show="status.error.message" class="background-instructions">
    <div class="inset-background-text" ng-bind-html="status.error.message">

    </div>
</div>

<div class="outer-container">
    <img ng-if="status.pleaseWait" src="/images/logo/hashtag_spinner.gif" class="spinner-abs-center"/>
    <div class="results-container" resize-grid ng-class="{ 'split-results-container' : views.showMap }">
        <!--GRID VIEW-->
        <div vs-repeat class="inner-container" vs-excess="50" vs-size-property="rowHeight" vs-offset-before="77" vs-excess="30" on-vs-index-change="infiniteScroll(startIndex, endIndex)" ng-show="views.gridView">
            <div ng-repeat="row in results.gridRows">
                <div ng-repeat="result in row.rowContents"
                     ng-click="openSplash(this)"
                     class="grid-item"
                     style="width: {{results.gridPercentageWidth}}%;"
                        >
                    <div class="thumbnail" style="cursor: pointer">
                        <ribbon ng-if="result.askingPrice.value">{{result.askingPrice.value | currency : $ : 0}}</ribbon>
                        <hts-fave-toggle class="starPositioning"></hts-fave-toggle>
                        <!--<div style="background: url({{result.images[0].full || result.images[0].thumb || result.images[0].images}}) no-repeat center center fixed; height: 172px; webkit-background-size: cover; -moz-background-size: cover; -o-background-size: cover;"></div>-->
                        <img ng-if="result.images.length" ng-src="{{::result.images[0].full || result.images[0].thumb || result.images[0].images}}" class="fitImage">
                        <div ng-if="!result.images.length" class="grid-noImage-Placeholder"></div>
                        <div class="caption">
                            <h4 class="heading" ng-bind-html="result.heading | cleanHeading"></h4>
                            <p class="body" ng-bind-html="result.body | cleanBodyExcerpt"></p>
                            <span class="distance">
                                <i class="fa fa-location-arrow" style="color: #777777;"></i>&nbsp;{{::result.geo.distance* 0.00062137 | number:0}} mi.
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>



        <!--LIST VIEW-->
        <div vs-repeat class="inner-container" vs-excess="20" vs-size-property="rowHeight" vs-offset-before="77" ng-show="!views.gridView">
            <div ng-repeat="row in results.gridRows" class="result-list-item">
                <div style="cursor: pointer;" ng-repeat="result in row.rowContents"
                     ng-click="openSplash(this)"
                        >
                    <div class="thumbnail">
                        <ribbon ng-if="!!result.askingPrice.value" >{{::result.askingPrice.value | currency : $ : 0}}</ribbon>

                        <!--Has NO image-->
                        <div ng-if="!result.images.length">
                            <div class="row">
                                <div class="col-lg-5 col-md-6 col-sm-6 col-xs-6">
                                    <div class="noImage-Placeholder"></div>
                                </div>
                                <div class="col-lg-7 col-md-6 col-sm-6 col-xs-6 noImage-TextContainer">
                                    <div class="row">
                                        <h3 class="carousel-heading" ng-bind-html="result.heading | cleanHeading"></h3>
                                        <hts-fave-toggle class="noImage-starPositioning"></hts-fave-toggle>
                                        <p class="carousel-body" ng-bind-html="result.body |cleanBody"></p>
                                        <div class="pull-left noImage-distance-positioning">
                                            <i class="fa fa-location-arrow noImage-distance"></i>&nbsp;{{::result.geo.distance* 0.00062137 | number:0}} mi.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <!--Has ONE image-->
                        <div ng-if="result.images.length == 1">
                            <div class="row">
                                <div class="col-lg-5 col-md-6 col-sm-6 col-xs-6">
                                    <img ng-src="{{::result.images[0].full || result.images[0].thumb || result.images[0].images}}" class="img-responsive singleImage-Image">
                                </div>
                                <div class="col-lg-7 col-md-6 col-sm-6 col-xs-6 singleImage-TextContainer">
                                    <div class="row">
                                        <div class="caption">
                                            <h3 class="singleImage-heading" ng-bind-html="result.heading | cleanHeading"></h3>
                                            <hts-fave-toggle class="singleImage-starPositioning"></hts-fave-toggle>
                                            <p class="singleImage-body" ng-bind-html="result.body |cleanBody"></p>
                                            <div class="pull-left singleImage-distance-positioning">
                                                <i class="fa fa-location-arrow singleImage-distance"></i>&nbsp;{{::result.geo.distance* 0.00062137 | number:0}} mi.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <!--Has MULTIPLE images-->
                        <div ng-if="result.images.length > 1">
                            <div class="row">
                                <div class="col-lg-12">
                                    <slick-carousel
                                            settings="slickConfig"
                                            media="result.images">
                                    </slick-carousel>
                                </div>
                            </div>

                            <div class="row">
                                <div class="caption">
                                    <h3 class="carousel-heading" ng-bind-html="result.heading | cleanHeading"></h3>
                                    <hts-fave-toggle class="carousel-starPositioning"></hts-fave-toggle>
                                    <div class="carousel-distance-positioning">
                                        <i class="fa fa-location-arrow carousel-distance"></i>&nbsp;{{::result.geo.distance* 0.00062137 | number:0}} mi.
                                    </div>
                                    <p class="carousel-body" ng-bind-html="result.body |cleanBody"></p>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div class="loadingMore" ng-show="status.loading">
            <img src="/images/app/ajax-loader.gif">&nbsp;{{status.loadingMessage}}</div>
        </div>
    </div>



    <div class="map-container" ng-class="{ 'show-map' : views.showMap }" ng-if="views.showMap">
        <ui-gmap-google-map center="map.center" zoom="map.zoom" bounds="map.bounds" draggable="true" options="map.options">
            <!--<ui-gmap-markers models="map.markers" options="'options'" coords="'coords'" fit="true">-->
            <!--<ui-gmap-markers models="map.markers" options="'options'" coords="'coords'" fit="true" doCluster="true" clusterOptions="map.clusterOptions" doRebuildAll="true">-->
            <ui-gmap-markers models="map.markers" options="'options'" coords="'coords'" fit="true" doCluster="true" clusterOptions="map.clusterOptions" doRebuildAll="map.refresh">
            </ui-gmap-markers>
        </ui-gmap-google-map>
    </div>


</div>

