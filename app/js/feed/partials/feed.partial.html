<div ui-view></div>

<div ng-show="status.error.message" class="background-instructions">
    <div class="inset-background-text" ng-bind-html="status.error.message">

    </div>
    {{status.error.trace}}
</div>

<div class="outer-container col-xs-12">
    <img ng-if="status.pleaseWait" src="https://static.hashtagsell.com/htsApp/spinners/hashtag_spinner.gif" class="spinner-abs-center"/>

    <div vs-repeat class="inner-container row" vs-size-property="feedItemHeight" vs-offset-before="77" vs-excess="30">
        <div class="feed-item" style="cursor: pointer;" ng-repeat="result in results"
             ng-click="openSplash(this)"
                >
            <div class="thumbnail">
                <ribbon ng-if="!!result.askingPrice.value">{{::result.askingPrice.value | currency : $ : 0}}</ribbon>


                <!--Has NO image-->
                <div ng-if="!result.images.length">
                    <div class="row">
                        <div class="col-lg-5 col-md-6 col-sm-6 col-xs-6">
                            <div class="noImage-Placeholder"></div>
                        </div>
                        <div class="col-lg-7 col-md-6 col-sm-6 col-xs-6 noImage-TextContainer">
                            <div class="row">
                                <h3 class="carousel-heading" ng-bind-html="result.heading | cleanHeading"></h3>
                                <hts-fave-toggle class="noImage-starPositioning"></hts-fave-toggle>
                                <p class="carousel-body" ng-bind-html="result.body |cleanBodyExcerpt"></p>
                                <div class="pull-left noImage-timestamp">
                                    Posted {{(currentDate - result.external.threeTaps.timestamp) | secondsToTimeString}} ago.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <!--Has ONE image-->
                <div ng-if="result.images.length == 1">
                    <div class="row">
                        <div class="col-lg-5 col-md-6 col-sm-6 col-xs-6">
                            <img ng-src="{{::result.images[0].full || result.images[0].thumb || result.images[0].images}}" class="img-responsive singleImage-Image">
                        </div>
                        <div class="col-lg-7 col-md-6 col-sm-6 col-xs-6 singleImage-TextContainer">
                            <div class="row">
                                <div class="caption">
                                    <h3 class="singleImage-heading" ng-bind-html="result.heading | cleanHeading"></h3>
                                    <hts-fave-toggle class="singleImage-starPositioning"></hts-fave-toggle>
                                    <p class="singleImage-body" ng-bind-html="result.body |cleanBodyExcerpt"></p>
                                    <div class="pull-left singleImage-timestamp">
                                        Posted {{(currentDate - result.external.threeTaps.timestamp) | secondsToTimeString}} ago.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <!--Has MULTIPLE images-->
                <div ng-if="result.images.length > 1">
                    <div class="row">
                        <div class="col-lg-12">
                            <slick-carousel
                                    settings="slickConfig"
                                    media="result.images">
                            </slick-carousel>
                        </div>
                    </div>

                    <div class="row">
                        <div class="caption">
                            <h3 class="carousel-heading" ng-bind-html="result.heading | cleanHeading"></h3>
                            <hts-fave-toggle class="carousel-starPositioning"></hts-fave-toggle>
                            <p class="carousel-body" ng-bind-html="result.body |cleanBodyExcerpt"></p>
                            <div class="pull-left carousel-timestamp">
                                Posted {{(currentDate - result.external.threeTaps.timestamp) | secondsToTimeString}} ago.
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<!--Category Tree-->
<div ng-show="results.length" class="feed-category-container hidden-sm hidden-xs">

    <input type="text" ng-model="filterCategories" ng-change="expandTree()" class="form-control" placeholder="Filter Categories" style="width: 200px; margin-top: 20px;"/>

    <div class="feed-inner-container">
        <!--Category tree selector-->
        <div ivh-treeview="feedCategoryObj.nestedCategories"
             ivh-treeview-label-attribute="'name'"
             ivh-treeview-id-attribute="'code'"
             ivh-treeview-children-attribute="'categories'"
             ivh-treeview-selected-attribute="'selected'"
             ivh-treeview-change-handler="categoryOnChange"
             ivh-treeview-filter="filterCategories"
             class="panel panel-default feed-category-selector">
        </div>

    </div>
    <div>
        Select the category of items you want to see in your feed.
    </div>
</div>